> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

DatabaseStorage initialized - using hybrid database setup
- User data: Cloud PostgreSQL database
- Music data: Local SQLite database
✅ Stripe initialized successfully for subscriptions
🔑 Stripe API Mode: LIVE MODE ⚠️
⚠️ WARNING: Using live Stripe keys - test cards will be declined!
✅ Stripe initialized successfully for payments
✅ Stripe initialized successfully for monitoring
🚀 Starting application initialization...
🔍 Deployment info: {
  nodeVersion: 'v20.19.3',
  platform: 'linux',
  environment: 'development',
  timestamp: '2025-09-05T03:03:11.355Z'
}
📁 Step 1/5: Creating required directories...
✅ data directory verified and writable
✅ public directory verified and writable
✅ uploads directory verified and writable
✅ attached_assets directory verified and writable
✅ Directory structure fully verified
✅ Step 1/5: Directory creation completed
🔧 Step 2/5: Validating environment variables...
✅ Environment variables validated successfully
🔍 Environment variable status:
  ✅ DATABASE_URL: postgres...
  ✅ PORT: 5000
  ✅ NODE_ENV: development
  ⚠️ REQUIRE_SECRETS: not set
  ⚠️ DEPLOYMENT_TEST: not set
  ⚠️ GRACEFUL_DEGRADATION: not set
✅ Step 2/5: Environment validation completed
📋 Step 3/5: Setting up routes and server...
🔧 Starting route registration...
🔐 Setting up authentication middleware...
✅ Auth strategy configured for domain: 8003ebbc-7c24-44f5-a60e-826fca6862d2-00-2focubqywwqvm.kirk.replit.dev
✅ Authentication setup completed with 1/1 domains
✅ Authentication middleware configured successfully
✅ Authentication routes registered
📦 Registering sample file download routes...
✅ Sample file download routes registered
💳 Registering Stripe payment routes...
💳 Registering active Stripe payment routes...
💳 Registering Stripe payment routes...
setAutoSaveCallback: Data auto-saves to local SQLite database
🗄️ Registering database storage routes...
🎵 Registering song management routes...
🎧 Registering track management routes...
📊 Registering waveform caching routes...
🔍 Registering lyrics search routes...
📁 Registering file registry routes...
🌐 Creating HTTP server...
✅ HTTP server created successfully
🎯 Route registration completed successfully
✅ Step 3/5: Routes registered successfully
⚙️ Step 4/5: Setting up file serving...
🔍 Environment mode: development
🔧 Setting up Vite development server...
✅ Step 4/5: Vite development server configured
🌐 Step 5/5: Starting server...
🔍 Server configuration: {
  port: 5000,
  host: '0.0.0.0',
  environment: 'development',
  timestamp: '2025-09-05T03:03:11.646Z'
}
🎉 Step 5/5: Server started successfully!
3:03:11 AM [express] serving on port 5000
🔗 Application available at: http://0.0.0.0:5000
🔍 Full startup summary: {
  directories: true,
  environment: true,
  routes: true,
  fileServing: true,
  server: true
}
🔍 Starting subscription status check...
🔍 Starting subscription status check...
📅 Subscription monitor started - checking every 24 hours
✅ Subscription monitoring started
✅ Updated subscription for user user_1755820135782_sfgt53h34: status=1
❌ Subscription not found for subscription-test@example.com, set to free
✅ Subscription check completed for 1 users
Browserslist: browsers data (caniuse-lite) is 11 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
💥 Uncaught Exception caught: {
  message: 'terminating connection due to administrator command',
  name: 'error',
  stack: 'error: terminating connection due to administrator command\n' +
    '    at cn.parseErrorMessage (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1182:6)\n' +
    '    at cn.handlePacket (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1143:13)\n' +
    '    at cn.parse (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1127:36)\n' +
    '    at v.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1190:16)\n' +
    '    at v.emit (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:397:12)\n' +
    '    at WebSocket.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:987:80)\n' +
    '    at callListener (/home/runner/workspace/node_modules/ws/lib/event-target.js:290:14)\n' +
    '    at WebSocket.onMessage (/home/runner/workspace/node_modules/ws/lib/event-target.js:209:9)\n' +
    '    at WebSocket.emit (node:events:524:28)',
  timestamp: '2025-09-05T03:03:13.534Z',
  environment: 'development',
  nodeVersion: 'v20.19.3',
  platform: 'linux'
}
🔧 Attempting graceful shutdown in 2000ms...
🛑 Forced exit after uncaught exception
