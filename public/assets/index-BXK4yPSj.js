var Wh=e=>{throw TypeError(e)};var Ac=(e,t,n)=>t.has(e)||Wh("Cannot "+n);var J=(e,t,n)=>(Ac(e,t,"read from private field"),n?n.call(e):t.get(e)),$e=(e,t,n)=>t.has(e)?Wh("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ae=(e,t,n,r)=>(Ac(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),wt=(e,t,n)=>(Ac(e,t,"access private method"),n);var sa=(e,t,n,r)=>({set _(s){Ae(e,t,s,n)},get _(){return J(e,t,r)}});function gS(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ol(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _g={exports:{}},Ll={},Tg={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=Symbol.for("react.element"),vS=Symbol.for("react.portal"),yS=Symbol.for("react.fragment"),xS=Symbol.for("react.strict_mode"),wS=Symbol.for("react.profiler"),bS=Symbol.for("react.provider"),SS=Symbol.for("react.context"),kS=Symbol.for("react.forward_ref"),NS=Symbol.for("react.suspense"),jS=Symbol.for("react.memo"),CS=Symbol.for("react.lazy"),Vh=Symbol.iterator;function ES(e){return e===null||typeof e!="object"?null:(e=Vh&&e[Vh]||e["@@iterator"],typeof e=="function"?e:null)}var Pg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ag=Object.assign,Rg={};function Eo(e,t,n){this.props=e,this.context=t,this.refs=Rg,this.updater=n||Pg}Eo.prototype.isReactComponent={};Eo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Eo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ig(){}Ig.prototype=Eo.prototype;function Hd(e,t,n){this.props=e,this.context=t,this.refs=Rg,this.updater=n||Pg}var Kd=Hd.prototype=new Ig;Kd.constructor=Hd;Ag(Kd,Eo.prototype);Kd.isPureReactComponent=!0;var Hh=Array.isArray,Mg=Object.prototype.hasOwnProperty,Gd={current:null},Dg={key:!0,ref:!0,__self:!0,__source:!0};function Og(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Mg.call(t,r)&&!Dg.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Bi,type:e,key:o,ref:a,props:s,_owner:Gd.current}}function _S(e,t){return{$$typeof:Bi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bi}function TS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Kh=/\/+/g;function Rc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?TS(""+e.key):t.toString(36)}function Da(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Bi:case vS:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Rc(a,0):r,Hh(s)?(n="",e!=null&&(n=e.replace(Kh,"$&/")+"/"),Da(s,t,n,"",function(u){return u})):s!=null&&(Yd(s)&&(s=_S(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Kh,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Hh(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+Rc(o,l);a+=Da(o,t,n,c,s)}else if(c=ES(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+Rc(o,l++),a+=Da(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ia(e,t,n){if(e==null)return e;var r=[],s=0;return Da(e,r,"","",function(o){return t.call(n,o,s++)}),r}function PS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rt={current:null},Oa={transition:null},AS={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:Oa,ReactCurrentOwner:Gd};function Lg(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:ia,forEach:function(e,t,n){ia(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ia(e,function(){t++}),t},toArray:function(e){return ia(e,function(t){return t})||[]},only:function(e){if(!Yd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=Eo;Ie.Fragment=yS;Ie.Profiler=wS;Ie.PureComponent=Hd;Ie.StrictMode=xS;Ie.Suspense=NS;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AS;Ie.act=Lg;Ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ag({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Gd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Mg.call(t,c)&&!Dg.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Bi,type:e.type,key:s,ref:o,props:r,_owner:a}};Ie.createContext=function(e){return e={$$typeof:SS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bS,_context:e},e.Consumer=e};Ie.createElement=Og;Ie.createFactory=function(e){var t=Og.bind(null,e);return t.type=e,t};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:kS,render:e}};Ie.isValidElement=Yd;Ie.lazy=function(e){return{$$typeof:CS,_payload:{_status:-1,_result:e},_init:PS}};Ie.memo=function(e,t){return{$$typeof:jS,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=Oa.transition;Oa.transition={};try{e()}finally{Oa.transition=t}};Ie.unstable_act=Lg;Ie.useCallback=function(e,t){return Rt.current.useCallback(e,t)};Ie.useContext=function(e){return Rt.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return Rt.current.useDeferredValue(e)};Ie.useEffect=function(e,t){return Rt.current.useEffect(e,t)};Ie.useId=function(){return Rt.current.useId()};Ie.useImperativeHandle=function(e,t,n){return Rt.current.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return Rt.current.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return Rt.current.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return Rt.current.useMemo(e,t)};Ie.useReducer=function(e,t,n){return Rt.current.useReducer(e,t,n)};Ie.useRef=function(e){return Rt.current.useRef(e)};Ie.useState=function(e){return Rt.current.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return Rt.current.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return Rt.current.useTransition()};Ie.version="18.3.1";Tg.exports=Ie;var m=Tg.exports;const Ne=Ol(m),qd=gS({__proto__:null,default:Ne},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS=m,IS=Symbol.for("react.element"),MS=Symbol.for("react.fragment"),DS=Object.prototype.hasOwnProperty,OS=RS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LS={key:!0,ref:!0,__self:!0,__source:!0};function Fg(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)DS.call(t,r)&&!LS.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:IS,type:e,key:o,ref:a,props:s,_owner:OS.current}}Ll.Fragment=MS;Ll.jsx=Fg;Ll.jsxs=Fg;_g.exports=Ll;var i=_g.exports,$g={exports:{}},en={},zg={exports:{}},Bg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,_){var W=z.length;z.push(_);e:for(;0<W;){var D=W-1>>>1,B=z[D];if(0<s(B,_))z[D]=_,z[W]=B,W=D;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var _=z[0],W=z.pop();if(W!==_){z[0]=W;e:for(var D=0,B=z.length,X=B>>>1;D<X;){var Y=2*(D+1)-1,Z=z[Y],le=Y+1,ve=z[le];if(0>s(Z,W))le<B&&0>s(ve,Z)?(z[D]=ve,z[le]=W,D=le):(z[D]=Z,z[Y]=W,D=Y);else if(le<B&&0>s(ve,W))z[D]=ve,z[le]=W,D=le;else break e}}return _}function s(z,_){var W=z.sortIndex-_.sortIndex;return W!==0?W:z.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,d=null,g=3,v=!1,w=!1,p=!1,x=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=z)r(u),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(u)}}function j(z){if(p=!1,S(z),!w)if(n(c)!==null)w=!0,$(N);else{var _=n(u);_!==null&&U(j,_.startTime-z)}}function N(z,_){w=!1,p&&(p=!1,h(T),T=-1),v=!0;var W=g;try{for(S(_),d=n(c);d!==null&&(!(d.expirationTime>_)||z&&!R());){var D=d.callback;if(typeof D=="function"){d.callback=null,g=d.priorityLevel;var B=D(d.expirationTime<=_);_=e.unstable_now(),typeof B=="function"?d.callback=B:d===n(c)&&r(c),S(_)}else r(c);d=n(c)}if(d!==null)var X=!0;else{var Y=n(u);Y!==null&&U(j,Y.startTime-_),X=!1}return X}finally{d=null,g=W,v=!1}}var C=!1,P=null,T=-1,M=5,A=-1;function R(){return!(e.unstable_now()-A<M)}function E(){if(P!==null){var z=e.unstable_now();A=z;var _=!0;try{_=P(!0,z)}finally{_?O():(C=!1,P=null)}}else C=!1}var O;if(typeof y=="function")O=function(){y(E)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,I=b.port2;b.port1.onmessage=E,O=function(){I.postMessage(null)}}else O=function(){x(E,0)};function $(z){P=z,C||(C=!0,O())}function U(z,_){T=x(function(){z(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,$(N))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(z){switch(g){case 1:case 2:case 3:var _=3;break;default:_=g}var W=g;g=_;try{return z()}finally{g=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,_){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var W=g;g=z;try{return _()}finally{g=W}},e.unstable_scheduleCallback=function(z,_,W){var D=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?D+W:D):W=D,z){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,z={id:f++,callback:_,priorityLevel:z,startTime:W,expirationTime:B,sortIndex:-1},W>D?(z.sortIndex=W,t(u,z),n(c)===null&&z===n(u)&&(p?(h(T),T=-1):p=!0,U(j,W-D))):(z.sortIndex=B,t(c,z),w||v||(w=!0,$(N))),z},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(z){var _=g;return function(){var W=g;g=_;try{return z.apply(this,arguments)}finally{g=W}}}})(Bg);zg.exports=Bg;var FS=zg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $S=m,Jt=FS;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ug=new Set,gi={};function ks(e,t){co(e,t),co(e+"Capture",t)}function co(e,t){for(gi[e]=t,e=0;e<t.length;e++)Ug.add(t[e])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cu=Object.prototype.hasOwnProperty,zS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gh={},Yh={};function BS(e){return Cu.call(Yh,e)?!0:Cu.call(Gh,e)?!1:zS.test(e)?Yh[e]=!0:(Gh[e]=!0,!1)}function US(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function WS(e,t,n,r){if(t===null||typeof t>"u"||US(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function It(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){vt[e]=new It(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];vt[t]=new It(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){vt[e]=new It(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){vt[e]=new It(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){vt[e]=new It(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){vt[e]=new It(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){vt[e]=new It(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){vt[e]=new It(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){vt[e]=new It(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xd=/[\-:]([a-z])/g;function Qd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xd,Qd);vt[t]=new It(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xd,Qd);vt[t]=new It(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xd,Qd);vt[t]=new It(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){vt[e]=new It(e,1,!1,e.toLowerCase(),null,!1,!1)});vt.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){vt[e]=new It(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zd(e,t,n,r){var s=vt.hasOwnProperty(t)?vt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(WS(t,n,s,r)&&(n=null),r||s===null?BS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var fr=$S.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aa=Symbol.for("react.element"),Is=Symbol.for("react.portal"),Ms=Symbol.for("react.fragment"),Jd=Symbol.for("react.strict_mode"),Eu=Symbol.for("react.profiler"),Wg=Symbol.for("react.provider"),Vg=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),_u=Symbol.for("react.suspense"),Tu=Symbol.for("react.suspense_list"),tf=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),Hg=Symbol.for("react.offscreen"),qh=Symbol.iterator;function $o(e){return e===null||typeof e!="object"?null:(e=qh&&e[qh]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,Ic;function Jo(e){if(Ic===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ic=t&&t[1]||""}return`
`+Ic+e}var Mc=!1;function Dc(e,t){if(!e||Mc)return"";Mc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Mc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jo(e):""}function VS(e){switch(e.tag){case 5:return Jo(e.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 2:case 15:return e=Dc(e.type,!1),e;case 11:return e=Dc(e.type.render,!1),e;case 1:return e=Dc(e.type,!0),e;default:return""}}function Pu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ms:return"Fragment";case Is:return"Portal";case Eu:return"Profiler";case Jd:return"StrictMode";case _u:return"Suspense";case Tu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Vg:return(e.displayName||"Context")+".Consumer";case Wg:return(e._context.displayName||"Context")+".Provider";case ef:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tf:return t=e.displayName||null,t!==null?t:Pu(e.type)||"Memo";case wr:t=e._payload,e=e._init;try{return Pu(e(t))}catch{}}return null}function HS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pu(t);case 8:return t===Jd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Kg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function KS(e){var t=Kg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function la(e){e._valueTracker||(e._valueTracker=KS(e))}function Gg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Kg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function el(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Au(e,t){var n=t.checked;return et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Wr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yg(e,t){t=t.checked,t!=null&&Zd(e,"checked",t,!1)}function Ru(e,t){Yg(e,t);var n=Wr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Iu(e,t.type,n):t.hasOwnProperty("defaultValue")&&Iu(e,t.type,Wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Iu(e,t,n){(t!=="number"||el(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ei=Array.isArray;function Hs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Wr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Mu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(se(92));if(ei(n)){if(1<n.length)throw Error(se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Wr(n)}}function qg(e,t){var n=Wr(t.value),r=Wr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Jh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xg(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Du(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xg(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ca,Qg=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ca=ca||document.createElement("div"),ca.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ca.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GS=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(e){GS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oi[t]=oi[e]})});function Zg(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||oi.hasOwnProperty(e)&&oi[e]?(""+t).trim():t+"px"}function Jg(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Zg(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var YS=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ou(e,t){if(t){if(YS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function Lu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fu=null;function nf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $u=null,Ks=null,Gs=null;function em(e){if(e=Vi(e)){if(typeof $u!="function")throw Error(se(280));var t=e.stateNode;t&&(t=Ul(t),$u(e.stateNode,e.type,t))}}function ev(e){Ks?Gs?Gs.push(e):Gs=[e]:Ks=e}function tv(){if(Ks){var e=Ks,t=Gs;if(Gs=Ks=null,em(e),t)for(e=0;e<t.length;e++)em(t[e])}}function nv(e,t){return e(t)}function rv(){}var Oc=!1;function sv(e,t,n){if(Oc)return e(t,n);Oc=!0;try{return nv(e,t,n)}finally{Oc=!1,(Ks!==null||Gs!==null)&&(rv(),tv())}}function yi(e,t){var n=e.stateNode;if(n===null)return null;var r=Ul(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(se(231,t,typeof n));return n}var zu=!1;if(ir)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){zu=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{zu=!1}function qS(e,t,n,r,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var ii=!1,tl=null,nl=!1,Bu=null,XS={onError:function(e){ii=!0,tl=e}};function QS(e,t,n,r,s,o,a,l,c){ii=!1,tl=null,qS.apply(XS,arguments)}function ZS(e,t,n,r,s,o,a,l,c){if(QS.apply(this,arguments),ii){if(ii){var u=tl;ii=!1,tl=null}else throw Error(se(198));nl||(nl=!0,Bu=u)}}function Ns(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ov(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tm(e){if(Ns(e)!==e)throw Error(se(188))}function JS(e){var t=e.alternate;if(!t){if(t=Ns(e),t===null)throw Error(se(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return tm(s),e;if(o===r)return tm(s),t;o=o.sibling}throw Error(se(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?e:t}function iv(e){return e=JS(e),e!==null?av(e):null}function av(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=av(e);if(t!==null)return t;e=e.sibling}return null}var lv=Jt.unstable_scheduleCallback,nm=Jt.unstable_cancelCallback,e2=Jt.unstable_shouldYield,t2=Jt.unstable_requestPaint,ot=Jt.unstable_now,n2=Jt.unstable_getCurrentPriorityLevel,rf=Jt.unstable_ImmediatePriority,cv=Jt.unstable_UserBlockingPriority,rl=Jt.unstable_NormalPriority,r2=Jt.unstable_LowPriority,uv=Jt.unstable_IdlePriority,Fl=null,Bn=null;function s2(e){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Fl,e,void 0,(e.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:a2,o2=Math.log,i2=Math.LN2;function a2(e){return e>>>=0,e===0?32:31-(o2(e)/i2|0)|0}var ua=64,da=4194304;function ti(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ti(l):(o&=a,o!==0&&(r=ti(o)))}else a=n&~s,a!==0?r=ti(a):o!==0&&(r=ti(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-kn(t),s=1<<n,r|=e[n],t&=~s;return r}function l2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c2(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-kn(o),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=l2(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function Uu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dv(){var e=ua;return ua<<=1,!(ua&4194240)&&(ua=64),e}function Lc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ui(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kn(t),e[t]=n}function u2(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-kn(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function sf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-kn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ze=0;function fv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hv,of,mv,pv,gv,Wu=!1,fa=[],Ir=null,Mr=null,Dr=null,xi=new Map,wi=new Map,Sr=[],d2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rm(e,t){switch(e){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":xi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wi.delete(t.pointerId)}}function Bo(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Vi(t),t!==null&&of(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function f2(e,t,n,r,s){switch(t){case"focusin":return Ir=Bo(Ir,e,t,n,r,s),!0;case"dragenter":return Mr=Bo(Mr,e,t,n,r,s),!0;case"mouseover":return Dr=Bo(Dr,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return xi.set(o,Bo(xi.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,wi.set(o,Bo(wi.get(o)||null,e,t,n,r,s)),!0}return!1}function vv(e){var t=ns(e.target);if(t!==null){var n=Ns(t);if(n!==null){if(t=n.tag,t===13){if(t=ov(n),t!==null){e.blockedOn=t,gv(e.priority,function(){mv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function La(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Fu=r,n.target.dispatchEvent(r),Fu=null}else return t=Vi(n),t!==null&&of(t),e.blockedOn=n,!1;t.shift()}return!0}function sm(e,t,n){La(e)&&n.delete(t)}function h2(){Wu=!1,Ir!==null&&La(Ir)&&(Ir=null),Mr!==null&&La(Mr)&&(Mr=null),Dr!==null&&La(Dr)&&(Dr=null),xi.forEach(sm),wi.forEach(sm)}function Uo(e,t){e.blockedOn===t&&(e.blockedOn=null,Wu||(Wu=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,h2)))}function bi(e){function t(s){return Uo(s,e)}if(0<fa.length){Uo(fa[0],e);for(var n=1;n<fa.length;n++){var r=fa[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ir!==null&&Uo(Ir,e),Mr!==null&&Uo(Mr,e),Dr!==null&&Uo(Dr,e),xi.forEach(t),wi.forEach(t),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)vv(n),n.blockedOn===null&&Sr.shift()}var Ys=fr.ReactCurrentBatchConfig,ol=!0;function m2(e,t,n,r){var s=ze,o=Ys.transition;Ys.transition=null;try{ze=1,af(e,t,n,r)}finally{ze=s,Ys.transition=o}}function p2(e,t,n,r){var s=ze,o=Ys.transition;Ys.transition=null;try{ze=4,af(e,t,n,r)}finally{ze=s,Ys.transition=o}}function af(e,t,n,r){if(ol){var s=Vu(e,t,n,r);if(s===null)Gc(e,t,r,il,n),rm(e,r);else if(f2(s,e,t,n,r))r.stopPropagation();else if(rm(e,r),t&4&&-1<d2.indexOf(e)){for(;s!==null;){var o=Vi(s);if(o!==null&&hv(o),o=Vu(e,t,n,r),o===null&&Gc(e,t,r,il,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Gc(e,t,r,null,n)}}var il=null;function Vu(e,t,n,r){if(il=null,e=nf(r),e=ns(e),e!==null)if(t=Ns(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ov(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return il=e,null}function yv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n2()){case rf:return 1;case cv:return 4;case rl:case r2:return 16;case uv:return 536870912;default:return 16}default:return 16}}var Tr=null,lf=null,Fa=null;function xv(){if(Fa)return Fa;var e,t=lf,n=t.length,r,s="value"in Tr?Tr.value:Tr.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return Fa=s.slice(e,1<r?1-r:void 0)}function $a(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ha(){return!0}function om(){return!1}function tn(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ha:om,this.isPropagationStopped=om,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),t}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cf=tn(_o),Wi=et({},_o,{view:0,detail:0}),g2=tn(Wi),Fc,$c,Wo,$l=et({},Wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wo&&(Wo&&e.type==="mousemove"?(Fc=e.screenX-Wo.screenX,$c=e.screenY-Wo.screenY):$c=Fc=0,Wo=e),Fc)},movementY:function(e){return"movementY"in e?e.movementY:$c}}),im=tn($l),v2=et({},$l,{dataTransfer:0}),y2=tn(v2),x2=et({},Wi,{relatedTarget:0}),zc=tn(x2),w2=et({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),b2=tn(w2),S2=et({},_o,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),k2=tn(S2),N2=et({},_o,{data:0}),am=tn(N2),j2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=E2[e])?!!t[e]:!1}function uf(){return _2}var T2=et({},Wi,{key:function(e){if(e.key){var t=j2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$a(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?C2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uf,charCode:function(e){return e.type==="keypress"?$a(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$a(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),P2=tn(T2),A2=et({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lm=tn(A2),R2=et({},Wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uf}),I2=tn(R2),M2=et({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),D2=tn(M2),O2=et({},$l,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),L2=tn(O2),F2=[9,13,27,32],df=ir&&"CompositionEvent"in window,ai=null;ir&&"documentMode"in document&&(ai=document.documentMode);var $2=ir&&"TextEvent"in window&&!ai,wv=ir&&(!df||ai&&8<ai&&11>=ai),cm=" ",um=!1;function bv(e,t){switch(e){case"keyup":return F2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ds=!1;function z2(e,t){switch(e){case"compositionend":return Sv(t);case"keypress":return t.which!==32?null:(um=!0,cm);case"textInput":return e=t.data,e===cm&&um?null:e;default:return null}}function B2(e,t){if(Ds)return e==="compositionend"||!df&&bv(e,t)?(e=xv(),Fa=lf=Tr=null,Ds=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wv&&t.locale!=="ko"?null:t.data;default:return null}}var U2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!U2[e.type]:t==="textarea"}function kv(e,t,n,r){ev(r),t=al(t,"onChange"),0<t.length&&(n=new cf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var li=null,Si=null;function W2(e){Mv(e,0)}function zl(e){var t=Fs(e);if(Gg(t))return e}function V2(e,t){if(e==="change")return t}var Nv=!1;if(ir){var Bc;if(ir){var Uc="oninput"in document;if(!Uc){var fm=document.createElement("div");fm.setAttribute("oninput","return;"),Uc=typeof fm.oninput=="function"}Bc=Uc}else Bc=!1;Nv=Bc&&(!document.documentMode||9<document.documentMode)}function hm(){li&&(li.detachEvent("onpropertychange",jv),Si=li=null)}function jv(e){if(e.propertyName==="value"&&zl(Si)){var t=[];kv(t,Si,e,nf(e)),sv(W2,t)}}function H2(e,t,n){e==="focusin"?(hm(),li=t,Si=n,li.attachEvent("onpropertychange",jv)):e==="focusout"&&hm()}function K2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zl(Si)}function G2(e,t){if(e==="click")return zl(t)}function Y2(e,t){if(e==="input"||e==="change")return zl(t)}function q2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jn=typeof Object.is=="function"?Object.is:q2;function ki(e,t){if(jn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Cu.call(t,s)||!jn(e[s],t[s]))return!1}return!0}function mm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pm(e,t){var n=mm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mm(n)}}function Cv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ev(){for(var e=window,t=el();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=el(e.document)}return t}function ff(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function X2(e){var t=Ev(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Cv(n.ownerDocument.documentElement,n)){if(r!==null&&ff(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=pm(n,o);var a=pm(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Q2=ir&&"documentMode"in document&&11>=document.documentMode,Os=null,Hu=null,ci=null,Ku=!1;function gm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ku||Os==null||Os!==el(r)||(r=Os,"selectionStart"in r&&ff(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ci&&ki(ci,r)||(ci=r,r=al(Hu,"onSelect"),0<r.length&&(t=new cf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Os)))}function ma(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ls={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},Wc={},_v={};ir&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function Bl(e){if(Wc[e])return Wc[e];if(!Ls[e])return e;var t=Ls[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _v)return Wc[e]=t[n];return e}var Tv=Bl("animationend"),Pv=Bl("animationiteration"),Av=Bl("animationstart"),Rv=Bl("transitionend"),Iv=new Map,vm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(e,t){Iv.set(e,t),ks(t,[e])}for(var Vc=0;Vc<vm.length;Vc++){var Hc=vm[Vc],Z2=Hc.toLowerCase(),J2=Hc[0].toUpperCase()+Hc.slice(1);Yr(Z2,"on"+J2)}Yr(Tv,"onAnimationEnd");Yr(Pv,"onAnimationIteration");Yr(Av,"onAnimationStart");Yr("dblclick","onDoubleClick");Yr("focusin","onFocus");Yr("focusout","onBlur");Yr(Rv,"onTransitionEnd");co("onMouseEnter",["mouseout","mouseover"]);co("onMouseLeave",["mouseout","mouseover"]);co("onPointerEnter",["pointerout","pointerover"]);co("onPointerLeave",["pointerout","pointerover"]);ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ek=new Set("cancel close invalid load scroll toggle".split(" ").concat(ni));function ym(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ZS(r,t,void 0,e),e.currentTarget=null}function Mv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;ym(s,l,u),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;ym(s,l,u),o=c}}}if(nl)throw e=Bu,nl=!1,Bu=null,e}function He(e,t){var n=t[Qu];n===void 0&&(n=t[Qu]=new Set);var r=e+"__bubble";n.has(r)||(Dv(t,e,2,!1),n.add(r))}function Kc(e,t,n){var r=0;t&&(r|=4),Dv(n,e,r,t)}var pa="_reactListening"+Math.random().toString(36).slice(2);function Ni(e){if(!e[pa]){e[pa]=!0,Ug.forEach(function(n){n!=="selectionchange"&&(ek.has(n)||Kc(n,!1,e),Kc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pa]||(t[pa]=!0,Kc("selectionchange",!1,t))}}function Dv(e,t,n,r){switch(yv(t)){case 1:var s=m2;break;case 4:s=p2;break;default:s=af}n=s.bind(null,t,n,e),s=void 0,!zu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Gc(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ns(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}sv(function(){var u=o,f=nf(n),d=[];e:{var g=Iv.get(e);if(g!==void 0){var v=cf,w=e;switch(e){case"keypress":if($a(n)===0)break e;case"keydown":case"keyup":v=P2;break;case"focusin":w="focus",v=zc;break;case"focusout":w="blur",v=zc;break;case"beforeblur":case"afterblur":v=zc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=im;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=y2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=I2;break;case Tv:case Pv:case Av:v=b2;break;case Rv:v=D2;break;case"scroll":v=g2;break;case"wheel":v=L2;break;case"copy":case"cut":case"paste":v=k2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=lm}var p=(t&4)!==0,x=!p&&e==="scroll",h=p?g!==null?g+"Capture":null:g;p=[];for(var y=u,S;y!==null;){S=y;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,h!==null&&(j=yi(y,h),j!=null&&p.push(ji(y,j,S)))),x)break;y=y.return}0<p.length&&(g=new v(g,w,null,n,f),d.push({event:g,listeners:p}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==Fu&&(w=n.relatedTarget||n.fromElement)&&(ns(w)||w[ar]))break e;if((v||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=u,w=w?ns(w):null,w!==null&&(x=Ns(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=u),v!==w)){if(p=im,j="onMouseLeave",h="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=lm,j="onPointerLeave",h="onPointerEnter",y="pointer"),x=v==null?g:Fs(v),S=w==null?g:Fs(w),g=new p(j,y+"leave",v,n,f),g.target=x,g.relatedTarget=S,j=null,ns(f)===u&&(p=new p(h,y+"enter",w,n,f),p.target=S,p.relatedTarget=x,j=p),x=j,v&&w)t:{for(p=v,h=w,y=0,S=p;S;S=_s(S))y++;for(S=0,j=h;j;j=_s(j))S++;for(;0<y-S;)p=_s(p),y--;for(;0<S-y;)h=_s(h),S--;for(;y--;){if(p===h||h!==null&&p===h.alternate)break t;p=_s(p),h=_s(h)}p=null}else p=null;v!==null&&xm(d,g,v,p,!1),w!==null&&x!==null&&xm(d,x,w,p,!0)}}e:{if(g=u?Fs(u):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var N=V2;else if(dm(g))if(Nv)N=Y2;else{N=K2;var C=H2}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(N=G2);if(N&&(N=N(e,u))){kv(d,N,n,f);break e}C&&C(e,g,u),e==="focusout"&&(C=g._wrapperState)&&C.controlled&&g.type==="number"&&Iu(g,"number",g.value)}switch(C=u?Fs(u):window,e){case"focusin":(dm(C)||C.contentEditable==="true")&&(Os=C,Hu=u,ci=null);break;case"focusout":ci=Hu=Os=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,gm(d,n,f);break;case"selectionchange":if(Q2)break;case"keydown":case"keyup":gm(d,n,f)}var P;if(df)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ds?bv(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(wv&&n.locale!=="ko"&&(Ds||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ds&&(P=xv()):(Tr=f,lf="value"in Tr?Tr.value:Tr.textContent,Ds=!0)),C=al(u,T),0<C.length&&(T=new am(T,e,null,n,f),d.push({event:T,listeners:C}),P?T.data=P:(P=Sv(n),P!==null&&(T.data=P)))),(P=$2?z2(e,n):B2(e,n))&&(u=al(u,"onBeforeInput"),0<u.length&&(f=new am("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=P))}Mv(d,t)})}function ji(e,t,n){return{instance:e,listener:t,currentTarget:n}}function al(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=yi(e,n),o!=null&&r.unshift(ji(e,o,s)),o=yi(e,t),o!=null&&r.push(ji(e,o,s))),e=e.return}return r}function _s(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xm(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=yi(n,o),c!=null&&a.unshift(ji(n,c,l))):s||(c=yi(n,o),c!=null&&a.push(ji(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var tk=/\r\n?/g,nk=/\u0000|\uFFFD/g;function wm(e){return(typeof e=="string"?e:""+e).replace(tk,`
`).replace(nk,"")}function ga(e,t,n){if(t=wm(t),wm(e)!==t&&n)throw Error(se(425))}function ll(){}var Gu=null,Yu=null;function qu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xu=typeof setTimeout=="function"?setTimeout:void 0,rk=typeof clearTimeout=="function"?clearTimeout:void 0,bm=typeof Promise=="function"?Promise:void 0,sk=typeof queueMicrotask=="function"?queueMicrotask:typeof bm<"u"?function(e){return bm.resolve(null).then(e).catch(ok)}:Xu;function ok(e){setTimeout(function(){throw e})}function Yc(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),bi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bi(t)}function Or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var To=Math.random().toString(36).slice(2),Fn="__reactFiber$"+To,Ci="__reactProps$"+To,ar="__reactContainer$"+To,Qu="__reactEvents$"+To,ik="__reactListeners$"+To,ak="__reactHandles$"+To;function ns(e){var t=e[Fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ar]||n[Fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Sm(e);e!==null;){if(n=e[Fn])return n;e=Sm(e)}return t}e=n,n=e.parentNode}return null}function Vi(e){return e=e[Fn]||e[ar],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function Ul(e){return e[Ci]||null}var Zu=[],$s=-1;function qr(e){return{current:e}}function Ke(e){0>$s||(e.current=Zu[$s],Zu[$s]=null,$s--)}function We(e,t){$s++,Zu[$s]=e.current,e.current=t}var Vr={},jt=qr(Vr),Wt=qr(!1),ms=Vr;function uo(e,t){var n=e.type.contextTypes;if(!n)return Vr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Vt(e){return e=e.childContextTypes,e!=null}function cl(){Ke(Wt),Ke(jt)}function km(e,t,n){if(jt.current!==Vr)throw Error(se(168));We(jt,t),We(Wt,n)}function Ov(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(se(108,HS(e)||"Unknown",s));return et({},n,r)}function ul(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vr,ms=jt.current,We(jt,e),We(Wt,Wt.current),!0}function Nm(e,t,n){var r=e.stateNode;if(!r)throw Error(se(169));n?(e=Ov(e,t,ms),r.__reactInternalMemoizedMergedChildContext=e,Ke(Wt),Ke(jt),We(jt,e)):Ke(Wt),We(Wt,n)}var Zn=null,Wl=!1,qc=!1;function Lv(e){Zn===null?Zn=[e]:Zn.push(e)}function lk(e){Wl=!0,Lv(e)}function Xr(){if(!qc&&Zn!==null){qc=!0;var e=0,t=ze;try{var n=Zn;for(ze=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Zn=null,Wl=!1}catch(s){throw Zn!==null&&(Zn=Zn.slice(e+1)),lv(rf,Xr),s}finally{ze=t,qc=!1}}return null}var zs=[],Bs=0,dl=null,fl=0,sn=[],on=0,ps=null,nr=1,rr="";function Jr(e,t){zs[Bs++]=fl,zs[Bs++]=dl,dl=e,fl=t}function Fv(e,t,n){sn[on++]=nr,sn[on++]=rr,sn[on++]=ps,ps=e;var r=nr;e=rr;var s=32-kn(r)-1;r&=~(1<<s),n+=1;var o=32-kn(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,nr=1<<32-kn(t)+s|n<<s|r,rr=o+e}else nr=1<<o|n<<s|r,rr=e}function hf(e){e.return!==null&&(Jr(e,1),Fv(e,1,0))}function mf(e){for(;e===dl;)dl=zs[--Bs],zs[Bs]=null,fl=zs[--Bs],zs[Bs]=null;for(;e===ps;)ps=sn[--on],sn[on]=null,rr=sn[--on],sn[on]=null,nr=sn[--on],sn[on]=null}var Qt=null,Xt=null,Ye=!1,Sn=null;function $v(e,t){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qt=e,Xt=Or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qt=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ps!==null?{id:nr,overflow:rr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qt=e,Xt=null,!0):!1;default:return!1}}function Ju(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ed(e){if(Ye){var t=Xt;if(t){var n=t;if(!jm(e,t)){if(Ju(e))throw Error(se(418));t=Or(n.nextSibling);var r=Qt;t&&jm(e,t)?$v(r,n):(e.flags=e.flags&-4097|2,Ye=!1,Qt=e)}}else{if(Ju(e))throw Error(se(418));e.flags=e.flags&-4097|2,Ye=!1,Qt=e}}}function Cm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qt=e}function va(e){if(e!==Qt)return!1;if(!Ye)return Cm(e),Ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qu(e.type,e.memoizedProps)),t&&(t=Xt)){if(Ju(e))throw zv(),Error(se(418));for(;t;)$v(e,t),t=Or(t.nextSibling)}if(Cm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xt=Or(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=Qt?Or(e.stateNode.nextSibling):null;return!0}function zv(){for(var e=Xt;e;)e=Or(e.nextSibling)}function fo(){Xt=Qt=null,Ye=!1}function pf(e){Sn===null?Sn=[e]:Sn.push(e)}var ck=fr.ReactCurrentBatchConfig;function Vo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,e))}return e}function ya(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Em(e){var t=e._init;return t(e._payload)}function Bv(e){function t(h,y){if(e){var S=h.deletions;S===null?(h.deletions=[y],h.flags|=16):S.push(y)}}function n(h,y){if(!e)return null;for(;y!==null;)t(h,y),y=y.sibling;return null}function r(h,y){for(h=new Map;y!==null;)y.key!==null?h.set(y.key,y):h.set(y.index,y),y=y.sibling;return h}function s(h,y){return h=zr(h,y),h.index=0,h.sibling=null,h}function o(h,y,S){return h.index=S,e?(S=h.alternate,S!==null?(S=S.index,S<y?(h.flags|=2,y):S):(h.flags|=2,y)):(h.flags|=1048576,y)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,y,S,j){return y===null||y.tag!==6?(y=nu(S,h.mode,j),y.return=h,y):(y=s(y,S),y.return=h,y)}function c(h,y,S,j){var N=S.type;return N===Ms?f(h,y,S.props.children,j,S.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===wr&&Em(N)===y.type)?(j=s(y,S.props),j.ref=Vo(h,y,S),j.return=h,j):(j=Ka(S.type,S.key,S.props,null,h.mode,j),j.ref=Vo(h,y,S),j.return=h,j)}function u(h,y,S,j){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=ru(S,h.mode,j),y.return=h,y):(y=s(y,S.children||[]),y.return=h,y)}function f(h,y,S,j,N){return y===null||y.tag!==7?(y=fs(S,h.mode,j,N),y.return=h,y):(y=s(y,S),y.return=h,y)}function d(h,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=nu(""+y,h.mode,S),y.return=h,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case aa:return S=Ka(y.type,y.key,y.props,null,h.mode,S),S.ref=Vo(h,null,y),S.return=h,S;case Is:return y=ru(y,h.mode,S),y.return=h,y;case wr:var j=y._init;return d(h,j(y._payload),S)}if(ei(y)||$o(y))return y=fs(y,h.mode,S,null),y.return=h,y;ya(h,y)}return null}function g(h,y,S,j){var N=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:l(h,y,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case aa:return S.key===N?c(h,y,S,j):null;case Is:return S.key===N?u(h,y,S,j):null;case wr:return N=S._init,g(h,y,N(S._payload),j)}if(ei(S)||$o(S))return N!==null?null:f(h,y,S,j,null);ya(h,S)}return null}function v(h,y,S,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return h=h.get(S)||null,l(y,h,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case aa:return h=h.get(j.key===null?S:j.key)||null,c(y,h,j,N);case Is:return h=h.get(j.key===null?S:j.key)||null,u(y,h,j,N);case wr:var C=j._init;return v(h,y,S,C(j._payload),N)}if(ei(j)||$o(j))return h=h.get(S)||null,f(y,h,j,N,null);ya(y,j)}return null}function w(h,y,S,j){for(var N=null,C=null,P=y,T=y=0,M=null;P!==null&&T<S.length;T++){P.index>T?(M=P,P=null):M=P.sibling;var A=g(h,P,S[T],j);if(A===null){P===null&&(P=M);break}e&&P&&A.alternate===null&&t(h,P),y=o(A,y,T),C===null?N=A:C.sibling=A,C=A,P=M}if(T===S.length)return n(h,P),Ye&&Jr(h,T),N;if(P===null){for(;T<S.length;T++)P=d(h,S[T],j),P!==null&&(y=o(P,y,T),C===null?N=P:C.sibling=P,C=P);return Ye&&Jr(h,T),N}for(P=r(h,P);T<S.length;T++)M=v(P,h,T,S[T],j),M!==null&&(e&&M.alternate!==null&&P.delete(M.key===null?T:M.key),y=o(M,y,T),C===null?N=M:C.sibling=M,C=M);return e&&P.forEach(function(R){return t(h,R)}),Ye&&Jr(h,T),N}function p(h,y,S,j){var N=$o(S);if(typeof N!="function")throw Error(se(150));if(S=N.call(S),S==null)throw Error(se(151));for(var C=N=null,P=y,T=y=0,M=null,A=S.next();P!==null&&!A.done;T++,A=S.next()){P.index>T?(M=P,P=null):M=P.sibling;var R=g(h,P,A.value,j);if(R===null){P===null&&(P=M);break}e&&P&&R.alternate===null&&t(h,P),y=o(R,y,T),C===null?N=R:C.sibling=R,C=R,P=M}if(A.done)return n(h,P),Ye&&Jr(h,T),N;if(P===null){for(;!A.done;T++,A=S.next())A=d(h,A.value,j),A!==null&&(y=o(A,y,T),C===null?N=A:C.sibling=A,C=A);return Ye&&Jr(h,T),N}for(P=r(h,P);!A.done;T++,A=S.next())A=v(P,h,T,A.value,j),A!==null&&(e&&A.alternate!==null&&P.delete(A.key===null?T:A.key),y=o(A,y,T),C===null?N=A:C.sibling=A,C=A);return e&&P.forEach(function(E){return t(h,E)}),Ye&&Jr(h,T),N}function x(h,y,S,j){if(typeof S=="object"&&S!==null&&S.type===Ms&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case aa:e:{for(var N=S.key,C=y;C!==null;){if(C.key===N){if(N=S.type,N===Ms){if(C.tag===7){n(h,C.sibling),y=s(C,S.props.children),y.return=h,h=y;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===wr&&Em(N)===C.type){n(h,C.sibling),y=s(C,S.props),y.ref=Vo(h,C,S),y.return=h,h=y;break e}n(h,C);break}else t(h,C);C=C.sibling}S.type===Ms?(y=fs(S.props.children,h.mode,j,S.key),y.return=h,h=y):(j=Ka(S.type,S.key,S.props,null,h.mode,j),j.ref=Vo(h,y,S),j.return=h,h=j)}return a(h);case Is:e:{for(C=S.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(h,y.sibling),y=s(y,S.children||[]),y.return=h,h=y;break e}else{n(h,y);break}else t(h,y);y=y.sibling}y=ru(S,h.mode,j),y.return=h,h=y}return a(h);case wr:return C=S._init,x(h,y,C(S._payload),j)}if(ei(S))return w(h,y,S,j);if($o(S))return p(h,y,S,j);ya(h,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(h,y.sibling),y=s(y,S),y.return=h,h=y):(n(h,y),y=nu(S,h.mode,j),y.return=h,h=y),a(h)):n(h,y)}return x}var ho=Bv(!0),Uv=Bv(!1),hl=qr(null),ml=null,Us=null,gf=null;function vf(){gf=Us=ml=null}function yf(e){var t=hl.current;Ke(hl),e._currentValue=t}function td(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function qs(e,t){ml=e,gf=Us=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ut=!0),e.firstContext=null)}function fn(e){var t=e._currentValue;if(gf!==e)if(e={context:e,memoizedValue:t,next:null},Us===null){if(ml===null)throw Error(se(308));Us=e,ml.dependencies={lanes:0,firstContext:e}}else Us=Us.next=e;return t}var rs=null;function xf(e){rs===null?rs=[e]:rs.push(e)}function Wv(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,xf(t)):(n.next=s.next,s.next=n),t.interleaved=n,lr(e,r)}function lr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var br=!1;function wf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,lr(e,n)}return s=r.interleaved,s===null?(t.next=t,xf(r)):(t.next=s.next,s.next=t),r.interleaved=t,lr(e,n)}function za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sf(e,n)}}function _m(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pl(e,t,n,r){var s=e.updateQueue;br=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(o!==null){var d=s.baseState;a=0,f=u=c=null,l=o;do{var g=l.lane,v=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,p=l;switch(g=t,v=n,p.tag){case 1:if(w=p.payload,typeof w=="function"){d=w.call(v,d,g);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=p.payload,g=typeof w=="function"?w.call(v,d,g):w,g==null)break e;d=et({},d,g);break e;case 2:br=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else v={eventTime:v,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=v,c=d):f=f.next=v,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);vs|=a,e.lanes=a,e.memoizedState=d}}function Tm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(se(191,s));s.call(r)}}}var Hi={},Un=qr(Hi),Ei=qr(Hi),_i=qr(Hi);function ss(e){if(e===Hi)throw Error(se(174));return e}function bf(e,t){switch(We(_i,t),We(Ei,e),We(Un,Hi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Du(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Du(t,e)}Ke(Un),We(Un,t)}function mo(){Ke(Un),Ke(Ei),Ke(_i)}function Hv(e){ss(_i.current);var t=ss(Un.current),n=Du(t,e.type);t!==n&&(We(Ei,e),We(Un,n))}function Sf(e){Ei.current===e&&(Ke(Un),Ke(Ei))}var Ze=qr(0);function gl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xc=[];function kf(){for(var e=0;e<Xc.length;e++)Xc[e]._workInProgressVersionPrimary=null;Xc.length=0}var Ba=fr.ReactCurrentDispatcher,Qc=fr.ReactCurrentBatchConfig,gs=0,Je=null,ut=null,ft=null,vl=!1,ui=!1,Ti=0,uk=0;function bt(){throw Error(se(321))}function Nf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jn(e[n],t[n]))return!1;return!0}function jf(e,t,n,r,s,o){if(gs=o,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ba.current=e===null||e.memoizedState===null?mk:pk,e=n(r,s),ui){o=0;do{if(ui=!1,Ti=0,25<=o)throw Error(se(301));o+=1,ft=ut=null,t.updateQueue=null,Ba.current=gk,e=n(r,s)}while(ui)}if(Ba.current=yl,t=ut!==null&&ut.next!==null,gs=0,ft=ut=Je=null,vl=!1,t)throw Error(se(300));return e}function Cf(){var e=Ti!==0;return Ti=0,e}function Rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Je.memoizedState=ft=e:ft=ft.next=e,ft}function hn(){if(ut===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=ft===null?Je.memoizedState:ft.next;if(t!==null)ft=t,ut=e;else{if(e===null)throw Error(se(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},ft===null?Je.memoizedState=ft=e:ft=ft.next=e}return ft}function Pi(e,t){return typeof t=="function"?t(e):t}function Zc(e){var t=hn(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=ut,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var f=u.lane;if((gs&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,a=r):c=c.next=d,Je.lanes|=f,vs|=f}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=l,jn(r,t.memoizedState)||(Ut=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Je.lanes|=o,vs|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jc(e){var t=hn(),n=t.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);jn(o,t.memoizedState)||(Ut=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Kv(){}function Gv(e,t){var n=Je,r=hn(),s=t(),o=!jn(r.memoizedState,s);if(o&&(r.memoizedState=s,Ut=!0),r=r.queue,Ef(Xv.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Ai(9,qv.bind(null,n,r,s,t),void 0,null),ht===null)throw Error(se(349));gs&30||Yv(n,t,s)}return s}function Yv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qv(e,t,n,r){t.value=n,t.getSnapshot=r,Qv(t)&&Zv(e)}function Xv(e,t,n){return n(function(){Qv(t)&&Zv(e)})}function Qv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jn(e,n)}catch{return!0}}function Zv(e){var t=lr(e,1);t!==null&&Nn(t,e,1,-1)}function Pm(e){var t=Rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:e},t.queue=e,e=e.dispatch=hk.bind(null,Je,e),[t.memoizedState,e]}function Ai(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Jv(){return hn().memoizedState}function Ua(e,t,n,r){var s=Rn();Je.flags|=e,s.memoizedState=Ai(1|t,n,void 0,r===void 0?null:r)}function Vl(e,t,n,r){var s=hn();r=r===void 0?null:r;var o=void 0;if(ut!==null){var a=ut.memoizedState;if(o=a.destroy,r!==null&&Nf(r,a.deps)){s.memoizedState=Ai(t,n,o,r);return}}Je.flags|=e,s.memoizedState=Ai(1|t,n,o,r)}function Am(e,t){return Ua(8390656,8,e,t)}function Ef(e,t){return Vl(2048,8,e,t)}function ey(e,t){return Vl(4,2,e,t)}function ty(e,t){return Vl(4,4,e,t)}function ny(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ry(e,t,n){return n=n!=null?n.concat([e]):null,Vl(4,4,ny.bind(null,t,e),n)}function _f(){}function sy(e,t){var n=hn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function oy(e,t){var n=hn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function iy(e,t,n){return gs&21?(jn(n,t)||(n=dv(),Je.lanes|=n,vs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ut=!0),e.memoizedState=n)}function dk(e,t){var n=ze;ze=n!==0&&4>n?n:4,e(!0);var r=Qc.transition;Qc.transition={};try{e(!1),t()}finally{ze=n,Qc.transition=r}}function ay(){return hn().memoizedState}function fk(e,t,n){var r=$r(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ly(e))cy(t,n);else if(n=Wv(e,t,n,r),n!==null){var s=Pt();Nn(n,e,r,s),uy(n,t,r)}}function hk(e,t,n){var r=$r(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ly(e))cy(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,jn(l,a)){var c=t.interleaved;c===null?(s.next=s,xf(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Wv(e,t,s,r),n!==null&&(s=Pt(),Nn(n,e,r,s),uy(n,t,r))}}function ly(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function cy(e,t){ui=vl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function uy(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sf(e,n)}}var yl={readContext:fn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},mk={readContext:fn,useCallback:function(e,t){return Rn().memoizedState=[e,t===void 0?null:t],e},useContext:fn,useEffect:Am,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ua(4194308,4,ny.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var n=Rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=fk.bind(null,Je,e),[r.memoizedState,e]},useRef:function(e){var t=Rn();return e={current:e},t.memoizedState=e},useState:Pm,useDebugValue:_f,useDeferredValue:function(e){return Rn().memoizedState=e},useTransition:function(){var e=Pm(!1),t=e[0];return e=dk.bind(null,e[1]),Rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Je,s=Rn();if(Ye){if(n===void 0)throw Error(se(407));n=n()}else{if(n=t(),ht===null)throw Error(se(349));gs&30||Yv(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Am(Xv.bind(null,r,o,e),[e]),r.flags|=2048,Ai(9,qv.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Rn(),t=ht.identifierPrefix;if(Ye){var n=rr,r=nr;n=(r&~(1<<32-kn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ti++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=uk++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pk={readContext:fn,useCallback:sy,useContext:fn,useEffect:Ef,useImperativeHandle:ry,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:oy,useReducer:Zc,useRef:Jv,useState:function(){return Zc(Pi)},useDebugValue:_f,useDeferredValue:function(e){var t=hn();return iy(t,ut.memoizedState,e)},useTransition:function(){var e=Zc(Pi)[0],t=hn().memoizedState;return[e,t]},useMutableSource:Kv,useSyncExternalStore:Gv,useId:ay,unstable_isNewReconciler:!1},gk={readContext:fn,useCallback:sy,useContext:fn,useEffect:Ef,useImperativeHandle:ry,useInsertionEffect:ey,useLayoutEffect:ty,useMemo:oy,useReducer:Jc,useRef:Jv,useState:function(){return Jc(Pi)},useDebugValue:_f,useDeferredValue:function(e){var t=hn();return ut===null?t.memoizedState=e:iy(t,ut.memoizedState,e)},useTransition:function(){var e=Jc(Pi)[0],t=hn().memoizedState;return[e,t]},useMutableSource:Kv,useSyncExternalStore:Gv,useId:ay,unstable_isNewReconciler:!1};function yn(e,t){if(e&&e.defaultProps){t=et({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nd(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:et({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Hl={isMounted:function(e){return(e=e._reactInternals)?Ns(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=$r(e),o=sr(r,s);o.payload=t,n!=null&&(o.callback=n),t=Lr(e,o,s),t!==null&&(Nn(t,e,s,r),za(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=$r(e),o=sr(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Lr(e,o,s),t!==null&&(Nn(t,e,s,r),za(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),r=$r(e),s=sr(n,r);s.tag=2,t!=null&&(s.callback=t),t=Lr(e,s,r),t!==null&&(Nn(t,e,r,n),za(t,e,r))}};function Rm(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!ki(n,r)||!ki(s,o):!0}function dy(e,t,n){var r=!1,s=Vr,o=t.contextType;return typeof o=="object"&&o!==null?o=fn(o):(s=Vt(t)?ms:jt.current,r=t.contextTypes,o=(r=r!=null)?uo(e,s):Vr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Im(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hl.enqueueReplaceState(t,t.state,null)}function rd(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},wf(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=fn(o):(o=Vt(t)?ms:jt.current,s.context=uo(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(nd(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Hl.enqueueReplaceState(s,s.state,null),pl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function po(e,t){try{var n="",r=t;do n+=VS(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function eu(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function sd(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var vk=typeof WeakMap=="function"?WeakMap:Map;function fy(e,t,n){n=sr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wl||(wl=!0,md=r),sd(e,t)},n}function hy(e,t,n){n=sr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){sd(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){sd(e,t),typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Mm(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new vk;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ak.bind(null,e,t,n),t.then(e,e))}function Dm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Om(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=sr(-1,1),t.tag=2,Lr(n,t,1))),n.lanes|=1),e)}var yk=fr.ReactCurrentOwner,Ut=!1;function _t(e,t,n,r){t.child=e===null?Uv(t,null,n,r):ho(t,e.child,n,r)}function Lm(e,t,n,r,s){n=n.render;var o=t.ref;return qs(t,s),r=jf(e,t,n,r,o,s),n=Cf(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,cr(e,t,s)):(Ye&&n&&hf(t),t.flags|=1,_t(e,t,r,s),t.child)}function Fm(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Of(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,my(e,t,o,r,s)):(e=Ka(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:ki,n(a,r)&&e.ref===t.ref)return cr(e,t,s)}return t.flags|=1,e=zr(o,r),e.ref=t.ref,e.return=t,t.child=e}function my(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(ki(o,r)&&e.ref===t.ref)if(Ut=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Ut=!0);else return t.lanes=e.lanes,cr(e,t,s)}return od(e,t,n,r,s)}function py(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Vs,Yt),Yt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(Vs,Yt),Yt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,We(Vs,Yt),Yt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,We(Vs,Yt),Yt|=r;return _t(e,t,s,n),t.child}function gy(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function od(e,t,n,r,s){var o=Vt(n)?ms:jt.current;return o=uo(t,o),qs(t,s),n=jf(e,t,n,r,o,s),r=Cf(),e!==null&&!Ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,cr(e,t,s)):(Ye&&r&&hf(t),t.flags|=1,_t(e,t,n,s),t.child)}function $m(e,t,n,r,s){if(Vt(n)){var o=!0;ul(t)}else o=!1;if(qs(t,s),t.stateNode===null)Wa(e,t),dy(t,n,r),rd(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=fn(u):(u=Vt(n)?ms:jt.current,u=uo(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Im(t,a,r,u),br=!1;var g=t.memoizedState;a.state=g,pl(t,r,a,s),c=t.memoizedState,l!==r||g!==c||Wt.current||br?(typeof f=="function"&&(nd(t,n,f,r),c=t.memoizedState),(l=br||Rm(t,n,l,r,g,c,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Vv(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:yn(t.type,l),a.props=u,d=t.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=fn(c):(c=Vt(n)?ms:jt.current,c=uo(t,c));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==d||g!==c)&&Im(t,a,r,c),br=!1,g=t.memoizedState,a.state=g,pl(t,r,a,s);var w=t.memoizedState;l!==d||g!==w||Wt.current||br?(typeof v=="function"&&(nd(t,n,v,r),w=t.memoizedState),(u=br||Rm(t,n,u,r,g,w,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return id(e,t,n,r,o,s)}function id(e,t,n,r,s,o){gy(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Nm(t,n,!1),cr(e,t,o);r=t.stateNode,yk.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ho(t,e.child,null,o),t.child=ho(t,null,l,o)):_t(e,t,l,o),t.memoizedState=r.state,s&&Nm(t,n,!0),t.child}function vy(e){var t=e.stateNode;t.pendingContext?km(e,t.pendingContext,t.pendingContext!==t.context):t.context&&km(e,t.context,!1),bf(e,t.containerInfo)}function zm(e,t,n,r,s){return fo(),pf(s),t.flags|=256,_t(e,t,n,r),t.child}var ad={dehydrated:null,treeContext:null,retryLane:0};function ld(e){return{baseLanes:e,cachePool:null,transitions:null}}function yy(e,t,n){var r=t.pendingProps,s=Ze.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),We(Ze,s&1),e===null)return ed(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Yl(a,r,0,null),e=fs(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ld(n),t.memoizedState=ad,e):Tf(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return xk(e,t,a,r,l,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=zr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=zr(l,o):(o=fs(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?ld(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=ad,r}return o=e.child,e=o.sibling,r=zr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Tf(e,t){return t=Yl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xa(e,t,n,r){return r!==null&&pf(r),ho(t,e.child,null,n),e=Tf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xk(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=eu(Error(se(422))),xa(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Yl({mode:"visible",children:r.children},s,0,null),o=fs(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ho(t,e.child,null,a),t.child.memoizedState=ld(a),t.memoizedState=ad,o);if(!(t.mode&1))return xa(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(se(419)),r=eu(o,r,void 0),xa(e,t,a,r)}if(l=(a&e.childLanes)!==0,Ut||l){if(r=ht,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,lr(e,s),Nn(r,e,s,-1))}return Df(),r=eu(Error(se(421))),xa(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Rk.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Xt=Or(s.nextSibling),Qt=t,Ye=!0,Sn=null,e!==null&&(sn[on++]=nr,sn[on++]=rr,sn[on++]=ps,nr=e.id,rr=e.overflow,ps=t),t=Tf(t,r.children),t.flags|=4096,t)}function Bm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),td(e.return,t,n)}function tu(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function xy(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(_t(e,t,r.children,n),r=Ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bm(e,n,t);else if(e.tag===19)Bm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(We(Ze,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&gl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),tu(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&gl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}tu(t,!0,n,null,o);break;case"together":tu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,n=zr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function wk(e,t,n){switch(t.tag){case 3:vy(t),fo();break;case 5:Hv(t);break;case 1:Vt(t.type)&&ul(t);break;case 4:bf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;We(hl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(We(Ze,Ze.current&1),t.flags|=128,null):n&t.child.childLanes?yy(e,t,n):(We(Ze,Ze.current&1),e=cr(e,t,n),e!==null?e.sibling:null);We(Ze,Ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return xy(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),We(Ze,Ze.current),r)break;return null;case 22:case 23:return t.lanes=0,py(e,t,n)}return cr(e,t,n)}var wy,cd,by,Sy;wy=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cd=function(){};by=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ss(Un.current);var o=null;switch(n){case"input":s=Au(e,s),r=Au(e,r),o=[];break;case"select":s=et({},s,{value:void 0}),r=et({},r,{value:void 0}),o=[];break;case"textarea":s=Mu(e,s),r=Mu(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ll)}Ou(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gi.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&He("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Sy=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ho(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bk(e,t,n){var r=t.pendingProps;switch(mf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return Vt(t.type)&&cl(),St(t),null;case 3:return r=t.stateNode,mo(),Ke(Wt),Ke(jt),kf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(va(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Sn!==null&&(vd(Sn),Sn=null))),cd(e,t),St(t),null;case 5:Sf(t);var s=ss(_i.current);if(n=t.type,e!==null&&t.stateNode!=null)by(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(se(166));return St(t),null}if(e=ss(Un.current),va(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Fn]=t,r[Ci]=o,e=(t.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(s=0;s<ni.length;s++)He(ni[s],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":Xh(r,o),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},He("invalid",r);break;case"textarea":Zh(r,o),He("invalid",r)}Ou(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&ga(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&ga(r.textContent,l,e),s=["children",""+l]):gi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&He("scroll",r)}switch(n){case"input":la(r),Qh(r,o,!0);break;case"textarea":la(r),Jh(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ll)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xg(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Fn]=t,e[Ci]=r,wy(e,t,!1,!1),t.stateNode=e;e:{switch(a=Lu(n,r),n){case"dialog":He("cancel",e),He("close",e),s=r;break;case"iframe":case"object":case"embed":He("load",e),s=r;break;case"video":case"audio":for(s=0;s<ni.length;s++)He(ni[s],e);s=r;break;case"source":He("error",e),s=r;break;case"img":case"image":case"link":He("error",e),He("load",e),s=r;break;case"details":He("toggle",e),s=r;break;case"input":Xh(e,r),s=Au(e,r),He("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=et({},r,{value:void 0}),He("invalid",e);break;case"textarea":Zh(e,r),s=Mu(e,r),He("invalid",e);break;default:s=r}Ou(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Jg(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Qg(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&vi(e,c):typeof c=="number"&&vi(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(gi.hasOwnProperty(o)?c!=null&&o==="onScroll"&&He("scroll",e):c!=null&&Zd(e,o,c,a))}switch(n){case"input":la(e),Qh(e,r,!1);break;case"textarea":la(e),Jh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Wr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Hs(e,!!r.multiple,o,!1):r.defaultValue!=null&&Hs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ll)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)Sy(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(se(166));if(n=ss(_i.current),ss(Un.current),va(t)){if(r=t.stateNode,n=t.memoizedProps,r[Fn]=t,(o=r.nodeValue!==n)&&(e=Qt,e!==null))switch(e.tag){case 3:ga(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ga(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fn]=t,t.stateNode=r}return St(t),null;case 13:if(Ke(Ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&Xt!==null&&t.mode&1&&!(t.flags&128))zv(),fo(),t.flags|=98560,o=!1;else if(o=va(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(se(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(se(317));o[Fn]=t}else fo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),o=!1}else Sn!==null&&(vd(Sn),Sn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ze.current&1?dt===0&&(dt=3):Df())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return mo(),cd(e,t),e===null&&Ni(t.stateNode.containerInfo),St(t),null;case 10:return yf(t.type._context),St(t),null;case 17:return Vt(t.type)&&cl(),St(t),null;case 19:if(Ke(Ze),o=t.memoizedState,o===null)return St(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Ho(o,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=gl(e),a!==null){for(t.flags|=128,Ho(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return We(Ze,Ze.current&1|2),t.child}e=e.sibling}o.tail!==null&&ot()>go&&(t.flags|=128,r=!0,Ho(o,!1),t.lanes=4194304)}else{if(!r)if(e=gl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ho(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ye)return St(t),null}else 2*ot()-o.renderingStartTime>go&&n!==1073741824&&(t.flags|=128,r=!0,Ho(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ot(),t.sibling=null,n=Ze.current,We(Ze,r?n&1|2:n&1),t):(St(t),null);case 22:case 23:return Mf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yt&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function Sk(e,t){switch(mf(t),t.tag){case 1:return Vt(t.type)&&cl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mo(),Ke(Wt),Ke(jt),kf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sf(t),null;case 13:if(Ke(Ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));fo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ke(Ze),null;case 4:return mo(),null;case 10:return yf(t.type._context),null;case 22:case 23:return Mf(),null;case 24:return null;default:return null}}var wa=!1,Nt=!1,kk=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ws(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(e,t,r)}else n.current=null}function ud(e,t,n){try{n()}catch(r){nt(e,t,r)}}var Um=!1;function Nk(e,t){if(Gu=ol,e=Ev(),ff(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,f=0,d=e,g=null;t:for(;;){for(var v;d!==n||s!==0&&d.nodeType!==3||(l=a+s),d!==o||r!==0&&d.nodeType!==3||(c=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(v=d.firstChild)!==null;)g=d,d=v;for(;;){if(d===e)break t;if(g===n&&++u===s&&(l=a),g===o&&++f===r&&(c=a),(v=d.nextSibling)!==null)break;d=g,g=d.parentNode}d=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yu={focusedElem:e,selectionRange:n},ol=!1,he=t;he!==null;)if(t=he,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,he=e;else for(;he!==null;){t=he;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var p=w.memoizedProps,x=w.memoizedState,h=t.stateNode,y=h.getSnapshotBeforeUpdate(t.elementType===t.type?p:yn(t.type,p),x);h.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(j){nt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,he=e;break}he=t.return}return w=Um,Um=!1,w}function di(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&ud(t,n,o)}s=s.next}while(s!==r)}}function Kl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function dd(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ky(e){var t=e.alternate;t!==null&&(e.alternate=null,ky(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fn],delete t[Ci],delete t[Qu],delete t[ik],delete t[ak])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ny(e){return e.tag===5||e.tag===3||e.tag===4}function Wm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ny(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ll));else if(r!==4&&(e=e.child,e!==null))for(fd(e,t,n),e=e.sibling;e!==null;)fd(e,t,n),e=e.sibling}function hd(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hd(e,t,n),e=e.sibling;e!==null;)hd(e,t,n),e=e.sibling}var pt=null,bn=!1;function pr(e,t,n){for(n=n.child;n!==null;)jy(e,t,n),n=n.sibling}function jy(e,t,n){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Fl,n)}catch{}switch(n.tag){case 5:Nt||Ws(n,t);case 6:var r=pt,s=bn;pt=null,pr(e,t,n),pt=r,bn=s,pt!==null&&(bn?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(bn?(e=pt,n=n.stateNode,e.nodeType===8?Yc(e.parentNode,n):e.nodeType===1&&Yc(e,n),bi(e)):Yc(pt,n.stateNode));break;case 4:r=pt,s=bn,pt=n.stateNode.containerInfo,bn=!0,pr(e,t,n),pt=r,bn=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ud(n,t,a),s=s.next}while(s!==r)}pr(e,t,n);break;case 1:if(!Nt&&(Ws(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){nt(n,t,l)}pr(e,t,n);break;case 21:pr(e,t,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,pr(e,t,n),Nt=r):pr(e,t,n);break;default:pr(e,t,n)}}function Vm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new kk),t.forEach(function(r){var s=Ik.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:pt=l.stateNode,bn=!1;break e;case 3:pt=l.stateNode.containerInfo,bn=!0;break e;case 4:pt=l.stateNode.containerInfo,bn=!0;break e}l=l.return}if(pt===null)throw Error(se(160));jy(o,a,s),pt=null,bn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){nt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cy(t,e),t=t.sibling}function Cy(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gn(t,e),An(e),r&4){try{di(3,e,e.return),Kl(3,e)}catch(p){nt(e,e.return,p)}try{di(5,e,e.return)}catch(p){nt(e,e.return,p)}}break;case 1:gn(t,e),An(e),r&512&&n!==null&&Ws(n,n.return);break;case 5:if(gn(t,e),An(e),r&512&&n!==null&&Ws(n,n.return),e.flags&32){var s=e.stateNode;try{vi(s,"")}catch(p){nt(e,e.return,p)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Yg(s,o),Lu(l,a);var u=Lu(l,o);for(a=0;a<c.length;a+=2){var f=c[a],d=c[a+1];f==="style"?Jg(s,d):f==="dangerouslySetInnerHTML"?Qg(s,d):f==="children"?vi(s,d):Zd(s,f,d,u)}switch(l){case"input":Ru(s,o);break;case"textarea":qg(s,o);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Hs(s,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?Hs(s,!!o.multiple,o.defaultValue,!0):Hs(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ci]=o}catch(p){nt(e,e.return,p)}}break;case 6:if(gn(t,e),An(e),r&4){if(e.stateNode===null)throw Error(se(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(p){nt(e,e.return,p)}}break;case 3:if(gn(t,e),An(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bi(t.containerInfo)}catch(p){nt(e,e.return,p)}break;case 4:gn(t,e),An(e);break;case 13:gn(t,e),An(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Rf=ot())),r&4&&Vm(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Nt=(u=Nt)||f,gn(t,e),Nt=u):gn(t,e),An(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(he=e,f=e.child;f!==null;){for(d=he=f;he!==null;){switch(g=he,v=g.child,g.tag){case 0:case 11:case 14:case 15:di(4,g,g.return);break;case 1:Ws(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(p){nt(r,n,p)}}break;case 5:Ws(g,g.return);break;case 22:if(g.memoizedState!==null){Km(d);continue}}v!==null?(v.return=g,he=v):Km(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Zg("display",a))}catch(p){nt(e,e.return,p)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){nt(e,e.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gn(t,e),An(e),r&4&&Vm(e);break;case 21:break;default:gn(t,e),An(e)}}function An(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Ny(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vi(s,""),r.flags&=-33);var o=Wm(e);hd(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Wm(e);fd(e,l,a);break;default:throw Error(se(161))}}catch(c){nt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jk(e,t,n){he=e,Ey(e)}function Ey(e,t,n){for(var r=(e.mode&1)!==0;he!==null;){var s=he,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||wa;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Nt;l=wa;var u=Nt;if(wa=a,(Nt=c)&&!u)for(he=s;he!==null;)a=he,c=a.child,a.tag===22&&a.memoizedState!==null?Gm(s):c!==null?(c.return=a,he=c):Gm(s);for(;o!==null;)he=o,Ey(o),o=o.sibling;he=s,wa=l,Nt=u}Hm(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,he=o):Hm(e)}}function Hm(e){for(;he!==null;){var t=he;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nt||Kl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:yn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Tm(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Tm(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&bi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Nt||t.flags&512&&dd(t)}catch(g){nt(t,t.return,g)}}if(t===e){he=null;break}if(n=t.sibling,n!==null){n.return=t.return,he=n;break}he=t.return}}function Km(e){for(;he!==null;){var t=he;if(t===e){he=null;break}var n=t.sibling;if(n!==null){n.return=t.return,he=n;break}he=t.return}}function Gm(e){for(;he!==null;){var t=he;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Kl(4,t)}catch(c){nt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){nt(t,s,c)}}var o=t.return;try{dd(t)}catch(c){nt(t,o,c)}break;case 5:var a=t.return;try{dd(t)}catch(c){nt(t,a,c)}}}catch(c){nt(t,t.return,c)}if(t===e){he=null;break}var l=t.sibling;if(l!==null){l.return=t.return,he=l;break}he=t.return}}var Ck=Math.ceil,xl=fr.ReactCurrentDispatcher,Pf=fr.ReactCurrentOwner,un=fr.ReactCurrentBatchConfig,De=0,ht=null,ct=null,gt=0,Yt=0,Vs=qr(0),dt=0,Ri=null,vs=0,Gl=0,Af=0,fi=null,$t=null,Rf=0,go=1/0,Qn=null,wl=!1,md=null,Fr=null,ba=!1,Pr=null,bl=0,hi=0,pd=null,Va=-1,Ha=0;function Pt(){return De&6?ot():Va!==-1?Va:Va=ot()}function $r(e){return e.mode&1?De&2&&gt!==0?gt&-gt:ck.transition!==null?(Ha===0&&(Ha=dv()),Ha):(e=ze,e!==0||(e=window.event,e=e===void 0?16:yv(e.type)),e):1}function Nn(e,t,n,r){if(50<hi)throw hi=0,pd=null,Error(se(185));Ui(e,n,r),(!(De&2)||e!==ht)&&(e===ht&&(!(De&2)&&(Gl|=n),dt===4&&kr(e,gt)),Ht(e,r),n===1&&De===0&&!(t.mode&1)&&(go=ot()+500,Wl&&Xr()))}function Ht(e,t){var n=e.callbackNode;c2(e,t);var r=sl(e,e===ht?gt:0);if(r===0)n!==null&&nm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nm(n),t===1)e.tag===0?lk(Ym.bind(null,e)):Lv(Ym.bind(null,e)),sk(function(){!(De&6)&&Xr()}),n=null;else{switch(fv(r)){case 1:n=rf;break;case 4:n=cv;break;case 16:n=rl;break;case 536870912:n=uv;break;default:n=rl}n=Dy(n,_y.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _y(e,t){if(Va=-1,Ha=0,De&6)throw Error(se(327));var n=e.callbackNode;if(Xs()&&e.callbackNode!==n)return null;var r=sl(e,e===ht?gt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Sl(e,r);else{t=r;var s=De;De|=2;var o=Py();(ht!==e||gt!==t)&&(Qn=null,go=ot()+500,ds(e,t));do try{Tk();break}catch(l){Ty(e,l)}while(!0);vf(),xl.current=o,De=s,ct!==null?t=0:(ht=null,gt=0,t=dt)}if(t!==0){if(t===2&&(s=Uu(e),s!==0&&(r=s,t=gd(e,s))),t===1)throw n=Ri,ds(e,0),kr(e,r),Ht(e,ot()),n;if(t===6)kr(e,r);else{if(s=e.current.alternate,!(r&30)&&!Ek(s)&&(t=Sl(e,r),t===2&&(o=Uu(e),o!==0&&(r=o,t=gd(e,o))),t===1))throw n=Ri,ds(e,0),kr(e,r),Ht(e,ot()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(se(345));case 2:es(e,$t,Qn);break;case 3:if(kr(e,r),(r&130023424)===r&&(t=Rf+500-ot(),10<t)){if(sl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Xu(es.bind(null,e,$t,Qn),t);break}es(e,$t,Qn);break;case 4:if(kr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-kn(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ck(r/1960))-r,10<r){e.timeoutHandle=Xu(es.bind(null,e,$t,Qn),r);break}es(e,$t,Qn);break;case 5:es(e,$t,Qn);break;default:throw Error(se(329))}}}return Ht(e,ot()),e.callbackNode===n?_y.bind(null,e):null}function gd(e,t){var n=fi;return e.current.memoizedState.isDehydrated&&(ds(e,t).flags|=256),e=Sl(e,t),e!==2&&(t=$t,$t=n,t!==null&&vd(t)),e}function vd(e){$t===null?$t=e:$t.push.apply($t,e)}function Ek(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!jn(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kr(e,t){for(t&=~Af,t&=~Gl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-kn(t),r=1<<n;e[n]=-1,t&=~r}}function Ym(e){if(De&6)throw Error(se(327));Xs();var t=sl(e,0);if(!(t&1))return Ht(e,ot()),null;var n=Sl(e,t);if(e.tag!==0&&n===2){var r=Uu(e);r!==0&&(t=r,n=gd(e,r))}if(n===1)throw n=Ri,ds(e,0),kr(e,t),Ht(e,ot()),n;if(n===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,es(e,$t,Qn),Ht(e,ot()),null}function If(e,t){var n=De;De|=1;try{return e(t)}finally{De=n,De===0&&(go=ot()+500,Wl&&Xr())}}function ys(e){Pr!==null&&Pr.tag===0&&!(De&6)&&Xs();var t=De;De|=1;var n=un.transition,r=ze;try{if(un.transition=null,ze=1,e)return e()}finally{ze=r,un.transition=n,De=t,!(De&6)&&Xr()}}function Mf(){Yt=Vs.current,Ke(Vs)}function ds(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,rk(n)),ct!==null)for(n=ct.return;n!==null;){var r=n;switch(mf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cl();break;case 3:mo(),Ke(Wt),Ke(jt),kf();break;case 5:Sf(r);break;case 4:mo();break;case 13:Ke(Ze);break;case 19:Ke(Ze);break;case 10:yf(r.type._context);break;case 22:case 23:Mf()}n=n.return}if(ht=e,ct=e=zr(e.current,null),gt=Yt=t,dt=0,Ri=null,Af=Gl=vs=0,$t=fi=null,rs!==null){for(t=0;t<rs.length;t++)if(n=rs[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}rs=null}return e}function Ty(e,t){do{var n=ct;try{if(vf(),Ba.current=yl,vl){for(var r=Je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vl=!1}if(gs=0,ft=ut=Je=null,ui=!1,Ti=0,Pf.current=null,n===null||n.return===null){dt=1,Ri=t,ct=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=gt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=Dm(a);if(v!==null){v.flags&=-257,Om(v,a,l,o,t),v.mode&1&&Mm(o,u,t),t=v,c=u;var w=t.updateQueue;if(w===null){var p=new Set;p.add(c),t.updateQueue=p}else w.add(c);break e}else{if(!(t&1)){Mm(o,u,t),Df();break e}c=Error(se(426))}}else if(Ye&&l.mode&1){var x=Dm(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Om(x,a,l,o,t),pf(po(c,l));break e}}o=c=po(c,l),dt!==4&&(dt=2),fi===null?fi=[o]:fi.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var h=fy(o,c,t);_m(o,h);break e;case 1:l=c;var y=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Fr===null||!Fr.has(S)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=hy(o,l,t);_m(o,j);break e}}o=o.return}while(o!==null)}Ry(n)}catch(N){t=N,ct===n&&n!==null&&(ct=n=n.return);continue}break}while(!0)}function Py(){var e=xl.current;return xl.current=yl,e===null?yl:e}function Df(){(dt===0||dt===3||dt===2)&&(dt=4),ht===null||!(vs&268435455)&&!(Gl&268435455)||kr(ht,gt)}function Sl(e,t){var n=De;De|=2;var r=Py();(ht!==e||gt!==t)&&(Qn=null,ds(e,t));do try{_k();break}catch(s){Ty(e,s)}while(!0);if(vf(),De=n,xl.current=r,ct!==null)throw Error(se(261));return ht=null,gt=0,dt}function _k(){for(;ct!==null;)Ay(ct)}function Tk(){for(;ct!==null&&!e2();)Ay(ct)}function Ay(e){var t=My(e.alternate,e,Yt);e.memoizedProps=e.pendingProps,t===null?Ry(e):ct=t,Pf.current=null}function Ry(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Sk(n,t),n!==null){n.flags&=32767,ct=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,ct=null;return}}else if(n=bk(n,t,Yt),n!==null){ct=n;return}if(t=t.sibling,t!==null){ct=t;return}ct=t=e}while(t!==null);dt===0&&(dt=5)}function es(e,t,n){var r=ze,s=un.transition;try{un.transition=null,ze=1,Pk(e,t,n,r)}finally{un.transition=s,ze=r}return null}function Pk(e,t,n,r){do Xs();while(Pr!==null);if(De&6)throw Error(se(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(u2(e,o),e===ht&&(ct=ht=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ba||(ba=!0,Dy(rl,function(){return Xs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=un.transition,un.transition=null;var a=ze;ze=1;var l=De;De|=4,Pf.current=null,Nk(e,n),Cy(n,e),X2(Yu),ol=!!Gu,Yu=Gu=null,e.current=n,jk(n),t2(),De=l,ze=a,un.transition=o}else e.current=n;if(ba&&(ba=!1,Pr=e,bl=s),o=e.pendingLanes,o===0&&(Fr=null),s2(n.stateNode),Ht(e,ot()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(wl)throw wl=!1,e=md,md=null,e;return bl&1&&e.tag!==0&&Xs(),o=e.pendingLanes,o&1?e===pd?hi++:(hi=0,pd=e):hi=0,Xr(),null}function Xs(){if(Pr!==null){var e=fv(bl),t=un.transition,n=ze;try{if(un.transition=null,ze=16>e?16:e,Pr===null)var r=!1;else{if(e=Pr,Pr=null,bl=0,De&6)throw Error(se(331));var s=De;for(De|=4,he=e.current;he!==null;){var o=he,a=o.child;if(he.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(he=u;he!==null;){var f=he;switch(f.tag){case 0:case 11:case 15:di(8,f,o)}var d=f.child;if(d!==null)d.return=f,he=d;else for(;he!==null;){f=he;var g=f.sibling,v=f.return;if(ky(f),f===u){he=null;break}if(g!==null){g.return=v,he=g;break}he=v}}}var w=o.alternate;if(w!==null){var p=w.child;if(p!==null){w.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(p!==null)}}he=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,he=a;else e:for(;he!==null;){if(o=he,o.flags&2048)switch(o.tag){case 0:case 11:case 15:di(9,o,o.return)}var h=o.sibling;if(h!==null){h.return=o.return,he=h;break e}he=o.return}}var y=e.current;for(he=y;he!==null;){a=he;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,he=S;else e:for(a=y;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Kl(9,l)}}catch(N){nt(l,l.return,N)}if(l===a){he=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,he=j;break e}he=l.return}}if(De=s,Xr(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Fl,e)}catch{}r=!0}return r}finally{ze=n,un.transition=t}}return!1}function qm(e,t,n){t=po(n,t),t=fy(e,t,1),e=Lr(e,t,1),t=Pt(),e!==null&&(Ui(e,1,t),Ht(e,t))}function nt(e,t,n){if(e.tag===3)qm(e,e,n);else for(;t!==null;){if(t.tag===3){qm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){e=po(n,e),e=hy(t,e,1),t=Lr(t,e,1),e=Pt(),t!==null&&(Ui(t,1,e),Ht(t,e));break}}t=t.return}}function Ak(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pt(),e.pingedLanes|=e.suspendedLanes&n,ht===e&&(gt&n)===n&&(dt===4||dt===3&&(gt&130023424)===gt&&500>ot()-Rf?ds(e,0):Af|=n),Ht(e,t)}function Iy(e,t){t===0&&(e.mode&1?(t=da,da<<=1,!(da&130023424)&&(da=4194304)):t=1);var n=Pt();e=lr(e,t),e!==null&&(Ui(e,t,n),Ht(e,n))}function Rk(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Iy(e,n)}function Ik(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(t),Iy(e,n)}var My;My=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wt.current)Ut=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ut=!1,wk(e,t,n);Ut=!!(e.flags&131072)}else Ut=!1,Ye&&t.flags&1048576&&Fv(t,fl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var s=uo(t,jt.current);qs(t,n),s=jf(null,t,r,e,s,n);var o=Cf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vt(r)?(o=!0,ul(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wf(t),s.updater=Hl,t.stateNode=s,s._reactInternals=t,rd(t,r,e,n),t=id(null,t,r,!0,o,n)):(t.tag=0,Ye&&o&&hf(t),_t(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Dk(r),e=yn(r,e),s){case 0:t=od(null,t,r,e,n);break e;case 1:t=$m(null,t,r,e,n);break e;case 11:t=Lm(null,t,r,e,n);break e;case 14:t=Fm(null,t,r,yn(r.type,e),n);break e}throw Error(se(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yn(r,s),od(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yn(r,s),$m(e,t,r,s,n);case 3:e:{if(vy(t),e===null)throw Error(se(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Vv(e,t),pl(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=po(Error(se(423)),t),t=zm(e,t,r,n,s);break e}else if(r!==s){s=po(Error(se(424)),t),t=zm(e,t,r,n,s);break e}else for(Xt=Or(t.stateNode.containerInfo.firstChild),Qt=t,Ye=!0,Sn=null,n=Uv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fo(),r===s){t=cr(e,t,n);break e}_t(e,t,r,n)}t=t.child}return t;case 5:return Hv(t),e===null&&ed(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,qu(r,s)?a=null:o!==null&&qu(r,o)&&(t.flags|=32),gy(e,t),_t(e,t,a,n),t.child;case 6:return e===null&&ed(t),null;case 13:return yy(e,t,n);case 4:return bf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ho(t,null,r,n):_t(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yn(r,s),Lm(e,t,r,s,n);case 7:return _t(e,t,t.pendingProps,n),t.child;case 8:return _t(e,t,t.pendingProps.children,n),t.child;case 12:return _t(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,We(hl,r._currentValue),r._currentValue=a,o!==null)if(jn(o.value,a)){if(o.children===s.children&&!Wt.current){t=cr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=sr(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),td(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(se(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),td(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}_t(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,qs(t,n),s=fn(s),r=r(s),t.flags|=1,_t(e,t,r,n),t.child;case 14:return r=t.type,s=yn(r,t.pendingProps),s=yn(r.type,s),Fm(e,t,r,s,n);case 15:return my(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yn(r,s),Wa(e,t),t.tag=1,Vt(r)?(e=!0,ul(t)):e=!1,qs(t,n),dy(t,r,s),rd(t,r,s,n),id(null,t,r,!0,e,n);case 19:return xy(e,t,n);case 22:return py(e,t,n)}throw Error(se(156,t.tag))};function Dy(e,t){return lv(e,t)}function Mk(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(e,t,n,r){return new Mk(e,t,n,r)}function Of(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Dk(e){if(typeof e=="function")return Of(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ef)return 11;if(e===tf)return 14}return 2}function zr(e,t){var n=e.alternate;return n===null?(n=an(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ka(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Of(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ms:return fs(n.children,s,o,t);case Jd:a=8,s|=8;break;case Eu:return e=an(12,n,t,s|2),e.elementType=Eu,e.lanes=o,e;case _u:return e=an(13,n,t,s),e.elementType=_u,e.lanes=o,e;case Tu:return e=an(19,n,t,s),e.elementType=Tu,e.lanes=o,e;case Hg:return Yl(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wg:a=10;break e;case Vg:a=9;break e;case ef:a=11;break e;case tf:a=14;break e;case wr:a=16,r=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=an(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function fs(e,t,n,r){return e=an(7,e,r,t),e.lanes=n,e}function Yl(e,t,n,r){return e=an(22,e,r,t),e.elementType=Hg,e.lanes=n,e.stateNode={isHidden:!1},e}function nu(e,t,n){return e=an(6,e,null,t),e.lanes=n,e}function ru(e,t,n){return t=an(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ok(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lc(0),this.expirationTimes=Lc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lf(e,t,n,r,s,o,a,l,c){return e=new Ok(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=an(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wf(o),e}function Lk(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Is,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Oy(e){if(!e)return Vr;e=e._reactInternals;e:{if(Ns(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var n=e.type;if(Vt(n))return Ov(e,n,t)}return t}function Ly(e,t,n,r,s,o,a,l,c){return e=Lf(n,r,!0,e,s,o,a,l,c),e.context=Oy(null),n=e.current,r=Pt(),s=$r(n),o=sr(r,s),o.callback=t??null,Lr(n,o,s),e.current.lanes=s,Ui(e,s,r),Ht(e,r),e}function ql(e,t,n,r){var s=t.current,o=Pt(),a=$r(s);return n=Oy(n),t.context===null?t.context=n:t.pendingContext=n,t=sr(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Lr(s,t,a),e!==null&&(Nn(e,s,a,o),za(e,s,a)),a}function kl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ff(e,t){Xm(e,t),(e=e.alternate)&&Xm(e,t)}function Fk(){return null}var Fy=typeof reportError=="function"?reportError:function(e){console.error(e)};function $f(e){this._internalRoot=e}Xl.prototype.render=$f.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));ql(e,t,null,null)};Xl.prototype.unmount=$f.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ys(function(){ql(null,e,null,null)}),t[ar]=null}};function Xl(e){this._internalRoot=e}Xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=pv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sr.length&&t!==0&&t<Sr[n].priority;n++);Sr.splice(n,0,e),n===0&&vv(e)}};function zf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ql(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qm(){}function $k(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=kl(a);o.call(u)}}var a=Ly(t,r,e,0,null,!1,!1,"",Qm);return e._reactRootContainer=a,e[ar]=a.current,Ni(e.nodeType===8?e.parentNode:e),ys(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=kl(c);l.call(u)}}var c=Lf(e,0,!1,null,null,!1,!1,"",Qm);return e._reactRootContainer=c,e[ar]=c.current,Ni(e.nodeType===8?e.parentNode:e),ys(function(){ql(t,c,n,r)}),c}function Zl(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=kl(a);l.call(c)}}ql(t,a,e,s)}else a=$k(n,t,e,s,r);return kl(a)}hv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ti(t.pendingLanes);n!==0&&(sf(t,n|1),Ht(t,ot()),!(De&6)&&(go=ot()+500,Xr()))}break;case 13:ys(function(){var r=lr(e,1);if(r!==null){var s=Pt();Nn(r,e,1,s)}}),Ff(e,1)}};of=function(e){if(e.tag===13){var t=lr(e,134217728);if(t!==null){var n=Pt();Nn(t,e,134217728,n)}Ff(e,134217728)}};mv=function(e){if(e.tag===13){var t=$r(e),n=lr(e,t);if(n!==null){var r=Pt();Nn(n,e,t,r)}Ff(e,t)}};pv=function(){return ze};gv=function(e,t){var n=ze;try{return ze=e,t()}finally{ze=n}};$u=function(e,t,n){switch(t){case"input":if(Ru(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ul(r);if(!s)throw Error(se(90));Gg(r),Ru(r,s)}}}break;case"textarea":qg(e,n);break;case"select":t=n.value,t!=null&&Hs(e,!!n.multiple,t,!1)}};nv=If;rv=ys;var zk={usingClientEntryPoint:!1,Events:[Vi,Fs,Ul,ev,tv,If]},Ko={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bk={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iv(e),e===null?null:e.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||Fk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sa.isDisabled&&Sa.supportsFiber)try{Fl=Sa.inject(Bk),Bn=Sa}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zk;en.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zf(t))throw Error(se(200));return Lk(e,t,null,n)};en.createRoot=function(e,t){if(!zf(e))throw Error(se(299));var n=!1,r="",s=Fy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Lf(e,1,!1,null,null,n,!1,r,s),e[ar]=t.current,Ni(e.nodeType===8?e.parentNode:e),new $f(t)};en.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=iv(t),e=e===null?null:e.stateNode,e};en.flushSync=function(e){return ys(e)};en.hydrate=function(e,t,n){if(!Ql(t))throw Error(se(200));return Zl(null,e,t,!0,n)};en.hydrateRoot=function(e,t,n){if(!zf(e))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=Fy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Ly(t,null,e,1,n??null,s,!1,o,a),e[ar]=t.current,Ni(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xl(t)};en.render=function(e,t,n){if(!Ql(t))throw Error(se(200));return Zl(null,e,t,!1,n)};en.unmountComponentAtNode=function(e){if(!Ql(e))throw Error(se(40));return e._reactRootContainer?(ys(function(){Zl(null,null,e,!1,function(){e._reactRootContainer=null,e[ar]=null})}),!0):!1};en.unstable_batchedUpdates=If;en.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ql(n))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return Zl(e,t,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function $y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($y)}catch(e){console.error(e)}}$y(),$g.exports=en;var Ki=$g.exports;const Uk=Ol(Ki);var zy,Zm=Ki;zy=Zm.createRoot,Zm.hydrateRoot;var Jl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ec=typeof window>"u"||"Deno"in globalThis;function xn(){}function Wk(e,t){return typeof e=="function"?e(t):e}function Vk(e){return typeof e=="number"&&e>=0&&e!==1/0}function Hk(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Jm(e,t){return typeof e=="function"?e(t):e}function Kk(e,t){return typeof e=="function"?e(t):e}function ep(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:a,stale:l}=e;if(a){if(r){if(t.queryHash!==Bf(a,t.options))return!1}else if(!Mi(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||o&&!o(t))}function tp(e,t){const{exact:n,status:r,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(Ii(t.options.mutationKey)!==Ii(o))return!1}else if(!Mi(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Bf(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ii)(e)}function Ii(e){return JSON.stringify(e,(t,n)=>yd(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Mi(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Mi(e[n],t[n])):!1}function By(e,t){if(e===t)return e;const n=np(e)&&np(t);if(n||yd(e)&&yd(t)){const r=n?e:Object.keys(e),s=r.length,o=n?t:Object.keys(t),a=o.length,l=n?[]:{};let c=0;for(let u=0;u<a;u++){const f=n?u:o[u];(!n&&r.includes(f)||n)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,c++):(l[f]=By(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&c++)}return s===a&&c===s?e:l}return t}function np(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function yd(e){if(!rp(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!rp(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function rp(e){return Object.prototype.toString.call(e)==="[object Object]"}function Gk(e){return new Promise(t=>{setTimeout(t,e)})}function Yk(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?By(e,t):t}function qk(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Xk(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Uf=Symbol();function Uy(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Uf?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var as,Nr,eo,wg,Qk=(wg=class extends Jl{constructor(){super();$e(this,as);$e(this,Nr);$e(this,eo);Ae(this,eo,t=>{if(!ec&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,Nr)||this.setEventListener(J(this,eo))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,Nr))==null||t.call(this),Ae(this,Nr,void 0))}setEventListener(t){var n;Ae(this,eo,t),(n=J(this,Nr))==null||n.call(this),Ae(this,Nr,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){J(this,as)!==t&&(Ae(this,as,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof J(this,as)=="boolean"?J(this,as):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},as=new WeakMap,Nr=new WeakMap,eo=new WeakMap,wg),Wy=new Qk,to,jr,no,bg,Zk=(bg=class extends Jl{constructor(){super();$e(this,to,!0);$e(this,jr);$e(this,no);Ae(this,no,t=>{if(!ec&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,jr)||this.setEventListener(J(this,no))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,jr))==null||t.call(this),Ae(this,jr,void 0))}setEventListener(t){var n;Ae(this,no,t),(n=J(this,jr))==null||n.call(this),Ae(this,jr,t(this.setOnline.bind(this)))}setOnline(t){J(this,to)!==t&&(Ae(this,to,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return J(this,to)}},to=new WeakMap,jr=new WeakMap,no=new WeakMap,bg),Nl=new Zk;function Jk(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function eN(e){return Math.min(1e3*2**e,3e4)}function Vy(e){return(e??"online")==="online"?Nl.isOnline():!0}var Hy=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function su(e){return e instanceof Hy}function Ky(e){let t=!1,n=0,r=!1,s;const o=Jk(),a=p=>{var x;r||(g(new Hy(p)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Wy.isFocused()&&(e.networkMode==="always"||Nl.isOnline())&&e.canRun(),f=()=>Vy(e.networkMode)&&e.canRun(),d=p=>{var x;r||(r=!0,(x=e.onSuccess)==null||x.call(e,p),s==null||s(),o.resolve(p))},g=p=>{var x;r||(r=!0,(x=e.onError)==null||x.call(e,p),s==null||s(),o.reject(p))},v=()=>new Promise(p=>{var x;s=h=>{(r||u())&&p(h)},(x=e.onPause)==null||x.call(e)}).then(()=>{var p;s=void 0,r||(p=e.onContinue)==null||p.call(e)}),w=()=>{if(r)return;let p;const x=n===0?e.initialPromise:void 0;try{p=x??e.fn()}catch(h){p=Promise.reject(h)}Promise.resolve(p).then(d).catch(h=>{var C;if(r)return;const y=e.retry??(ec?0:3),S=e.retryDelay??eN,j=typeof S=="function"?S(n,h):S,N=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,h);if(t||!N){g(h);return}n++,(C=e.onFail)==null||C.call(e,n,h),Gk(j).then(()=>u()?void 0:v()).then(()=>{t?g(h):w()})})};return{promise:o,cancel:a,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?w():v().then(w),o)}}function tN(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const o=l=>{t?e.push(l):s(()=>{n(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Tt=tN(),ls,Sg,Gy=(Sg=class{constructor(){$e(this,ls)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vk(this.gcTime)&&Ae(this,ls,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ec?1/0:5*60*1e3))}clearGcTimeout(){J(this,ls)&&(clearTimeout(J(this,ls)),Ae(this,ls,void 0))}},ls=new WeakMap,Sg),ro,so,rn,kt,$i,cs,wn,Xn,kg,nN=(kg=class extends Gy{constructor(t){super();$e(this,wn);$e(this,ro);$e(this,so);$e(this,rn);$e(this,kt);$e(this,$i);$e(this,cs);Ae(this,cs,!1),Ae(this,$i,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ae(this,rn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ae(this,ro,sN(this.options)),this.state=t.state??J(this,ro),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=J(this,kt))==null?void 0:t.promise}setOptions(t){this.options={...J(this,$i),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,rn).remove(this)}setData(t,n){const r=Yk(this.state.data,t,this.options);return wt(this,wn,Xn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){wt(this,wn,Xn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=J(this,kt))==null?void 0:r.promise;return(s=J(this,kt))==null||s.cancel(t),n?n.then(xn).catch(xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,ro))}isActive(){return this.observers.some(t=>Kk(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Uf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!Hk(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,kt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,kt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),J(this,rn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(J(this,kt)&&(J(this,cs)?J(this,kt).cancel({revert:!0}):J(this,kt).cancelRetry()),this.scheduleGc()),J(this,rn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||wt(this,wn,Xn).call(this,{type:"invalidate"})}fetch(t,n){var c,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,kt))return J(this,kt).continueRetry(),J(this,kt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(g=>g.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,s=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(Ae(this,cs,!0),r.signal)})},o=()=>{const d=Uy(this.options,n),g={queryKey:this.queryKey,meta:this.meta};return s(g),Ae(this,cs,!1),this.options.persister?this.options.persister(d,g,this):d(g)},a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),Ae(this,so,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&wt(this,wn,Xn).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=d=>{var g,v,w,p;su(d)&&d.silent||wt(this,wn,Xn).call(this,{type:"error",error:d}),su(d)||((v=(g=J(this,rn).config).onError)==null||v.call(g,d,this),(p=(w=J(this,rn).config).onSettled)==null||p.call(w,this.state.data,d,this)),this.scheduleGc()};return Ae(this,kt,Ky({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var g,v,w,p;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(x){l(x);return}(v=(g=J(this,rn).config).onSuccess)==null||v.call(g,d,this),(p=(w=J(this,rn).config).onSettled)==null||p.call(w,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,g)=>{wt(this,wn,Xn).call(this,{type:"failed",failureCount:d,error:g})},onPause:()=>{wt(this,wn,Xn).call(this,{type:"pause"})},onContinue:()=>{wt(this,wn,Xn).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),J(this,kt).start()}},ro=new WeakMap,so=new WeakMap,rn=new WeakMap,kt=new WeakMap,$i=new WeakMap,cs=new WeakMap,wn=new WeakSet,Xn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...rN(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return su(s)&&s.revert&&J(this,so)?{...J(this,so),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Tt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),J(this,rn).notify({query:this,type:"updated",action:t})})},kg);function rN(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Vy(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function sN(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var In,Ng,oN=(Ng=class extends Jl{constructor(t={}){super();$e(this,In);this.config=t,Ae(this,In,new Map)}build(t,n,r){const s=n.queryKey,o=n.queryHash??Bf(s,n);let a=this.get(o);return a||(a=new nN({cache:this,queryKey:s,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){J(this,In).has(t.queryHash)||(J(this,In).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=J(this,In).get(t.queryHash);n&&(t.destroy(),n===t&&J(this,In).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return J(this,In).get(t)}getAll(){return[...J(this,In).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>ep(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>ep(t,r)):n}notify(t){Tt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Tt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},In=new WeakMap,Ng),Mn,Et,us,Dn,yr,jg,iN=(jg=class extends Gy{constructor(t){super();$e(this,Dn);$e(this,Mn);$e(this,Et);$e(this,us);this.mutationId=t.mutationId,Ae(this,Et,t.mutationCache),Ae(this,Mn,[]),this.state=t.state||aN(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){J(this,Mn).includes(t)||(J(this,Mn).push(t),this.clearGcTimeout(),J(this,Et).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ae(this,Mn,J(this,Mn).filter(n=>n!==t)),this.scheduleGc(),J(this,Et).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){J(this,Mn).length||(this.state.status==="pending"?this.scheduleGc():J(this,Et).remove(this))}continue(){var t;return((t=J(this,us))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,a,l,c,u,f,d,g,v,w,p,x,h,y,S,j,N,C,P;Ae(this,us,Ky({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(T,M)=>{wt(this,Dn,yr).call(this,{type:"failed",failureCount:T,error:M})},onPause:()=>{wt(this,Dn,yr).call(this,{type:"pause"})},onContinue:()=>{wt(this,Dn,yr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,Et).canRun(this)}));const n=this.state.status==="pending",r=!J(this,us).canStart();try{if(!n){wt(this,Dn,yr).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(s=J(this,Et).config).onMutate)==null?void 0:o.call(s,t,this));const M=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));M!==this.state.context&&wt(this,Dn,yr).call(this,{type:"pending",context:M,variables:t,isPaused:r})}const T=await J(this,us).start();return await((u=(c=J(this,Et).config).onSuccess)==null?void 0:u.call(c,T,t,this.state.context,this)),await((d=(f=this.options).onSuccess)==null?void 0:d.call(f,T,t,this.state.context)),await((v=(g=J(this,Et).config).onSettled)==null?void 0:v.call(g,T,null,this.state.variables,this.state.context,this)),await((p=(w=this.options).onSettled)==null?void 0:p.call(w,T,null,t,this.state.context)),wt(this,Dn,yr).call(this,{type:"success",data:T}),T}catch(T){try{throw await((h=(x=J(this,Et).config).onError)==null?void 0:h.call(x,T,t,this.state.context,this)),await((S=(y=this.options).onError)==null?void 0:S.call(y,T,t,this.state.context)),await((N=(j=J(this,Et).config).onSettled)==null?void 0:N.call(j,void 0,T,this.state.variables,this.state.context,this)),await((P=(C=this.options).onSettled)==null?void 0:P.call(C,void 0,T,t,this.state.context)),T}finally{wt(this,Dn,yr).call(this,{type:"error",error:T})}}finally{J(this,Et).runNext(this)}}},Mn=new WeakMap,Et=new WeakMap,us=new WeakMap,Dn=new WeakSet,yr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Tt.batch(()=>{J(this,Mn).forEach(r=>{r.onMutationUpdate(t)}),J(this,Et).notify({mutation:this,type:"updated",action:t})})},jg);function aN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gt,zi,Cg,lN=(Cg=class extends Jl{constructor(t={}){super();$e(this,Gt);$e(this,zi);this.config=t,Ae(this,Gt,new Map),Ae(this,zi,Date.now())}build(t,n,r){const s=new iN({mutationCache:this,mutationId:++sa(this,zi)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){const n=ka(t),r=J(this,Gt).get(n)??[];r.push(t),J(this,Gt).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=ka(t);if(J(this,Gt).has(n)){const s=(r=J(this,Gt).get(n))==null?void 0:r.filter(o=>o!==t);s&&(s.length===0?J(this,Gt).delete(n):J(this,Gt).set(n,s))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=J(this,Gt).get(ka(t)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=J(this,Gt).get(ka(t)))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Tt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...J(this,Gt).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>tp(n,r))}findAll(t={}){return this.getAll().filter(n=>tp(t,n))}notify(t){Tt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Tt.batch(()=>Promise.all(t.map(n=>n.continue().catch(xn))))}},Gt=new WeakMap,zi=new WeakMap,Cg);function ka(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function sp(e){return{onFetch:(t,n)=>{var f,d,g,v,w;const r=t.options,s=(g=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:g.direction,o=((v=t.state.data)==null?void 0:v.pages)||[],a=((w=t.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const x=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},h=Uy(t.options,t.fetchOptions),y=async(S,j,N)=>{if(p)return Promise.reject();if(j==null&&S.pages.length)return Promise.resolve(S);const C={queryKey:t.queryKey,pageParam:j,direction:N?"backward":"forward",meta:t.options.meta};x(C);const P=await h(C),{maxPages:T}=t.options,M=N?Xk:qk;return{pages:M(S.pages,P,T),pageParams:M(S.pageParams,j,T)}};if(s&&o.length){const S=s==="backward",j=S?cN:op,N={pages:o,pageParams:a},C=j(r,N);l=await y(N,C,S)}else{const S=e??o.length;do{const j=c===0?a[0]??r.initialPageParam:op(r,l);if(c>0&&j==null)break;l=await y(l,j),c++}while(c<S)}return l};t.options.persister?t.fetchFn=()=>{var p,x;return(x=(p=t.options).persister)==null?void 0:x.call(p,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function op(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function cN(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var tt,Cr,Er,oo,io,_r,ao,lo,Eg,uN=(Eg=class{constructor(e={}){$e(this,tt);$e(this,Cr);$e(this,Er);$e(this,oo);$e(this,io);$e(this,_r);$e(this,ao);$e(this,lo);Ae(this,tt,e.queryCache||new oN),Ae(this,Cr,e.mutationCache||new lN),Ae(this,Er,e.defaultOptions||{}),Ae(this,oo,new Map),Ae(this,io,new Map),Ae(this,_r,0)}mount(){sa(this,_r)._++,J(this,_r)===1&&(Ae(this,ao,Wy.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,tt).onFocus())})),Ae(this,lo,Nl.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,tt).onOnline())})))}unmount(){var e,t;sa(this,_r)._--,J(this,_r)===0&&((e=J(this,ao))==null||e.call(this),Ae(this,ao,void 0),(t=J(this,lo))==null||t.call(this),Ae(this,lo,void 0))}isFetching(e){return J(this,tt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return J(this,Cr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,tt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=J(this,tt).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Jm(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return J(this,tt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=J(this,tt).get(r.queryHash),o=s==null?void 0:s.state.data,a=Wk(t,o);if(a!==void 0)return J(this,tt).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return Tt.batch(()=>J(this,tt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,tt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=J(this,tt);Tt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=J(this,tt),r={type:"active",...e};return Tt.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Tt.batch(()=>J(this,tt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(xn).catch(xn)}invalidateQueries(e={},t={}){return Tt.batch(()=>{if(J(this,tt).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Tt.batch(()=>J(this,tt).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(xn)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(xn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=J(this,tt).build(this,t);return n.isStaleByTime(Jm(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(xn).catch(xn)}fetchInfiniteQuery(e){return e.behavior=sp(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(xn).catch(xn)}ensureInfiniteQueryData(e){return e.behavior=sp(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Nl.isOnline()?J(this,Cr).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,tt)}getMutationCache(){return J(this,Cr)}getDefaultOptions(){return J(this,Er)}setDefaultOptions(e){Ae(this,Er,e)}setQueryDefaults(e,t){J(this,oo).set(Ii(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...J(this,oo).values()];let n={};return t.forEach(r=>{Mi(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){J(this,io).set(Ii(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...J(this,io).values()];let n={};return t.forEach(r=>{Mi(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...J(this,Er).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Bf(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Uf&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...J(this,Er).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){J(this,tt).clear(),J(this,Cr).clear()}},tt=new WeakMap,Cr=new WeakMap,Er=new WeakMap,oo=new WeakMap,io=new WeakMap,_r=new WeakMap,ao=new WeakMap,lo=new WeakMap,Eg),dN=m.createContext(void 0),fN=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(dN.Provider,{value:e,children:t}));async function Yy(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function ou(e,t,n){let r={},s;n instanceof FormData?s=n:n&&(r["Content-Type"]="application/json",s=JSON.stringify(n));const o=await fetch(t,{method:e,headers:r,body:s,credentials:"include"});return await Yy(o),o}const hN=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t.join("/"),{credentials:"include"});return e==="returnNull"&&n.status===401?null:(await Yy(n),await n.json())},mN=new uN({defaultOptions:{queries:{queryFn:hN({on401:"returnNull"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),pN=1,gN=1e6;let iu=0;function vN(){return iu=(iu+1)%Number.MAX_SAFE_INTEGER,iu.toString()}const au=new Map,ip=e=>{if(au.has(e))return;const t=setTimeout(()=>{au.delete(e),mi({type:"REMOVE_TOAST",toastId:e})},gN);au.set(e,t)},yN=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,pN)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?ip(n):e.toasts.forEach(r=>{ip(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ga=[];let Ya={toasts:[]};function mi(e){Ya=yN(Ya,e),Ga.forEach(t=>{t(Ya)})}function xN({...e}){const t=vN(),n=s=>mi({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>mi({type:"DISMISS_TOAST",toastId:t});return mi({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function Mt(){const[e,t]=m.useState(Ya);return m.useEffect(()=>(Ga.push(t),()=>{const n=Ga.indexOf(t);n>-1&&Ga.splice(n,1)}),[e]),{...e,toast:xN,dismiss:n=>mi({type:"DISMISS_TOAST",toastId:n})}}function de(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function ap(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Gi(...e){return t=>{let n=!1;const r=e.map(s=>{const o=ap(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():ap(e[s],null)}}}}function Re(...e){return m.useCallback(Gi(...e),e)}function wN(e,t){const n=m.createContext(t),r=o=>{const{children:a,...l}=o,c=m.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function s(o){const a=m.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function Ct(e,t=[]){let n=[];function r(o,a){const l=m.createContext(a),c=n.length;n=[...n,a];const u=d=>{var h;const{scope:g,children:v,...w}=d,p=((h=g==null?void 0:g[e])==null?void 0:h[c])||l,x=m.useMemo(()=>w,Object.values(w));return i.jsx(p.Provider,{value:x,children:v})};u.displayName=o+"Provider";function f(d,g){var p;const v=((p=g==null?void 0:g[e])==null?void 0:p[c])||l,w=m.useContext(v);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[u,f]}const s=()=>{const o=n.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,bN(s,...t)]}function bN(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const d=c(o)[`__scope${u}`];return{...l,...d}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function vo(e){const t=kN(e),n=m.forwardRef((r,s)=>{const{children:o,...a}=r,l=m.Children.toArray(o),c=l.find(jN);if(c){const u=c.props.children,f=l.map(d=>d===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:d);return i.jsx(t,{...a,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,f):null})}return i.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var SN=vo("Slot");function kN(e){const t=m.forwardRef((n,r)=>{const{children:s,...o}=n;if(m.isValidElement(s)){const a=EN(s),l=CN(o,s.props);return s.type!==m.Fragment&&(l.ref=r?Gi(r,a):a),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var qy=Symbol("radix.slottable");function NN(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=qy,t}function jN(e){return m.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===qy}function CN(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{o(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function EN(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function tc(e){const t=e+"CollectionProvider",[n,r]=Ct(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:x,children:h}=p,y=Ne.useRef(null),S=Ne.useRef(new Map).current;return i.jsx(s,{scope:x,itemMap:S,collectionRef:y,children:h})};a.displayName=t;const l=e+"CollectionSlot",c=vo(l),u=Ne.forwardRef((p,x)=>{const{scope:h,children:y}=p,S=o(l,h),j=Re(x,S.collectionRef);return i.jsx(c,{ref:j,children:y})});u.displayName=l;const f=e+"CollectionItemSlot",d="data-radix-collection-item",g=vo(f),v=Ne.forwardRef((p,x)=>{const{scope:h,children:y,...S}=p,j=Ne.useRef(null),N=Re(x,j),C=o(f,h);return Ne.useEffect(()=>(C.itemMap.set(j,{ref:j,...S}),()=>void C.itemMap.delete(j))),i.jsx(g,{[d]:"",ref:N,children:y})});v.displayName=f;function w(p){const x=o(e+"CollectionConsumer",p);return Ne.useCallback(()=>{const y=x.collectionRef.current;if(!y)return[];const S=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((C,P)=>S.indexOf(C.ref.current)-S.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:u,ItemSlot:v},w,r]}var _N=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],we=_N.reduce((e,t)=>{const n=vo(`Primitive.${t}`),r=m.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Wf(e,t){e&&Ki.flushSync(()=>e.dispatchEvent(t))}function qe(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function TN(e,t=globalThis==null?void 0:globalThis.document){const n=qe(e);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var PN="DismissableLayer",xd="dismissableLayer.update",AN="dismissableLayer.pointerDownOutside",RN="dismissableLayer.focusOutside",lp,Xy=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yi=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=m.useContext(Xy),[f,d]=m.useState(null),g=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=m.useState({}),w=Re(t,P=>d(P)),p=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),h=p.indexOf(x),y=f?p.indexOf(f):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,j=y>=h,N=MN(P=>{const T=P.target,M=[...u.branches].some(A=>A.contains(T));!j||M||(s==null||s(P),a==null||a(P),P.defaultPrevented||l==null||l())},g),C=DN(P=>{const T=P.target;[...u.branches].some(A=>A.contains(T))||(o==null||o(P),a==null||a(P),P.defaultPrevented||l==null||l())},g);return TN(P=>{y===u.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},g),m.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(lp=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),cp(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=lp)}},[f,g,n,u]),m.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),cp())},[f,u]),m.useEffect(()=>{const P=()=>v({});return document.addEventListener(xd,P),()=>document.removeEventListener(xd,P)},[]),i.jsx(we.div,{...c,ref:w,style:{pointerEvents:S?j?"auto":"none":void 0,...e.style},onFocusCapture:de(e.onFocusCapture,C.onFocusCapture),onBlurCapture:de(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:de(e.onPointerDownCapture,N.onPointerDownCapture)})});Yi.displayName=PN;var IN="DismissableLayerBranch",Qy=m.forwardRef((e,t)=>{const n=m.useContext(Xy),r=m.useRef(null),s=Re(t,r);return m.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(we.div,{...e,ref:s})});Qy.displayName=IN;function MN(e,t=globalThis==null?void 0:globalThis.document){const n=qe(e),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){Zy(AN,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function DN(e,t=globalThis==null?void 0:globalThis.document){const n=qe(e),r=m.useRef(!1);return m.useEffect(()=>{const s=o=>{o.target&&!r.current&&Zy(RN,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function cp(){const e=new CustomEvent(xd);document.dispatchEvent(e)}function Zy(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Wf(s,o):s.dispatchEvent(o)}var ON=Yi,LN=Qy,At=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},FN="Portal",nc=m.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,o]=m.useState(!1);At(()=>o(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?Uk.createPortal(i.jsx(we.div,{...r,ref:t}),a):null});nc.displayName=FN;function $N(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var Dt=e=>{const{present:t,children:n}=e,r=zN(t),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),o=Re(r.ref,BN(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:o}):null};Dt.displayName="Presence";function zN(e){const[t,n]=m.useState(),r=m.useRef({}),s=m.useRef(e),o=m.useRef("none"),a=e?"mounted":"unmounted",[l,c]=$N(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Na(r.current);o.current=l==="mounted"?u:"none"},[l]),At(()=>{const u=r.current,f=s.current;if(f!==e){const g=o.current,v=Na(u);e?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&g!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),At(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=v=>{const p=Na(r.current).includes(v.animationName);if(v.target===t&&p&&(c("ANIMATION_END"),!s.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},g=v=>{v.target===t&&(o.current=Na(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Na(e){return(e==null?void 0:e.animationName)||"none"}function BN(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Po({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=UN({defaultProp:t,onChange:n}),o=e!==void 0,a=o?e:r,l=qe(n),c=m.useCallback(u=>{if(o){const d=typeof u=="function"?u(e):u;d!==e&&l(d)}else s(u)},[o,e,s,l]);return[a,c]}function UN({defaultProp:e,onChange:t}){const n=m.useState(e),[r]=n,s=m.useRef(r),o=qe(t);return m.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}var WN="VisuallyHidden",rc=m.forwardRef((e,t)=>i.jsx(we.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));rc.displayName=WN;var VN=rc,Vf="ToastProvider",[Hf,HN,KN]=tc("Toast"),[Jy,p4]=Ct("Toast",[KN]),[GN,sc]=Jy(Vf),ex=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=m.useState(null),[u,f]=m.useState(0),d=m.useRef(!1),g=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Vf}\`. Expected non-empty \`string\`.`),i.jsx(Hf.Provider,{scope:t,children:i.jsx(GN,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>f(v=>v+1),[]),onToastRemove:m.useCallback(()=>f(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:g,children:a})})};ex.displayName=Vf;var tx="ToastViewport",YN=["F8"],wd="toast.viewportPause",bd="toast.viewportResume",nx=m.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=YN,label:s="Notifications ({hotkey})",...o}=e,a=sc(tx,n),l=HN(n),c=m.useRef(null),u=m.useRef(null),f=m.useRef(null),d=m.useRef(null),g=Re(t,d,a.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=a.toastCount>0;m.useEffect(()=>{const x=h=>{var S;r.length!==0&&r.every(j=>h[j]||h.code===j)&&((S=d.current)==null||S.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),m.useEffect(()=>{const x=c.current,h=d.current;if(w&&x&&h){const y=()=>{if(!a.isClosePausedRef.current){const C=new CustomEvent(wd);h.dispatchEvent(C),a.isClosePausedRef.current=!0}},S=()=>{if(a.isClosePausedRef.current){const C=new CustomEvent(bd);h.dispatchEvent(C),a.isClosePausedRef.current=!1}},j=C=>{!x.contains(C.relatedTarget)&&S()},N=()=>{x.contains(document.activeElement)||S()};return x.addEventListener("focusin",y),x.addEventListener("focusout",j),x.addEventListener("pointermove",y),x.addEventListener("pointerleave",N),window.addEventListener("blur",y),window.addEventListener("focus",S),()=>{x.removeEventListener("focusin",y),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",y),x.removeEventListener("pointerleave",N),window.removeEventListener("blur",y),window.removeEventListener("focus",S)}}},[w,a.isClosePausedRef]);const p=m.useCallback(({tabbingDirection:x})=>{const y=l().map(S=>{const j=S.ref.current,N=[j,...aj(j)];return x==="forwards"?N:N.reverse()});return(x==="forwards"?y.reverse():y).flat()},[l]);return m.useEffect(()=>{const x=d.current;if(x){const h=y=>{var N,C,P;const S=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!S){const T=document.activeElement,M=y.shiftKey;if(y.target===x&&M){(N=u.current)==null||N.focus();return}const E=p({tabbingDirection:M?"backwards":"forwards"}),O=E.findIndex(b=>b===T);lu(E.slice(O+1))?y.preventDefault():M?(C=u.current)==null||C.focus():(P=f.current)==null||P.focus()}};return x.addEventListener("keydown",h),()=>x.removeEventListener("keydown",h)}},[l,p]),i.jsxs(LN,{ref:c,role:"region","aria-label":s.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&i.jsx(Sd,{ref:u,onFocusFromOutsideViewport:()=>{const x=p({tabbingDirection:"forwards"});lu(x)}}),i.jsx(Hf.Slot,{scope:n,children:i.jsx(we.ol,{tabIndex:-1,...o,ref:g})}),w&&i.jsx(Sd,{ref:f,onFocusFromOutsideViewport:()=>{const x=p({tabbingDirection:"backwards"});lu(x)}})]})});nx.displayName=tx;var rx="ToastFocusProxy",Sd=m.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=sc(rx,n);return i.jsx(rc,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&r()}})});Sd.displayName=rx;var oc="Toast",qN="toast.swipeStart",XN="toast.swipeMove",QN="toast.swipeCancel",ZN="toast.swipeEnd",sx=m.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...a}=e,[l=!0,c]=Po({prop:r,defaultProp:s,onChange:o});return i.jsx(Dt,{present:n||l,children:i.jsx(tj,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:qe(e.onPause),onResume:qe(e.onResume),onSwipeStart:de(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:de(e.onSwipeMove,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:de(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:de(e.onSwipeEnd,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});sx.displayName=oc;var[JN,ej]=Jy(oc,{onClose(){}}),tj=m.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:g,onSwipeEnd:v,...w}=e,p=sc(oc,n),[x,h]=m.useState(null),y=Re(t,b=>h(b)),S=m.useRef(null),j=m.useRef(null),N=s||p.duration,C=m.useRef(0),P=m.useRef(N),T=m.useRef(0),{onToastAdd:M,onToastRemove:A}=p,R=qe(()=>{var I;(x==null?void 0:x.contains(document.activeElement))&&((I=p.viewport)==null||I.focus()),a()}),E=m.useCallback(b=>{!b||b===1/0||(window.clearTimeout(T.current),C.current=new Date().getTime(),T.current=window.setTimeout(R,b))},[R]);m.useEffect(()=>{const b=p.viewport;if(b){const I=()=>{E(P.current),u==null||u()},$=()=>{const U=new Date().getTime()-C.current;P.current=P.current-U,window.clearTimeout(T.current),c==null||c()};return b.addEventListener(wd,$),b.addEventListener(bd,I),()=>{b.removeEventListener(wd,$),b.removeEventListener(bd,I)}}},[p.viewport,N,c,u,E]),m.useEffect(()=>{o&&!p.isClosePausedRef.current&&E(N)},[o,N,p.isClosePausedRef,E]),m.useEffect(()=>(M(),()=>A()),[M,A]);const O=m.useMemo(()=>x?dx(x):null,[x]);return p.viewport?i.jsxs(i.Fragment,{children:[O&&i.jsx(nj,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),i.jsx(JN,{scope:n,onClose:R,children:Ki.createPortal(i.jsx(Hf.ItemSlot,{scope:n,children:i.jsx(ON,{asChild:!0,onEscapeKeyDown:de(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||R(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":p.swipeDirection,...w,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:de(e.onKeyDown,b=>{b.key==="Escape"&&(l==null||l(b.nativeEvent),b.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:de(e.onPointerDown,b=>{b.button===0&&(S.current={x:b.clientX,y:b.clientY})}),onPointerMove:de(e.onPointerMove,b=>{if(!S.current)return;const I=b.clientX-S.current.x,$=b.clientY-S.current.y,U=!!j.current,z=["left","right"].includes(p.swipeDirection),_=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,W=z?_(0,I):0,D=z?0:_(0,$),B=b.pointerType==="touch"?10:2,X={x:W,y:D},Y={originalEvent:b,delta:X};U?(j.current=X,ja(XN,d,Y,{discrete:!1})):up(X,p.swipeDirection,B)?(j.current=X,ja(qN,f,Y,{discrete:!1}),b.target.setPointerCapture(b.pointerId)):(Math.abs(I)>B||Math.abs($)>B)&&(S.current=null)}),onPointerUp:de(e.onPointerUp,b=>{const I=j.current,$=b.target;if($.hasPointerCapture(b.pointerId)&&$.releasePointerCapture(b.pointerId),j.current=null,S.current=null,I){const U=b.currentTarget,z={originalEvent:b,delta:I};up(I,p.swipeDirection,p.swipeThreshold)?ja(ZN,v,z,{discrete:!0}):ja(QN,g,z,{discrete:!0}),U.addEventListener("click",_=>_.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),nj=e=>{const{__scopeToast:t,children:n,...r}=e,s=sc(oc,t),[o,a]=m.useState(!1),[l,c]=m.useState(!1);return oj(()=>a(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(nc,{asChild:!0,children:i.jsx(rc,{...r,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},rj="ToastTitle",ox=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(we.div,{...r,ref:t})});ox.displayName=rj;var sj="ToastDescription",ix=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(we.div,{...r,ref:t})});ix.displayName=sj;var ax="ToastAction",lx=m.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(ux,{altText:n,asChild:!0,children:i.jsx(Kf,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${ax}\`. Expected non-empty \`string\`.`),null)});lx.displayName=ax;var cx="ToastClose",Kf=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=ej(cx,n);return i.jsx(ux,{asChild:!0,children:i.jsx(we.button,{type:"button",...r,ref:t,onClick:de(e.onClick,s.onClose)})})});Kf.displayName=cx;var ux=m.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return i.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function dx(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),ij(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...dx(r))}}),t}function ja(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Wf(s,o):s.dispatchEvent(o)}var up=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function oj(e=()=>{}){const t=qe(e);At(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function ij(e){return e.nodeType===e.ELEMENT_NODE}function aj(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function lu(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var lj=ex,fx=nx,hx=sx,mx=ox,px=ix,gx=lx,vx=Kf;function yx(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=yx(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function xx(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=yx(e))&&(r&&(r+=" "),r+=t);return r}const dp=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fp=xx,ic=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return fp(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const f=n==null?void 0:n[u],d=o==null?void 0:o[u];if(f===null)return null;const g=dp(f)||dp(d);return s[u][g]}),l=n&&Object.entries(n).reduce((u,f)=>{let[d,g]=f;return g===void 0||(u[d]=g),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:d,className:g,...v}=f;return Object.entries(v).every(w=>{let[p,x]=w;return Array.isArray(x)?x.includes({...o,...l}[p]):{...o,...l}[p]===x})?[...u,d,g]:u},[]);return fp(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wx=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...l},c)=>m.createElement("svg",{ref:c,...uj,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:wx("lucide",s),...l},[...a.map(([u,f])=>m.createElement(u,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(e,t)=>{const n=m.forwardRef(({className:r,...s},o)=>m.createElement(dj,{ref:o,iconNode:t,className:wx(`lucide-${cj(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=me("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=me("Bluetooth",[["path",{d:"m7 7 10 10-5 5V2l5 5L7 17",key:"1q5490"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=me("Cast",[["path",{d:"M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6",key:"3zrzxg"}],["path",{d:"M2 12a9 9 0 0 1 8 8",key:"g6cvee"}],["path",{d:"M2 16a5 5 0 0 1 4 4",key:"1y1dii"}],["line",{x1:"2",x2:"2.01",y1:"20",y2:"20",key:"xu2jvo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=me("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=me("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=me("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=me("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=me("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=me("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=me("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=me("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=me("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=me("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=me("Focus",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=me("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=me("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=me("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=me("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=me("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=me("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=me("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=me("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=me("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=me("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=me("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=me("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=me("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=me("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=me("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=me("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=me("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=me("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=me("Usb",[["circle",{cx:"10",cy:"7",r:"1",key:"dypaad"}],["circle",{cx:"4",cy:"20",r:"1",key:"22iqad"}],["path",{d:"M4.7 19.3 19 5",key:"1enqfc"}],["path",{d:"m21 3-3 1 2 2Z",key:"d3ov82"}],["path",{d:"M9.26 7.68 5 12l2 5",key:"1esawj"}],["path",{d:"m10 14 5 2 3.5-3.5",key:"v8oal5"}],["path",{d:"m18 12 1-1 1 1-1 1Z",key:"1bh22v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=me("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=me("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=me("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=me("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=me("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Gf="-",Lj=e=>{const t=$j(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const l=a.split(Gf);return l[0]===""&&l.length!==1&&l.shift(),Ex(l,t)||Fj(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},Ex=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Ex(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(Gf);return(a=t.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},kp=/^\[(.+)\]$/,Fj=e=>{if(kp.test(e)){const t=kp.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},$j=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Bj(Object.entries(e.classGroups),n).forEach(([o,a])=>{Cd(a,r,o,t)}),r},Cd=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:Np(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(zj(s)){Cd(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{Cd(a,Np(t,o),n,r)})})},Np=(e,t)=>{let n=e;return t.split(Gf).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},zj=e=>e.isThemeGetter,Bj=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[t+a,l])):o);return[n,s]}):e,Uj=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},_x="!",Wj=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,a=l=>{const c=[];let u=0,f=0,d;for(let x=0;x<l.length;x++){let h=l[x];if(u===0){if(h===s&&(r||l.slice(x,x+o)===t)){c.push(l.slice(f,x)),f=x+o;continue}if(h==="/"){d=x;continue}}h==="["?u++:h==="]"&&u--}const g=c.length===0?l:l.substring(f),v=g.startsWith(_x),w=v?g.substring(1):g,p=d&&d>f?d-f:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:w,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:a}):a},Vj=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},Hj=e=>({cache:Uj(e.cacheSize),parseClassName:Wj(e),...Lj(e)}),Kj=/\s+/,Gj=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],a=e.trim().split(Kj);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:d,baseClassName:g,maybePostfixModifierPosition:v}=n(u);let w=!!v,p=r(w?g.substring(0,v):g);if(!p){if(!w){l=u+(l.length>0?" "+l:l);continue}if(p=r(g),!p){l=u+(l.length>0?" "+l:l);continue}w=!1}const x=Vj(f).join(":"),h=d?x+_x:x,y=h+p;if(o.includes(y))continue;o.push(y);const S=s(p,w);for(let j=0;j<S.length;++j){const N=S[j];o.push(h+N)}l=u+(l.length>0?" "+l:l)}return l};function Yj(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Tx(t))&&(r&&(r+=" "),r+=n);return r}const Tx=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Tx(e[r]))&&(n&&(n+=" "),n+=t);return n};function qj(e,...t){let n,r,s,o=a;function a(c){const u=t.reduce((f,d)=>d(f),e());return n=Hj(u),r=n.cache.get,s=n.cache.set,o=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=Gj(c,n);return s(c,f),f}return function(){return o(Yj.apply(null,arguments))}}const Ve=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Px=/^\[(?:([a-z-]+):)?(.+)\]$/i,Xj=/^\d+\/\d+$/,Qj=new Set(["px","full","screen"]),Zj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Jj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,eC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,tC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qn=e=>Qs(e)||Qj.has(e)||Xj.test(e),gr=e=>Ao(e,"length",uC),Qs=e=>!!e&&!Number.isNaN(Number(e)),du=e=>Ao(e,"number",Qs),Yo=e=>!!e&&Number.isInteger(Number(e)),rC=e=>e.endsWith("%")&&Qs(e.slice(0,-1)),Te=e=>Px.test(e),vr=e=>Zj.test(e),sC=new Set(["length","size","percentage"]),oC=e=>Ao(e,sC,Ax),iC=e=>Ao(e,"position",Ax),aC=new Set(["image","url"]),lC=e=>Ao(e,aC,fC),cC=e=>Ao(e,"",dC),qo=()=>!0,Ao=(e,t,n)=>{const r=Px.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},uC=e=>Jj.test(e)&&!eC.test(e),Ax=()=>!1,dC=e=>tC.test(e),fC=e=>nC.test(e),hC=()=>{const e=Ve("colors"),t=Ve("spacing"),n=Ve("blur"),r=Ve("brightness"),s=Ve("borderColor"),o=Ve("borderRadius"),a=Ve("borderSpacing"),l=Ve("borderWidth"),c=Ve("contrast"),u=Ve("grayscale"),f=Ve("hueRotate"),d=Ve("invert"),g=Ve("gap"),v=Ve("gradientColorStops"),w=Ve("gradientColorStopPositions"),p=Ve("inset"),x=Ve("margin"),h=Ve("opacity"),y=Ve("padding"),S=Ve("saturate"),j=Ve("scale"),N=Ve("sepia"),C=Ve("skew"),P=Ve("space"),T=Ve("translate"),M=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",Te,t],E=()=>[Te,t],O=()=>["",qn,gr],b=()=>["auto",Qs,Te],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],_=()=>["","0",Te],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>[Qs,Te];return{cacheSize:500,separator:":",theme:{colors:[qo],spacing:[qn,gr],blur:["none","",vr,Te],brightness:D(),borderColor:[e],borderRadius:["none","","full",vr,Te],borderSpacing:E(),borderWidth:O(),contrast:D(),grayscale:_(),hueRotate:D(),invert:_(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[rC,gr],inset:R(),margin:R(),opacity:D(),padding:E(),saturate:D(),scale:D(),sepia:_(),skew:D(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[vr]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),Te]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Yo,Te]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:_()}],shrink:[{shrink:_()}],order:[{order:["first","last","none",Yo,Te]}],"grid-cols":[{"grid-cols":[qo]}],"col-start-end":[{col:["auto",{span:["full",Yo,Te]},Te]}],"col-start":[{"col-start":b()}],"col-end":[{"col-end":b()}],"grid-rows":[{"grid-rows":[qo]}],"row-start-end":[{row:["auto",{span:[Yo,Te]},Te]}],"row-start":[{"row-start":b()}],"row-end":[{"row-end":b()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,t]}],"min-w":[{"min-w":[Te,t,"min","max","fit"]}],"max-w":[{"max-w":[Te,t,"none","full","min","max","fit","prose",{screen:[vr]},vr]}],h:[{h:[Te,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,t,"auto","min","max","fit"]}],"font-size":[{text:["base",vr,gr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",du]}],"font-family":[{font:[qo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",Qs,du]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qn,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[h]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[h]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",qn,gr]}],"underline-offset":[{"underline-offset":["auto",qn,Te]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[h]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),iC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},lC]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[h]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[h]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[qn,Te]}],"outline-w":[{outline:[qn,gr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[h]}],"ring-offset-w":[{"ring-offset":[qn,gr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",vr,cC]}],"shadow-color":[{shadow:[qo]}],opacity:[{opacity:[h]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",vr,Te]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[S]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[h]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Yo,Te]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[qn,gr,du]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},mC=qj(hC);function Ce(...e){return mC(xx(e))}const pC=lj,Rx=m.forwardRef(({className:e,...t},n)=>i.jsx(fx,{ref:n,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Rx.displayName=fx.displayName;const gC=ic("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ix=m.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(hx,{ref:r,className:Ce(gC({variant:t}),e),...n}));Ix.displayName=hx.displayName;const vC=m.forwardRef(({className:e,...t},n)=>i.jsx(gx,{ref:n,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));vC.displayName=gx.displayName;const Mx=m.forwardRef(({className:e,...t},n)=>i.jsx(vx,{ref:n,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(cc,{className:"h-4 w-4"})}));Mx.displayName=vx.displayName;const Dx=m.forwardRef(({className:e,...t},n)=>i.jsx(mx,{ref:n,className:Ce("text-sm font-semibold",e),...t}));Dx.displayName=mx.displayName;const Ox=m.forwardRef(({className:e,...t},n)=>i.jsx(px,{ref:n,className:Ce("text-sm opacity-90",e),...t}));Ox.displayName=px.displayName;function jp(){const{toasts:e}=Mt();return i.jsxs(pC,{children:[e.map(function({id:t,title:n,description:r,action:s,...o}){return i.jsxs(Ix,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(Dx,{children:n}),r&&i.jsx(Ox,{children:r})]}),s,i.jsx(Mx,{})]},t)}),i.jsx(Rx,{})]})}var yC=qd[" useId ".trim().toString()]||(()=>{}),xC=0;function Br(e){const[t,n]=m.useState(yC());return At(()=>{e||n(r=>r??String(xC++))},[e]),e||(t?`radix-${t}`:"")}const wC=["top","right","bottom","left"],Hr=Math.min,qt=Math.max,jl=Math.round,Ca=Math.floor,Wn=e=>({x:e,y:e}),bC={left:"right",right:"left",bottom:"top",top:"bottom"},SC={start:"end",end:"start"};function Ed(e,t,n){return qt(e,Hr(t,n))}function ur(e,t){return typeof e=="function"?e(t):e}function dr(e){return e.split("-")[0]}function Ro(e){return e.split("-")[1]}function Yf(e){return e==="x"?"y":"x"}function qf(e){return e==="y"?"height":"width"}function Kr(e){return["top","bottom"].includes(dr(e))?"y":"x"}function Xf(e){return Yf(Kr(e))}function kC(e,t,n){n===void 0&&(n=!1);const r=Ro(e),s=Xf(e),o=qf(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Cl(a)),[a,Cl(a)]}function NC(e){const t=Cl(e);return[_d(e),t,_d(t)]}function _d(e){return e.replace(/start|end/g,t=>SC[t])}function jC(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:a;default:return[]}}function CC(e,t,n,r){const s=Ro(e);let o=jC(dr(e),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(_d)))),o}function Cl(e){return e.replace(/left|right|bottom|top/g,t=>bC[t])}function EC(e){return{top:0,right:0,bottom:0,left:0,...e}}function Lx(e){return typeof e!="number"?EC(e):{top:e,right:e,bottom:e,left:e}}function El(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Cp(e,t,n){let{reference:r,floating:s}=e;const o=Kr(t),a=Xf(t),l=qf(a),c=dr(t),u=o==="y",f=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,g=r[l]/2-s[l]/2;let v;switch(c){case"top":v={x:f,y:r.y-s.height};break;case"bottom":v={x:f,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:d};break;case"left":v={x:r.x-s.width,y:d};break;default:v={x:r.x,y:r.y}}switch(Ro(t)){case"start":v[a]-=g*(n&&u?-1:1);break;case"end":v[a]+=g*(n&&u?-1:1);break}return v}const _C=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:d}=Cp(u,r,c),g=r,v={},w=0;for(let p=0;p<l.length;p++){const{name:x,fn:h}=l[p],{x:y,y:S,data:j,reset:N}=await h({x:f,y:d,initialPlacement:r,placement:g,strategy:s,middlewareData:v,rects:u,platform:a,elements:{reference:e,floating:t}});f=y??f,d=S??d,v={...v,[x]:{...v[x],...j}},N&&w<=50&&(w++,typeof N=="object"&&(N.placement&&(g=N.placement),N.rects&&(u=N.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):N.rects),{x:f,y:d}=Cp(u,g,c)),p=-1)}return{x:f,y:d,placement:g,strategy:s,middlewareData:v}};async function Di(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:g=!1,padding:v=0}=ur(t,e),w=Lx(v),x=l[g?d==="floating"?"reference":"floating":d],h=El(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),y=d==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),j=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},N=El(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:S,strategy:c}):y);return{top:(h.top-N.top+w.top)/j.y,bottom:(N.bottom-h.bottom+w.bottom)/j.y,left:(h.left-N.left+w.left)/j.x,right:(N.right-h.right+w.right)/j.x}}const TC=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=ur(e,t)||{};if(u==null)return{};const d=Lx(f),g={x:n,y:r},v=Xf(s),w=qf(v),p=await a.getDimensions(u),x=v==="y",h=x?"top":"left",y=x?"bottom":"right",S=x?"clientHeight":"clientWidth",j=o.reference[w]+o.reference[v]-g[v]-o.floating[w],N=g[v]-o.reference[v],C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let P=C?C[S]:0;(!P||!await(a.isElement==null?void 0:a.isElement(C)))&&(P=l.floating[S]||o.floating[w]);const T=j/2-N/2,M=P/2-p[w]/2-1,A=Hr(d[h],M),R=Hr(d[y],M),E=A,O=P-p[w]-R,b=P/2-p[w]/2+T,I=Ed(E,b,O),$=!c.arrow&&Ro(s)!=null&&b!==I&&o.reference[w]/2-(b<E?A:R)-p[w]/2<0,U=$?b<E?b-E:b-O:0;return{[v]:g[v]+U,data:{[v]:I,centerOffset:b-I-U,...$&&{alignmentOffset:U}},reset:$}}}),PC=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:p=!0,...x}=ur(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const h=dr(s),y=Kr(l),S=dr(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=g||(S||!p?[Cl(l)]:NC(l)),C=w!=="none";!g&&C&&N.push(...CC(l,p,w,j));const P=[l,...N],T=await Di(t,x),M=[];let A=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&M.push(T[h]),d){const b=kC(s,a,j);M.push(T[b[0]],T[b[1]])}if(A=[...A,{placement:s,overflows:M}],!M.every(b=>b<=0)){var R,E;const b=(((R=o.flip)==null?void 0:R.index)||0)+1,I=P[b];if(I)return{data:{index:b,overflows:A},reset:{placement:I}};let $=(E=A.filter(U=>U.overflows[0]<=0).sort((U,z)=>U.overflows[1]-z.overflows[1])[0])==null?void 0:E.placement;if(!$)switch(v){case"bestFit":{var O;const U=(O=A.filter(z=>{if(C){const _=Kr(z.placement);return _===y||_==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(_=>_>0).reduce((_,W)=>_+W,0)]).sort((z,_)=>z[1]-_[1])[0])==null?void 0:O[0];U&&($=U);break}case"initialPlacement":$=l;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function Ep(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function _p(e){return wC.some(t=>e[t]>=0)}const AC=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=ur(e,t);switch(r){case"referenceHidden":{const o=await Di(t,{...s,elementContext:"reference"}),a=Ep(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:_p(a)}}}case"escaped":{const o=await Di(t,{...s,altBoundary:!0}),a=Ep(o,n.floating);return{data:{escapedOffsets:a,escaped:_p(a)}}}default:return{}}}}};async function RC(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=dr(n),l=Ro(n),c=Kr(n)==="y",u=["left","top"].includes(a)?-1:1,f=o&&c?-1:1,d=ur(t,e);let{mainAxis:g,crossAxis:v,alignmentAxis:w}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof w=="number"&&(v=l==="end"?w*-1:w),c?{x:v*f,y:g*u}:{x:g*u,y:v*f}}const IC=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await RC(t,e);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},MC=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:h,y}=x;return{x:h,y}}},...c}=ur(e,t),u={x:n,y:r},f=await Di(t,c),d=Kr(dr(s)),g=Yf(d);let v=u[g],w=u[d];if(o){const x=g==="y"?"top":"left",h=g==="y"?"bottom":"right",y=v+f[x],S=v-f[h];v=Ed(y,v,S)}if(a){const x=d==="y"?"top":"left",h=d==="y"?"bottom":"right",y=w+f[x],S=w-f[h];w=Ed(y,w,S)}const p=l.fn({...t,[g]:v,[d]:w});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[g]:o,[d]:a}}}}}},DC=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ur(e,t),f={x:n,y:r},d=Kr(s),g=Yf(d);let v=f[g],w=f[d];const p=ur(l,t),x=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const S=g==="y"?"height":"width",j=o.reference[g]-o.floating[S]+x.mainAxis,N=o.reference[g]+o.reference[S]-x.mainAxis;v<j?v=j:v>N&&(v=N)}if(u){var h,y;const S=g==="y"?"width":"height",j=["top","left"].includes(dr(s)),N=o.reference[d]-o.floating[S]+(j&&((h=a.offset)==null?void 0:h[d])||0)+(j?0:x.crossAxis),C=o.reference[d]+o.reference[S]+(j?0:((y=a.offset)==null?void 0:y[d])||0)-(j?x.crossAxis:0);w<N?w=N:w>C&&(w=C)}return{[g]:v,[d]:w}}}},OC=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=ur(e,t),f=await Di(t,u),d=dr(s),g=Ro(s),v=Kr(s)==="y",{width:w,height:p}=o.floating;let x,h;d==="top"||d==="bottom"?(x=d,h=g===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(h=d,x=g==="end"?"top":"bottom");const y=p-f.top-f.bottom,S=w-f.left-f.right,j=Hr(p-f[x],y),N=Hr(w-f[h],S),C=!t.middlewareData.shift;let P=j,T=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(P=y),C&&!g){const A=qt(f.left,0),R=qt(f.right,0),E=qt(f.top,0),O=qt(f.bottom,0);v?T=w-2*(A!==0||R!==0?A+R:qt(f.left,f.right)):P=p-2*(E!==0||O!==0?E+O:qt(f.top,f.bottom))}await c({...t,availableWidth:T,availableHeight:P});const M=await a.getDimensions(l.floating);return w!==M.width||p!==M.height?{reset:{rects:!0}}:{}}}};function uc(){return typeof window<"u"}function Io(e){return Fx(e)?(e.nodeName||"").toLowerCase():"#document"}function Zt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Kn(e){var t;return(t=(Fx(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Fx(e){return uc()?e instanceof Node||e instanceof Zt(e).Node:!1}function Cn(e){return uc()?e instanceof Element||e instanceof Zt(e).Element:!1}function Hn(e){return uc()?e instanceof HTMLElement||e instanceof Zt(e).HTMLElement:!1}function Tp(e){return!uc()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Zt(e).ShadowRoot}function qi(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=En(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function LC(e){return["table","td","th"].includes(Io(e))}function dc(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Qf(e){const t=Zf(),n=Cn(e)?En(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function FC(e){let t=Gr(e);for(;Hn(t)&&!bo(t);){if(Qf(t))return t;if(dc(t))return null;t=Gr(t)}return null}function Zf(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function bo(e){return["html","body","#document"].includes(Io(e))}function En(e){return Zt(e).getComputedStyle(e)}function fc(e){return Cn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gr(e){if(Io(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Tp(e)&&e.host||Kn(e);return Tp(t)?t.host:t}function $x(e){const t=Gr(e);return bo(t)?e.ownerDocument?e.ownerDocument.body:e.body:Hn(t)&&qi(t)?t:$x(t)}function Oi(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=$x(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),a=Zt(s);if(o){const l=Td(a);return t.concat(a,a.visualViewport||[],qi(s)?s:[],l&&n?Oi(l):[])}return t.concat(s,Oi(s,[],n))}function Td(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function zx(e){const t=En(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Hn(e),o=s?e.offsetWidth:n,a=s?e.offsetHeight:r,l=jl(n)!==o||jl(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function Jf(e){return Cn(e)?e:e.contextElement}function Zs(e){const t=Jf(e);if(!Hn(t))return Wn(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=zx(t);let a=(o?jl(n.width):n.width)/r,l=(o?jl(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const $C=Wn(0);function Bx(e){const t=Zt(e);return!Zf()||!t.visualViewport?$C:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function zC(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Zt(e)?!1:t}function ws(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=Jf(e);let a=Wn(1);t&&(r?Cn(r)&&(a=Zs(r)):a=Zs(e));const l=zC(o,n,r)?Bx(o):Wn(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,d=s.height/a.y;if(o){const g=Zt(o),v=r&&Cn(r)?Zt(r):r;let w=g,p=Td(w);for(;p&&r&&v!==w;){const x=Zs(p),h=p.getBoundingClientRect(),y=En(p),S=h.left+(p.clientLeft+parseFloat(y.paddingLeft))*x.x,j=h.top+(p.clientTop+parseFloat(y.paddingTop))*x.y;c*=x.x,u*=x.y,f*=x.x,d*=x.y,c+=S,u+=j,w=Zt(p),p=Td(w)}}return El({width:f,height:d,x:c,y:u})}function eh(e,t){const n=fc(e).scrollLeft;return t?t.left+n:ws(Kn(e)).left+n}function Ux(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:eh(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function BC(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",a=Kn(r),l=t?dc(t.floating):!1;if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=Wn(1);const f=Wn(0),d=Hn(r);if((d||!d&&!o)&&((Io(r)!=="body"||qi(a))&&(c=fc(r)),Hn(r))){const v=ws(r);u=Zs(r),f.x=v.x+r.clientLeft,f.y=v.y+r.clientTop}const g=a&&!d&&!o?Ux(a,c,!0):Wn(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+g.x,y:n.y*u.y-c.scrollTop*u.y+f.y+g.y}}function UC(e){return Array.from(e.getClientRects())}function WC(e){const t=Kn(e),n=fc(e),r=e.ownerDocument.body,s=qt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=qt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+eh(e);const l=-n.scrollTop;return En(r).direction==="rtl"&&(a+=qt(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function VC(e,t){const n=Zt(e),r=Kn(e),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=Zf();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}function HC(e,t){const n=ws(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Hn(e)?Zs(e):Wn(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:l,x:c,y:u}}function Pp(e,t,n){let r;if(t==="viewport")r=VC(e,n);else if(t==="document")r=WC(Kn(e));else if(Cn(t))r=HC(t,n);else{const s=Bx(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return El(r)}function Wx(e,t){const n=Gr(e);return n===t||!Cn(n)||bo(n)?!1:En(n).position==="fixed"||Wx(n,t)}function KC(e,t){const n=t.get(e);if(n)return n;let r=Oi(e,[],!1).filter(l=>Cn(l)&&Io(l)!=="body"),s=null;const o=En(e).position==="fixed";let a=o?Gr(e):e;for(;Cn(a)&&!bo(a);){const l=En(a),c=Qf(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||qi(a)&&!c&&Wx(e,a))?r=r.filter(f=>f!==a):s=l,a=Gr(a)}return t.set(e,r),r}function GC(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?dc(t)?[]:KC(t,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,f)=>{const d=Pp(t,f,s);return u.top=qt(d.top,u.top),u.right=Hr(d.right,u.right),u.bottom=Hr(d.bottom,u.bottom),u.left=qt(d.left,u.left),u},Pp(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function YC(e){const{width:t,height:n}=zx(e);return{width:t,height:n}}function qC(e,t,n){const r=Hn(t),s=Kn(t),o=n==="fixed",a=ws(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Wn(0);if(r||!r&&!o)if((Io(t)!=="body"||qi(s))&&(l=fc(t)),r){const g=ws(t,!0,o,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else s&&(c.x=eh(s));const u=s&&!r&&!o?Ux(s,l):Wn(0),f=a.left+l.scrollLeft-c.x-u.x,d=a.top+l.scrollTop-c.y-u.y;return{x:f,y:d,width:a.width,height:a.height}}function fu(e){return En(e).position==="static"}function Ap(e,t){if(!Hn(e)||En(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Kn(e)===n&&(n=n.ownerDocument.body),n}function Vx(e,t){const n=Zt(e);if(dc(e))return n;if(!Hn(e)){let s=Gr(e);for(;s&&!bo(s);){if(Cn(s)&&!fu(s))return s;s=Gr(s)}return n}let r=Ap(e,t);for(;r&&LC(r)&&fu(r);)r=Ap(r,t);return r&&bo(r)&&fu(r)&&!Qf(r)?n:r||FC(e)||n}const XC=async function(e){const t=this.getOffsetParent||Vx,n=this.getDimensions,r=await n(e.floating);return{reference:qC(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function QC(e){return En(e).direction==="rtl"}const ZC={convertOffsetParentRelativeRectToViewportRelativeRect:BC,getDocumentElement:Kn,getClippingRect:GC,getOffsetParent:Vx,getElementRects:XC,getClientRects:UC,getDimensions:YC,getScale:Zs,isElement:Cn,isRTL:QC};function Hx(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function JC(e,t){let n=null,r;const s=Kn(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:f,top:d,width:g,height:v}=u;if(l||t(),!g||!v)return;const w=Ca(d),p=Ca(s.clientWidth-(f+g)),x=Ca(s.clientHeight-(d+v)),h=Ca(f),S={rootMargin:-w+"px "+-p+"px "+-x+"px "+-h+"px",threshold:qt(0,Hr(1,c))||1};let j=!0;function N(C){const P=C[0].intersectionRatio;if(P!==c){if(!j)return a();P?a(!1,P):r=setTimeout(()=>{a(!1,1e-7)},1e3)}P===1&&!Hx(u,e.getBoundingClientRect())&&a(),j=!1}try{n=new IntersectionObserver(N,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(N,S)}n.observe(e)}return a(!0),o}function eE(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Jf(e),f=s||o?[...u?Oi(u):[],...Oi(t)]:[];f.forEach(h=>{s&&h.addEventListener("scroll",n,{passive:!0}),o&&h.addEventListener("resize",n)});const d=u&&l?JC(u,n):null;let g=-1,v=null;a&&(v=new ResizeObserver(h=>{let[y]=h;y&&y.target===u&&v&&(v.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var S;(S=v)==null||S.observe(t)})),n()}),u&&!c&&v.observe(u),v.observe(t));let w,p=c?ws(e):null;c&&x();function x(){const h=ws(e);p&&!Hx(p,h)&&n(),p=h,w=requestAnimationFrame(x)}return n(),()=>{var h;f.forEach(y=>{s&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),d==null||d(),(h=v)==null||h.disconnect(),v=null,c&&cancelAnimationFrame(w)}}const tE=IC,nE=MC,rE=PC,sE=OC,oE=AC,Rp=TC,iE=DC,aE=(e,t,n)=>{const r=new Map,s={platform:ZC,...n},o={...s.platform,_c:r};return _C(e,t,{...s,platform:o})};var qa=typeof document<"u"?m.useLayoutEffect:m.useEffect;function _l(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!_l(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!_l(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Kx(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ip(e,t){const n=Kx(e);return Math.round(t*n)/n}function hu(e){const t=m.useRef(e);return qa(()=>{t.current=e}),t}function lE(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,d]=m.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,v]=m.useState(r);_l(g,r)||v(r);const[w,p]=m.useState(null),[x,h]=m.useState(null),y=m.useCallback(z=>{z!==C.current&&(C.current=z,p(z))},[]),S=m.useCallback(z=>{z!==P.current&&(P.current=z,h(z))},[]),j=o||w,N=a||x,C=m.useRef(null),P=m.useRef(null),T=m.useRef(f),M=c!=null,A=hu(c),R=hu(s),E=hu(u),O=m.useCallback(()=>{if(!C.current||!P.current)return;const z={placement:t,strategy:n,middleware:g};R.current&&(z.platform=R.current),aE(C.current,P.current,z).then(_=>{const W={..._,isPositioned:E.current!==!1};b.current&&!_l(T.current,W)&&(T.current=W,Ki.flushSync(()=>{d(W)}))})},[g,t,n,R,E]);qa(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[u]);const b=m.useRef(!1);qa(()=>(b.current=!0,()=>{b.current=!1}),[]),qa(()=>{if(j&&(C.current=j),N&&(P.current=N),j&&N){if(A.current)return A.current(j,N,O);O()}},[j,N,O,A,M]);const I=m.useMemo(()=>({reference:C,floating:P,setReference:y,setFloating:S}),[y,S]),$=m.useMemo(()=>({reference:j,floating:N}),[j,N]),U=m.useMemo(()=>{const z={position:n,left:0,top:0};if(!$.floating)return z;const _=Ip($.floating,f.x),W=Ip($.floating,f.y);return l?{...z,transform:"translate("+_+"px, "+W+"px)",...Kx($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_,top:W}},[n,l,$.floating,f.x,f.y]);return m.useMemo(()=>({...f,update:O,refs:I,elements:$,floatingStyles:U}),[f,O,I,$,U])}const cE=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Rp({element:r.current,padding:s}).fn(n):{}:r?Rp({element:r,padding:s}).fn(n):{}}}},uE=(e,t)=>({...tE(e),options:[e,t]}),dE=(e,t)=>({...nE(e),options:[e,t]}),fE=(e,t)=>({...iE(e),options:[e,t]}),hE=(e,t)=>({...rE(e),options:[e,t]}),mE=(e,t)=>({...sE(e),options:[e,t]}),pE=(e,t)=>({...oE(e),options:[e,t]}),gE=(e,t)=>({...cE(e),options:[e,t]});var vE="Arrow",Gx=m.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return i.jsx(we.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Gx.displayName=vE;var yE=Gx;function th(e){const[t,n]=m.useState(void 0);return At(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;n({width:a,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var nh="Popper",[Yx,hc]=Ct(nh),[xE,qx]=Yx(nh),Xx=e=>{const{__scopePopper:t,children:n}=e,[r,s]=m.useState(null);return i.jsx(xE,{scope:t,anchor:r,onAnchorChange:s,children:n})};Xx.displayName=nh;var Qx="PopperAnchor",Zx=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=qx(Qx,n),a=m.useRef(null),l=Re(t,a);return m.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:i.jsx(we.div,{...s,ref:l})});Zx.displayName=Qx;var rh="PopperContent",[wE,bE]=Yx(rh),Jx=m.forwardRef((e,t)=>{var ve,ge,Q,ue,xe,Me;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:g=!1,updatePositionStrategy:v="optimized",onPlaced:w,...p}=e,x=qx(rh,n),[h,y]=m.useState(null),S=Re(t,ke=>y(ke)),[j,N]=m.useState(null),C=th(j),P=(C==null?void 0:C.width)??0,T=(C==null?void 0:C.height)??0,M=r+(o!=="center"?"-"+o:""),A=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},R=Array.isArray(u)?u:[u],E=R.length>0,O={padding:A,boundary:R.filter(kE),altBoundary:E},{refs:b,floatingStyles:I,placement:$,isPositioned:U,middlewareData:z}=lE({strategy:"fixed",placement:M,whileElementsMounted:(...ke)=>eE(...ke,{animationFrame:v==="always"}),elements:{reference:x.anchor},middleware:[uE({mainAxis:s+T,alignmentAxis:a}),c&&dE({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?fE():void 0,...O}),c&&hE({...O}),mE({...O,apply:({elements:ke,rects:k,availableWidth:H,availableHeight:K})=>{const{width:F,height:L}=k.reference,V=ke.floating.style;V.setProperty("--radix-popper-available-width",`${H}px`),V.setProperty("--radix-popper-available-height",`${K}px`),V.setProperty("--radix-popper-anchor-width",`${F}px`),V.setProperty("--radix-popper-anchor-height",`${L}px`)}}),j&&gE({element:j,padding:l}),NE({arrowWidth:P,arrowHeight:T}),g&&pE({strategy:"referenceHidden",...O})]}),[_,W]=n0($),D=qe(w);At(()=>{U&&(D==null||D())},[U,D]);const B=(ve=z.arrow)==null?void 0:ve.x,X=(ge=z.arrow)==null?void 0:ge.y,Y=((Q=z.arrow)==null?void 0:Q.centerOffset)!==0,[Z,le]=m.useState();return At(()=>{h&&le(window.getComputedStyle(h).zIndex)},[h]),i.jsx("div",{ref:b.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:U?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[(ue=z.transformOrigin)==null?void 0:ue.x,(xe=z.transformOrigin)==null?void 0:xe.y].join(" "),...((Me=z.hide)==null?void 0:Me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(wE,{scope:n,placedSide:_,onArrowChange:N,arrowX:B,arrowY:X,shouldHideArrow:Y,children:i.jsx(we.div,{"data-side":_,"data-align":W,...p,ref:S,style:{...p.style,animation:U?void 0:"none"}})})})});Jx.displayName=rh;var e0="PopperArrow",SE={top:"bottom",right:"left",bottom:"top",left:"right"},t0=m.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=bE(e0,r),a=SE[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(yE,{...s,ref:n,style:{...s.style,display:"block"}})})});t0.displayName=e0;function kE(e){return e!==null}var NE=e=>({name:"transformOrigin",options:e,fn(t){var x,h,y;const{placement:n,rects:r,middlewareData:s}=t,a=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=n0(n),d={start:"0%",center:"50%",end:"100%"}[f],g=(((h=s.arrow)==null?void 0:h.x)??0)+l/2,v=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let w="",p="";return u==="bottom"?(w=a?d:`${g}px`,p=`${-c}px`):u==="top"?(w=a?d:`${g}px`,p=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,p=a?d:`${v}px`):u==="left"&&(w=`${r.floating.width+c}px`,p=a?d:`${v}px`),{data:{x:w,y:p}}}});function n0(e){const[t,n="center"]=e.split("-");return[t,n]}var jE=Xx,r0=Zx,s0=Jx,o0=t0,[mc,g4]=Ct("Tooltip",[hc]),sh=hc(),i0="TooltipProvider",CE=700,Mp="tooltip.open",[EE,a0]=mc(i0),l0=e=>{const{__scopeTooltip:t,delayDuration:n=CE,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,a=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(EE,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};l0.displayName=i0;var c0="Tooltip",[v4,pc]=mc(c0),Pd="TooltipTrigger",_E=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=pc(Pd,n),o=a0(Pd,n),a=sh(n),l=m.useRef(null),c=Re(t,l,s.onTriggerChange),u=m.useRef(!1),f=m.useRef(!1),d=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),i.jsx(r0,{asChild:!0,...a,children:i.jsx(we.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:de(e.onPointerMove,g=>{g.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:de(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:de(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:de(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:de(e.onBlur,s.onClose),onClick:de(e.onClick,s.onClose)})})});_E.displayName=Pd;var TE="TooltipPortal",[y4,PE]=mc(TE,{forceMount:void 0}),So="TooltipContent",u0=m.forwardRef((e,t)=>{const n=PE(So,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,a=pc(So,e.__scopeTooltip);return i.jsx(Dt,{present:r||a.open,children:a.disableHoverableContent?i.jsx(d0,{side:s,...o,ref:t}):i.jsx(AE,{side:s,...o,ref:t})})}),AE=m.forwardRef((e,t)=>{const n=pc(So,e.__scopeTooltip),r=a0(So,e.__scopeTooltip),s=m.useRef(null),o=Re(t,s),[a,l]=m.useState(null),{trigger:c,onClose:u}=n,f=s.current,{onPointerInTransitChange:d}=r,g=m.useCallback(()=>{l(null),d(!1)},[d]),v=m.useCallback((w,p)=>{const x=w.currentTarget,h={x:w.clientX,y:w.clientY},y=OE(h,x.getBoundingClientRect()),S=LE(h,y),j=FE(p.getBoundingClientRect()),N=zE([...S,...j]);l(N),d(!0)},[d]);return m.useEffect(()=>()=>g(),[g]),m.useEffect(()=>{if(c&&f){const w=x=>v(x,f),p=x=>v(x,c);return c.addEventListener("pointerleave",w),f.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",w),f.removeEventListener("pointerleave",p)}}},[c,f,v,g]),m.useEffect(()=>{if(a){const w=p=>{const x=p.target,h={x:p.clientX,y:p.clientY},y=(c==null?void 0:c.contains(x))||(f==null?void 0:f.contains(x)),S=!$E(h,a);y?g():S&&(g(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,f,a,u,g]),i.jsx(d0,{...e,ref:o})}),[RE,IE]=mc(c0,{isInside:!1}),ME=NN("TooltipContent"),d0=m.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=e,c=pc(So,n),u=sh(n),{onClose:f}=c;return m.useEffect(()=>(document.addEventListener(Mp,f),()=>document.removeEventListener(Mp,f)),[f]),m.useEffect(()=>{if(c.trigger){const d=g=>{const v=g.target;v!=null&&v.contains(c.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,f]),i.jsx(Yi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:i.jsxs(s0,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(ME,{children:r}),i.jsx(RE,{scope:n,isInside:!0,children:i.jsx(VN,{id:c.contentId,role:"tooltip",children:s||r})})]})})});u0.displayName=So;var f0="TooltipArrow",DE=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=sh(n);return IE(f0,n).isInside?null:i.jsx(o0,{...s,...r,ref:t})});DE.displayName=f0;function OE(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function LE(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function FE(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function $E(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o].x,c=t[o].y,u=t[a].x,f=t[a].y;c>r!=f>r&&n<(u-l)*(r-c)/(f-c)+l&&(s=!s)}return s}function zE(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),BE(t)}function BE(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var UE=l0,h0=u0;const Dp=UE,WE=m.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(h0,{ref:r,sideOffset:t,className:Ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));WE.displayName=h0.displayName;function VE(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,o,a=[],l="",c=e.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),o=s.indexOf(".",1),a.push(s.substring(1,~r?r:~o?o:s.length)),l+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(l+=(~r?"?":"")+"\\"+s.substring(o))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var m0={exports:{}},p0={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ko=m;function HE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var KE=typeof Object.is=="function"?Object.is:HE,GE=ko.useState,YE=ko.useEffect,qE=ko.useLayoutEffect,XE=ko.useDebugValue;function QE(e,t){var n=t(),r=GE({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return qE(function(){s.value=n,s.getSnapshot=t,mu(s)&&o({inst:s})},[e,n,t]),YE(function(){return mu(s)&&o({inst:s}),e(function(){mu(s)&&o({inst:s})})},[e]),XE(n),n}function mu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!KE(e,n)}catch{return!0}}function ZE(e,t){return t()}var JE=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ZE:QE;p0.useSyncExternalStore=ko.useSyncExternalStore!==void 0?ko.useSyncExternalStore:JE;m0.exports=p0;var e_=m0.exports;const t_=qd.useInsertionEffect,n_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",r_=n_?m.useLayoutEffect:m.useEffect,s_=t_||r_,g0=e=>{const t=m.useRef([e,(...n)=>t[0](...n)]).current;return s_(()=>{t[0]=e}),t[1]},o_="popstate",oh="pushState",ih="replaceState",i_="hashchange",Op=[o_,oh,ih,i_],a_=e=>{for(const t of Op)addEventListener(t,e);return()=>{for(const t of Op)removeEventListener(t,e)}},v0=(e,t)=>e_.useSyncExternalStore(a_,e,t),l_=()=>location.search,c_=({ssrSearch:e=""}={})=>v0(l_,()=>e),Lp=()=>location.pathname,u_=({ssrPath:e}={})=>v0(Lp,e?()=>e:Lp),d_=(e,{replace:t=!1,state:n=null}={})=>history[t?ih:oh](n,"",e),f_=(e={})=>[u_(e),d_],Fp=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Fp]>"u"){for(const e of[oh,ih]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Fp,{value:!0})}const h_=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",y0=(e="")=>e==="/"?"":e,m_=(e,t)=>e[0]==="~"?e.slice(1):y0(t)+e,p_=(e="",t)=>h_($p(y0(e)),$p(t)),$p=e=>{try{return decodeURI(e)}catch{return e}},x0={hook:f_,searchHook:c_,parser:VE,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},w0=m.createContext(x0),gc=()=>m.useContext(w0),b0={},S0=m.createContext(b0),g_=()=>m.useContext(S0),ah=e=>{const[t,n]=e.hook(e);return[p_(e.base,t),g0((r,s)=>n(m_(r,e.base),s))]},yt=()=>ah(gc()),v_=(e,t,n,r)=>{const{pattern:s,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=o!==!1?Object.fromEntries(o.map((d,g)=>[d,c[g]])):a.groups;let f={...c};return u&&Object.assign(f,u),f})(),...r?[l]:[]]:[!1,null]},k0=({children:e,...t})=>{var f,d;const n=gc(),r=t.hook?x0:n;let s=r;const[o,a]=((f=t.ssrPath)==null?void 0:f.split("?"))??[];a&&(t.ssrSearch=a,t.ssrPath=o),t.hrefs=t.hrefs??((d=t.hook)==null?void 0:d.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let g in r){const v=g==="base"?r[g]+(t[g]||""):t[g]||r[g];c===u&&v!==u[g]&&(l.current=u={...u}),u[g]=v,v!==r[g]&&(s=u)}return m.createElement(w0.Provider,{value:s,children:e})},zp=({children:e,component:t},n)=>t?m.createElement(t,{params:n}):typeof e=="function"?e(n):e,y_=e=>{let t=m.useRef(b0),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},mt=({path:e,nest:t,match:n,...r})=>{const s=gc(),[o]=ah(s),[a,l,c]=n??v_(s.parser,e,o,t),u=y_({...g_(),...l});if(!a)return null;const f=c?m.createElement(k0,{base:c},zp(r,u)):zp(r,u);return m.createElement(S0.Provider,{value:u,children:f})},Bp=m.forwardRef((e,t)=>{const n=gc(),[r,s]=ah(n),{to:o="",href:a=o,onClick:l,asChild:c,children:u,className:f,replace:d,state:g,...v}=e,w=g0(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(l==null||l(x),x.defaultPrevented||(x.preventDefault(),s(a,e)))}),p=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:w,href:p}):m.createElement("a",{...v,onClick:w,href:p,className:f!=null&&f.call?f(r===a):f,children:u,ref:t})}),x_=ic("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ee=m.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const a=r?SN:"button";return i.jsx(a,{className:Ce(x_({variant:t,size:n,className:e})),ref:o,...s})});ee.displayName="Button";function Up({isPlaying:e,currentTime:t,duration:n,onPlay:r,onPause:s,onStop:o}){const a=l=>{const c=Math.floor(l/60),u=Math.floor(l%60);return`${c}:${u.toString().padStart(2,"0")}`};return i.jsxs("div",{className:"bg-surface border border-gray-700 rounded-lg p-3 w-full mt-[-8px] mb-[-8px] pt-[9px] pb-[9px] pl-[19px] pr-[19px] ml-[0px] mr-[0px]",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-4 md:space-x-2 mt-[-1px] mb-[-1px] pl-[0px] pr-[0px] ml-[4px] mr-[4px] pt-[3px] pb-[3px]",children:[i.jsx(ee,{variant:"ghost",size:"sm",className:"w-10 h-10 md:w-8 md:h-8 p-0 hover:bg-gray-700 touch-target",title:"Previous (P)","data-testid":"button-previous",children:i.jsx(Pj,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsx(ee,{variant:"default",size:"sm",className:"w-14 h-14 md:w-10 md:h-10 rounded-full touch-target bg-secondary hover:bg-green-700",title:"Play/Pause (Space)",onClick:e?s:r,"data-testid":"button-play-pause",children:e?i.jsx(xo,{className:"w-6 h-6 md:w-4 md:h-4"}):i.jsx(xs,{className:"w-6 h-6 md:w-4 md:h-4 ml-0.5"})}),i.jsx(ee,{variant:"ghost",size:"sm",className:"w-10 h-10 md:w-8 md:h-8 p-0 hover:bg-red-700 touch-target",title:"Stop (S)",onClick:o,"data-testid":"button-stop",children:i.jsx(Rj,{className:"w-5 h-5 md:w-4 md:h-4"})}),i.jsx(ee,{variant:"ghost",size:"sm",className:"w-10 h-10 md:w-8 md:h-8 p-0 hover:bg-gray-700 touch-target",title:"Next (N)","data-testid":"button-next",children:i.jsx(Aj,{className:"w-5 h-5 md:w-4 md:h-4"})})]}),i.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400 mt-3",children:[i.jsx("span",{className:"font-mono",children:a(t)}),i.jsx("span",{className:"font-mono",children:a(n)})]})]})}const Ts="03b80e5a-ede8-4b33-a751-6ce34ec4c700",w_="7772e5db-3868-4112-a1a9-f2669d106bf3";class b_{constructor(){this.connectedDevices=new Map,this.isSupported=!1,this.isSupported=typeof navigator<"u"&&"bluetooth"in navigator&&typeof navigator.bluetooth.requestDevice=="function",this.isSupported?console.log("🔵 Android BLE-MIDI adapter initialized"):console.log("❌ Web Bluetooth not supported - BLE-MIDI fallback unavailable")}isBluetoothSupported(){return this.isSupported}async connectDevice(t){if(!this.isSupported)throw new Error("Web Bluetooth not supported");try{console.log(`🔵 Requesting BLE MIDI device connection...${t?` (looking for: ${t})`:""}`);let n;if(t)try{console.log(`🔵 Looking for specific device: ${t}`),n=await navigator.bluetooth.requestDevice({filters:[{name:t},{namePrefix:t}],optionalServices:[Ts]}),console.log(`✅ Found specific device: ${n.name}`)}catch(l){console.log(`🔍 Specific device "${t}" not found, falling back to general discovery`),console.log("🔍 Specific device error:",{name:l.name,message:l.message})}if(!n)try{console.log("🔵 Trying name-based device discovery..."),n=await navigator.bluetooth.requestDevice({filters:[{namePrefix:"WIDI"},{namePrefix:"MIDI"},{namePrefix:"BLE"}],optionalServices:[Ts]}),console.log("✅ Found device via name filter:",n.name)}catch(l){console.log("🔵 Name-based discovery failed, trying service-based..."),console.log("🔍 Name discovery error:",{name:l.name,message:l.message});try{n=await navigator.bluetooth.requestDevice({filters:[{services:[Ts]}],optionalServices:[Ts]}),console.log("✅ Found device via service filter:",n.name)}catch(c){console.log("🔵 Service-based discovery failed, trying acceptAllDevices..."),console.log("🔍 Service discovery error:",{name:c.name,message:c.message}),n=await navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:[Ts]}),console.log("✅ Found device via acceptAllDevices:",n.name)}}if(!n.gatt)throw new Error("Device does not support GATT");console.log(`🔵 Connecting to BLE device: ${n.name}`);const r=await n.gatt.connect();console.log("🔵 GATT server connected");const s=await r.getPrimaryService(Ts);console.log("🔵 BLE-MIDI service found");const o=await s.getCharacteristic(w_);console.log("🔵 BLE-MIDI characteristic found");const a={device:n,server:r,service:s,characteristic:o,name:n.name||"Unknown BLE MIDI Device",id:n.id||`ble-${Date.now()}`};return this.connectedDevices.set(a.id,a),n.addEventListener("gattserverdisconnected",()=>{console.log(`🔵 BLE device disconnected: ${a.name}`),this.connectedDevices.delete(a.id)}),console.log(`✅ BLE-MIDI device connected: ${a.name}`),a}catch(n){const r=n;throw console.error("❌ BLE-MIDI connection failed:",{name:r.name,message:r.message,code:r.code,stack:r.stack}),r.name==="NotAllowedError"?new Error("Permission denied. Please allow Bluetooth access and try again."):r.name==="NotFoundError"?new Error("No compatible BLE MIDI devices found. Make sure your device is powered on and in pairing mode."):r.name==="SecurityError"?new Error("BLE access requires a secure connection (HTTPS). Please use HTTPS."):new Error(`BLE connection failed: ${r.message||"Unknown error"}`)}}async sendMidiCommand(t,n){const r=this.connectedDevices.get(t);if(!r)return console.error(`❌ BLE device not found: ${t}`),!1;if(!r.server.connected)return console.error(`❌ BLE device ${r.name} is not connected`),!1;try{const s=this.createBleMidiPacket(n);s.length>20&&console.warn(`⚠️ Large BLE-MIDI packet (${s.length} bytes) may fail on some devices`),console.log(`🔵 Sending BLE-MIDI packet to ${r.name}:`,{packet:Array.from(s),midiData:n,packetSize:s.length});const o=r.characteristic,a=o.properties;return a.writeWithoutResponse?(await o.writeValueWithoutResponse(s),console.log("🔵 Sent via writeValueWithoutResponse (low latency)")):a.write?(await o.writeValueWithResponse(s),console.log("🔵 Sent via writeValueWithResponse (with ACK)")):(await o.writeValue(s),console.log("🔵 Sent via legacy writeValue method")),console.log(`✅ BLE-MIDI command sent to ${r.name}:`,n),!0}catch(s){return console.error(`❌ Failed to send BLE-MIDI command to ${r.name}:`,{error:s instanceof Error?s.message:String(s),midiData:n,deviceConnected:r.server.connected}),!1}}createBleMidiPacket(t){const n=Date.now()&127|128,r=new Uint8Array(1+t.length);r[0]=n;for(let s=0;s<t.length;s++)r[s+1]=t[s];return r}getConnectedDevices(){return Array.from(this.connectedDevices.values())}async disconnectDevice(t){const n=this.connectedDevices.get(t);if(!n)return!1;try{return n.server.connected&&n.server.disconnect(),this.connectedDevices.delete(t),console.log(`🔵 Disconnected BLE device: ${n.name}`),!0}catch(r){return console.error(`❌ Failed to disconnect BLE device: ${n.name}`,r),!1}}async disconnectAllDevices(){const t=Array.from(this.connectedDevices.keys());await Promise.all(t.map(n=>this.disconnectDevice(n)))}isDeviceConnected(t){const n=this.connectedDevices.get(t);return n?n.server.connected:!1}}const Xo=new b_;function S_(){const[e,t]=m.useState([]),[n,r]=m.useState([]),[s,o]=m.useState(!1),[a,l]=m.useState(!1),[c,u]=m.useState(null),f=m.useRef(null),d=m.useRef(new Map),g=m.useRef(new Map),v=m.useRef(new Map),p=(()=>{const A=navigator.userAgent;return{isAndroid:/Android/i.test(A),isChrome:/Chrome/i.test(A)&&!/Edg|Edge/i.test(A),isEdge:/Edg|Edge/i.test(A),isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(A),isAndroidChrome:/Android/i.test(A)&&/Chrome/i.test(A)&&!/Edg|Edge/i.test(A),isAndroidEdge:/Android/i.test(A)&&/Edg|Edge/i.test(A),isAndroidBrowser:/Android/i.test(A)&&(/Chrome/i.test(A)||/Edg|Edge/i.test(A))}})();m.useCallback(A=>{var I;if(!p.isAndroidBrowser)return!1;const R=((I=A.name)==null?void 0:I.toLowerCase())||"",E=R.includes("widi")||R.includes("bluetooth")||R.includes("ble"),O=Xo.isBluetoothSupported(),b=E&&O;return b&&console.log(`🔵 Device "${A.name}" will use BLE adapter on Android`),b},[p.isAndroidBrowser]),console.log("🔍 Browser detection debug:",{userAgent:navigator.userAgent,isAndroid:p.isAndroid,isChrome:p.isChrome,isEdge:p.isEdge,isAndroidChrome:p.isAndroidChrome,isAndroidEdge:p.isAndroidEdge,isAndroidBrowser:p.isAndroidBrowser,isMobile:p.isMobile}),m.useEffect(()=>{(()=>{"requestMIDIAccess"in navigator?(o(!0),x()):(o(!1),u("Web MIDI API not supported in this browser"))})()},[]);const x=m.useCallback(async()=>{try{if(u(null),console.log("🎹 Initializing MIDI access..."),navigator.permissions)try{const R=await navigator.permissions.query({name:"midi",sysex:!0});if(console.log("🔐 MIDI Permission State:",R.state),R.state==="denied"){u("MIDI access denied. Please reset MIDI permissions in your browser settings and refresh the page."),console.error("❌ MIDI permission denied by user");return}}catch(R){console.log("🔍 Permission API not available or failed:",R)}p.isAndroidChrome?console.log("📱 Android Chrome detected - using mobile MIDI compatibility mode"):p.isAndroid&&console.log("📱 Android device detected - using mobile compatibility mode");const A=await navigator.requestMIDIAccess({sysex:!0});f.current=A,A.onstatechange=R=>{var O,b,I;const E=R;console.log("🎹 MIDI device state change:",(O=E.port)==null?void 0:O.name,(b=E.port)==null?void 0:b.state,(I=E.port)==null?void 0:I.connection),h()},setTimeout(()=>h(),100),l(!0),console.log("✅ MIDI system initialized successfully")}catch(A){let R="Failed to initialize MIDI";A instanceof Error&&(A.message.includes("SecurityError")||A.message.includes("NotAllowedError")?R="MIDI access denied. Please allow MIDI permissions and refresh the page.":A.message.includes("NotSupportedError")?R="MIDI not supported on this device or browser.":R=A.message),u(R),console.error("❌ MIDI initialization failed:",A)}},[]),h=m.useCallback(async()=>{if(!f.current)return;const A=f.current,R=[],E=new Set;console.log("🔍 Refreshing devices - access details:",{inputs:A.inputs.size,outputs:A.outputs.size,inputsType:A.inputs.constructor.name,outputsType:A.outputs.constructor.name}),A.inputs.size===0&&A.outputs.size===0&&(console.log("⚠️ No MIDI devices found. This could be due to:"),console.log("1. No physical MIDI devices connected"),console.log("2. MIDI permissions denied or blocked"),console.log("3. Browser security restrictions"),console.log("💡 To reset MIDI permissions:"),console.log("   - Chrome/Edge: Click the MIDI icon in address bar → Reset permissions"),console.log("   - Or go to Settings → Privacy → Site Settings → MIDI → Reset this site"));const O=$=>{var B;const U=($.name||"").toLowerCase(),z=((B=$.manufacturer)==null?void 0:B.toLowerCase())||"",W=["bluetooth","bt","wireless","ble","widi"].some(X=>U.includes(X)||z.includes(X));return{isUSB:!W,isBluetooth:W}};for(const $ of A.inputs.values()){const{isUSB:U,isBluetooth:z}=O($);E.add($.id);const W=!!g.current.get($.id);R.push({id:$.id,name:$.name||"Unknown Input Device",manufacturer:$.manufacturer||"Unknown",type:"input",connection:$.connection,state:$.state,isUSB:U,isBluetooth:z,usesBleAdapter:W})}for(const $ of A.outputs.values()){const{isUSB:U,isBluetooth:z}=O($);E.add($.id);const W=!!g.current.get($.id);R.push({id:$.id,name:$.name||"Unknown Output Device",manufacturer:$.manufacturer||"Unknown",type:"output",connection:$.connection,state:$.state,isUSB:U,isBluetooth:z,usesBleAdapter:W})}const b=[];d.current.forEach(($,U)=>{E.has(U)||(console.warn(`🧹 Cleaning up stale MIDI device connection: ${$.name||U}`),b.push(U))}),b.forEach($=>{const U=d.current.get($);if(U)try{U.type==="input"&&(U.onmidimessage=null)}catch(z){console.warn(`⚠️ Error cleaning up stale device: ${z}`)}d.current.delete($)}),console.log(`🎹 Found ${R.length} MIDI devices:`,R),t(R);const I=R.filter($=>$.state!=="connected"?!1:g.current.get($.id)?(console.log(`🔵 BLE device ${$.name} marked as connected via BLE adapter`),!0):d.current.get($.id)&&$.connection==="open");console.log(`🎹 Connected devices: ${I.length}/${R.length}`,I.map($=>`${$.name} (${$.type})`)),r(I)},[]),y=m.useCallback(async A=>{if(!f.current)return console.error("❌ MIDI not initialized"),!1;try{const R=f.current;let E;if(E=R.inputs.get(A)||R.outputs.get(A),!E)return console.error(`❌ Device ${A} not found`),!1;console.log(`🔵 Connecting via BLE adapter: ${E.name}`);const O=await Xo.connectDevice(E.name||void 0);return g.current.set(A,O),console.log(`✅ Connected via BLE adapter: ${E.name}`),await h(),!0}catch(R){throw console.error("❌ BLE connection failed:",R),R}},[h]),S=m.useCallback(async A=>{if(!f.current)return console.error("❌ MIDI not initialized"),!1;try{const R=f.current;let E;return E=R.inputs.get(A)||R.outputs.get(A),E?d.current.has(A)&&E.connection==="open"?(console.log(`⚠️ Device ${E.name} already connected`),!0):(E.connection!=="open"&&(console.log(`🔌 Opening MIDI device: ${E.name}`),await new Promise((O,b)=>{let I=!1;const $=p.isAndroidChrome?12e3:p.isMobile?8e3:5e3,U=setTimeout(()=>{I||(I=!0,E.onstatechange=null,b(new Error(`Connection timeout after ${$/1e3} seconds`)))},$),z=E.onstatechange;E.onstatechange=_=>{var W,D,B;I||(((W=_.port)==null?void 0:W.connection)==="open"?(I=!0,clearTimeout(U),E.onstatechange=z,O()):((D=_.port)==null?void 0:D.connection)==="closed"&&((B=_.port)==null?void 0:B.state)==="disconnected"&&(I=!0,clearTimeout(U),E.onstatechange=z,b(new Error("Device disconnected during connection"))))};try{E.open()}catch(_){I=!0,clearTimeout(U),E.onstatechange=z,b(_)}})),E.type==="input"&&(E.onmidimessage=O=>{console.log(`🎹 MIDI message from ${E.name}:`,O.data?Array.from(O.data):[]),v.current.forEach((b,I)=>{try{b(O)}catch($){console.error(`❌ Error in MIDI message listener '${I}':`,$)}})}),d.current.set(A,E),await h(),p.isAndroidChrome&&(console.log(`📱 Android Chrome: Adding 2-second stabilization delay for ${E.name}`),await new Promise(O=>setTimeout(O,2e3)),console.log(`📱 Android Chrome: Connection stabilization complete for ${E.name}`)),console.log(`✅ Connected to MIDI device: ${E.name}`),!0):(console.error(`❌ Device ${A} not found`),!1)}catch(R){return console.error(`❌ Failed to connect to device ${A}:`,R),!1}},[h]),j=m.useCallback(async A=>{try{const R=g.current.get(A);if(R){console.log(`🔵 Disconnecting BLE device: ${R.name}`);const O=await Xo.disconnectDevice(R.id);return O&&(g.current.delete(A),await h(),console.log(`✅ Disconnected BLE device: ${R.name}`)),O}const E=d.current.get(A);return E?(console.log(`🔌 Closing MIDI device: ${E.name}`),E.type==="input"&&(E.onmidimessage=null),E.connection==="open"&&await new Promise((O,b)=>{let I=!1;const $=setTimeout(()=>{I||(I=!0,E.onstatechange=null,console.warn(`⚠️ Close timeout for device: ${E.name}`),O())},3e3),U=E.onstatechange;E.onstatechange=z=>{var _;I||((_=z.port)==null?void 0:_.connection)==="closed"&&(I=!0,clearTimeout($),E.onstatechange=U,O())};try{E.close()}catch(z){I=!0,clearTimeout($),E.onstatechange=U,console.warn(`⚠️ Error closing device: ${z}`),O()}}),d.current.delete(A),await h(),console.log(`✅ Disconnected from MIDI device: ${E.name}`),!0):(console.log(`⚠️ Device ${A} not in connections map`),!1)}catch(R){return console.error(`❌ Failed to disconnect from device ${A}:`,R),!1}},[h]),N=m.useCallback(A=>{const E=A.replace(/^\[\[|\]\]$/g,"").trim().split(":");if(E.length<3)return console.error("❌ Invalid MIDI command format. Expected: [[TYPE:VALUE:CHANNEL]] or [[TYPE:VALUE:VELOCITY:CHANNEL]]"),null;let O=E[0].toUpperCase();O==="NOTE"&&(O="NOTE_ON");const b=O,I=parseInt(E[1]);let $,U;if(E.length===3)$=parseInt(E[2]),E[0].toUpperCase()==="NOTE"&&(U=127);else if(E.length===4)U=parseInt(E[2]),$=parseInt(E[3]);else return console.error("❌ Invalid MIDI command format"),null;if(isNaN($)||$<1||$>16)return console.error("❌ Invalid MIDI channel. Must be 1-16, got:",$),null;if(isNaN(I))return console.error("❌ Invalid MIDI value - not a number:",E[1]),null;switch(b){case"PC":if(I<0||I>127)return console.error("❌ Program Change value must be 0-127, got:",I),null;break;case"CC":if(I<0||I>127)return console.error("❌ Control Change controller must be 0-127, got:",I),null;break;case"NOTE_ON":case"NOTE_OFF":if(I<0||I>127)return console.error("❌ Note number must be 0-127, got:",I),null;break;default:return console.error("❌ Unsupported MIDI command type:",O),null}return U!==void 0&&(isNaN(U)||U<0||U>127)?(console.error("❌ MIDI velocity must be 0-127, got:",U),null):{type:b,value:I,channel:$,velocity:U}},[]),C=m.useCallback((A,R)=>{if(!f.current)return console.error("❌ MIDI not initialized"),!1;const E=R??Array.from(new Set([...Array.from(d.current.keys()),...Array.from(g.current.keys())]));let O=!1;return E.forEach(b=>{const I=g.current.get(b);if(I){console.log(`🔵 Sending MIDI command via BLE to ${I.name}:`,A);try{const _=A.channel-1;let W;switch(A.type){case"PC":W=[192+_,A.value];break;case"CC":const D=A.velocity!==void 0?A.velocity:127;W=[176+_,A.value,D];break;case"NOTE_ON":const B=A.velocity||127;W=[144+_,A.value,B];break;case"NOTE_OFF":const X=A.velocity||0;W=[128+_,A.value,X];break;default:console.error("❌ Unsupported MIDI command type:",A.type);return}Xo.sendMidiCommand(I.id,W).then(D=>{D?console.log(`✅ BLE MIDI command sent to ${I.name}:`,W):console.error(`❌ Failed to send BLE MIDI command to ${I.name}`)}),O=!0}catch(_){console.error(`❌ BLE MIDI command error for ${I.name}:`,_)}return}const $=d.current.get(b);if(!$||$.type!=="output")return;const U=$,z=A.channel-1;try{let _;switch(A.type){case"PC":_=[192+z,A.value];break;case"CC":const W=A.velocity!==void 0?A.velocity:127;_=[176+z,A.value,W];break;case"NOTE_ON":const D=A.velocity||127;_=[144+z,A.value,D];break;case"NOTE_OFF":const B=A.velocity||0;_=[128+z,A.value,B];break;default:console.error("❌ Unsupported MIDI command type:",A.type);return}if(p.isAndroidBrowser){if(console.log(`📱 Android ${p.isAndroidEdge?"Edge":"Chrome"} MIDI Debug:`,{deviceName:$.name,deviceId:$.id,deviceConnection:$.connection,deviceState:$.state,commandType:A.type,midiData:_,timestamp:Date.now(),outputType:typeof U,hasOutputSend:typeof U.send=="function",deviceManufacturer:$.manufacturer,browserType:p.isAndroidEdge?"Edge":"Chrome"}),$.connection!=="open"){console.error(`📱 Android ${p.isAndroidEdge?"Edge":"Chrome"} MIDI Error: Device ${$.name} connection is ${$.connection}, not open!`);return}if($.state!=="connected"){console.error(`📱 Android ${p.isAndroidEdge?"Edge":"Chrome"} MIDI Error: Device ${$.name} state is ${$.state}, not connected!`);return}}try{U.send(_),console.log(`🎹 Sent ${A.type} command to ${$.name}:`,_),p.isAndroidBrowser&&(setTimeout(()=>{console.log(`📱 Android ${p.isAndroidEdge?"Edge":"Chrome"}: MIDI transmission attempt completed for ${$.name}`),console.log("📱 Device status check:",{name:$.name,connection:$.connection,state:$.state,timestamp:Date.now(),browserType:p.isAndroidEdge?"Edge":"Chrome"})},50),setTimeout(()=>{console.log(`📱 Android ${p.isAndroidEdge?"Edge":"Chrome"}: Post-transmission validation for ${$.name} - checking if command was queued/buffered`)},200))}catch(W){console.error(`❌ MIDI send() failed for ${$.name}:`,W),p.isAndroidBrowser&&console.error(`📱 Android ${p.isAndroidEdge?"Edge":"Chrome"}: MIDI send failure details:`,{error:W instanceof Error?W.message:String(W),deviceName:$.name,deviceConnection:$.connection,deviceState:$.state,commandData:_,browserType:p.isAndroidEdge?"Edge":"Chrome"});return}O=!0}catch(_){console.error(`❌ Failed to send MIDI command to ${$.name}:`,_)}}),O},[]),P=m.useCallback(async()=>{await h()},[h]),T=m.useCallback((A,R)=>{console.log(`🎹 Registering MIDI message listener: ${A}`),v.current.set(A,R)},[]),M=m.useCallback(A=>{console.log(`🎹 Unregistering MIDI message listener: ${A}`),v.current.delete(A)},[]);return{devices:e,connectedDevices:n,isSupported:s,isInitialized:a,error:c,connectDevice:S,connectBleDevice:y,disconnectDevice:j,sendMidiCommand:C,parseMidiCommand:N,refreshDevices:P,shouldUseBleAdapter:A=>{var b;if(!p.isAndroidBrowser)return!1;const R=((b=A.name)==null?void 0:b.toLowerCase())||"",E=R.includes("widi")||R.includes("bluetooth")||R.includes("ble"),O=Xo.isBluetoothSupported();return E&&O},registerMessageListener:T,unregisterMessageListener:M}}const N0=m.createContext(null);function k_({children:e}){const t=S_();return i.jsx(N0.Provider,{value:t,children:e})}function lh(){const e=m.useContext(N0);if(!e)throw new Error("useMidi must be used within a MidiProvider");return e}function j0({song:e,currentTime:t,duration:n,onEditLyrics:r,isPlaying:s,allowMidi:o=!0}){const a=m.useRef(null),{sendMidiCommand:l,parseMidiCommand:c,connectedDevices:u}=lh(),[f,d]=m.useState(new Set),[g,v]=m.useState(0),[w,p]=m.useState(null),[x,h]=m.useState(()=>{const b=localStorage.getItem("lyrics-font-size");return b?parseInt(b):18}),[y,S]=m.useState(()=>{const b=localStorage.getItem("lyrics-scroll-speed");return b?parseFloat(b):1}),[j,N]=m.useState(()=>localStorage.getItem("lyrics-auto-scroll")!=="false");m.useEffect(()=>{a.current&&e&&(a.current.scrollTop=0)},[e==null?void 0:e.id]),m.useEffect(()=>{const b=()=>{const U=parseInt(localStorage.getItem("lyrics-font-size")||"18");h(U)},I=()=>{const U=parseFloat(localStorage.getItem("lyrics-scroll-speed")||"1.0");S(U)},$=()=>{const U=localStorage.getItem("lyrics-auto-scroll")!=="false";N(U)};return window.addEventListener("lyrics-font-change",b),window.addEventListener("lyrics-scroll-change",I),window.addEventListener("lyrics-auto-scroll-change",$),()=>{window.removeEventListener("lyrics-font-change",b),window.removeEventListener("lyrics-scroll-change",I),window.removeEventListener("lyrics-auto-scroll-change",$)}},[]);const C=b=>{const I=/\[\[([A-Za-z_]+:[0-9]+(?::[0-9]+)?(?::[0-9]+)?)\]\]/g,$=[];let U=b,z;for(;(z=I.exec(b))!==null;)$.push(z[0]),U=U.replace(z[0],"").trim();return{displayText:U,midiCommands:$}},P=b=>{if(!b)return[];const I=b.split(`
`),$=[];let U=0;for(const z of I){const _=z.trim();if(!_)continue;const W=_.match(/^\[(\d{1,2}):(\d{2})\]/);if(W){const D=parseInt(W[1]),B=parseInt(W[2]),X=D*60+B;let Y=_.substring(W[0].length).trim();if(Y){const{displayText:Z,midiCommands:le}=C(Y);$.push({timestamp:X,text:Y,displayText:Z,midiCommands:le}),U=X+4}}else{let D=_;if(D){const{displayText:B,midiCommands:X}=C(D);$.push({timestamp:U,text:D,displayText:B,midiCommands:X}),U+=4}}}return $.sort((z,_)=>z.timestamp-_.timestamp)},T=e!=null&&e.lyrics?P(e.lyrics):[],M=m.useCallback(b=>{if(!b)return[];const I=b.split(`
`),$=[];for(const U of I){const z=U.trim();if(!z)continue;if(!/^\[\d{1,2}:\d{2}\]/.test(z)){const{midiCommands:W}=C(z);$.push(...W)}}return $},[]),A=e!=null&&e.lyrics?e.lyrics.split(`
`).some(b=>{const I=b.trim();return/^\[\d{1,2}:\d{2}\]/.test(I)}):!1,E=(()=>{if(T.length===0)return[];const b=Array.from(new Set(T.map($=>$.timestamp))).sort(($,U)=>$-U);let I=-1;for(let $=0;$<b.length;$++){const U=b[$],z=b[$+1];if(U<=t&&(!z||z>t)){I=U;break}}return I>=0?T.filter($=>$.timestamp===I):[]})(),O=E.length>0?T.findIndex(b=>b===E[0]):-1;return m.useEffect(()=>{!o||!s||E.length===0||T.length===0||E.forEach((b,I)=>{if(b.midiCommands.length===0)return;const $=`${b.timestamp}_${T.indexOf(b)}`;f.has($)||(b.midiCommands.forEach((U,z)=>{const _=c(U);_?l(_)?console.log(`🎹 Executed MIDI command from lyrics: ${U} at ${b.timestamp}s (line ${I+1}/${E.length})`):console.warn(`❌ Failed to execute MIDI command: ${U}`):console.warn(`❌ Invalid MIDI command format: ${U}`)}),d(U=>new Set(U).add($)))})},[E,s,A,T,u,l,c,f]),m.useEffect(()=>{if(!o||!(e!=null&&e.id)||!(e!=null&&e.lyrics)||w===e.id||u.filter($=>$.type==="output").length===0)return;const I=M(e.lyrics);I.length!==0&&(console.log(`🎵 Executing ${I.length} setup MIDI commands for song: ${e.title||"Untitled"}`),I.forEach(($,U)=>{const z=c($);z?l(z)?console.log(`🎹 Executed setup MIDI command: ${$}`):console.warn(`❌ Failed to execute setup MIDI command: ${$}`):console.warn(`❌ Invalid setup MIDI command format: ${$}`)}),p(e.id))},[e==null?void 0:e.id,e==null?void 0:e.lyrics,u,l,c,M,w]),m.useEffect(()=>{d(new Set),p(null)},[e==null?void 0:e.id]),m.useEffect(()=>{const b=t-g,I=b<-1,$=Math.abs(b)>5&&g>0,U=t<2;(I||$||U)&&(console.log(`🔄 Seek detected: ${g.toFixed(1)}s → ${t.toFixed(1)}s, resetting MIDI commands`),d(new Set)),v(t)},[t,g]),m.useEffect(()=>{!s&&a.current&&(a.current.scrollTop=0)},[s]),m.useEffect(()=>{if(A&&O>=0&&a.current){const b=a.current,I=b.querySelector(`[data-line="${O}"]`);if(I&&b){const $=b.getBoundingClientRect(),U=I.getBoundingClientRect(),z=U.top-$.top,_=b.clientHeight,W=b.scrollTop+z-_/2+U.height/2;b.scrollTo({top:W,behavior:"smooth"})}}},[O,A]),m.useEffect(()=>{let b=null;if(!A&&T.length>0&&a.current&&j&&t>0){const I=a.current,U=Math.max(20,50/y),z=.5;b=setInterval(()=>{if(I&&t>0){const _=I.scrollHeight,W=I.clientHeight,D=Math.max(0,_-W);I.scrollTop<D&&(I.scrollTop+=z)}},U)}return()=>{b&&clearInterval(b)}},[t>0,A,T.length,y,j]),e?i.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#111827",borderRadius:"8px",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",contain:"layout style paint"},children:i.jsx("div",{ref:a,className:"mobile-lyrics-spacing",style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:"24px",backgroundColor:"#1f2937",position:"relative",contain:"layout style paint",scrollBehavior:"smooth"},"data-testid":"lyrics-container",children:e!=null&&e.lyrics?i.jsxs("div",{className:A?"space-y-6":"space-y-4",style:{fontSize:`${x}px`},children:[T.map((b,I)=>{if(!b.displayText.trim())return null;const $=I===O,U=b.timestamp<t&&!$,z=b.timestamp>t;return i.jsx("div",{"data-line":I,className:`transition-all duration-300 leading-relaxed ${A?$?"text-white bg-blue-600/20 px-4 py-2 rounded-lg border-l-4 border-blue-500 font-medium":U?"text-gray-500":z?"text-gray-400":"text-gray-300":$?"text-white bg-blue-600/20 px-4 py-2 rounded-lg border-l-4 border-blue-500 font-medium":"text-gray-300"}`,"data-testid":`lyrics-line-${I}`,id:A?void 0:`auto-scroll-line-${I}`,children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"flex-1",children:b.displayText}),b.midiCommands.length>0&&i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[i.jsx(Vn,{className:`h-3 w-3 ${A?$?"text-blue-300":U?"text-gray-600":"text-gray-500":$?"text-blue-300":"text-gray-500"}`}),i.jsx("span",{className:`text-xs font-mono ${A?$?"text-blue-300":U?"text-gray-600":"text-gray-500":$?"text-blue-300":"text-gray-500"}`,children:b.midiCommands.length})]})]})},I)}),!A&&i.jsx("div",{style:{height:"50vh"}})]}):i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx("p",{children:"No lyrics available"}),r&&i.jsx(ee,{variant:"outline",className:"mt-4",onClick:r,"data-testid":"button-add-lyrics",children:"Add Lyrics"})]})})}):i.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-800 rounded-lg",children:i.jsx("p",{className:"text-gray-400",children:"No song selected"})})}function Wp({onEditLyrics:e,song:t}){const[n,r]=m.useState(()=>parseInt(localStorage.getItem("lyrics-font-size")||"18")),[s,o]=m.useState(()=>parseFloat(localStorage.getItem("lyrics-scroll-speed")||"1.0")),[a,l]=m.useState(()=>localStorage.getItem("lyrics-auto-scroll")!=="false"),c=t!=null&&t.lyrics?/\[(\d{1,2}):(\d{2})\]/.test(t.lyrics):!1,u=g=>{const v=Math.max(12,Math.min(32,n+g));r(v),localStorage.setItem("lyrics-font-size",v.toString()),window.dispatchEvent(new Event("lyrics-font-change"))},f=g=>{const v=Math.max(.1,Math.min(2,s+g));o(v),localStorage.setItem("lyrics-scroll-speed",v.toString()),window.dispatchEvent(new Event("lyrics-scroll-change"))},d=()=>{const g=!a;l(g),localStorage.setItem("lyrics-auto-scroll",g.toString()),window.dispatchEvent(new Event("lyrics-auto-scroll-change"))};return i.jsxs("div",{className:"flex items-center space-x-2",children:[!c&&i.jsx("button",{className:`p-1 h-7 w-8 rounded text-white text-xs flex items-center justify-center ${a?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 hover:bg-gray-600"}`,title:"Toggle Auto-Scroll",onClick:d,children:a?"⏸":"▶"}),!c&&a&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 h-7 w-7 rounded text-white text-xs flex items-center justify-center",title:"Slower Auto-Scroll (Longer Timer Intervals)",onClick:()=>f(-.1),children:"⬇"}),i.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-gray-700 text-gray-300 min-w-[40px] text-center",children:[s.toFixed(1),"x"]}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 h-7 w-7 rounded text-white text-xs flex items-center justify-center",title:"Faster Auto-Scroll (Shorter Timer Intervals)",onClick:()=>f(.1),children:"⬆"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 h-7 w-7 rounded text-white text-xs flex items-center justify-center",title:"Decrease Font Size",onClick:()=>u(-2),children:"A-"}),i.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-700 text-gray-300 min-w-[32px] text-center",children:n}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 h-7 w-7 rounded text-white text-xs flex items-center justify-center",title:"Increase Font Size",onClick:()=>u(2),children:"A+"})]}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 h-7 w-7 rounded text-white text-xs flex items-center justify-center",title:"Edit Lyrics",onClick:e,children:"✎"})]})}var ch="Progress",uh=100,[N_,x4]=Ct(ch),[j_,C_]=N_(ch),C0=m.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=E_,...a}=e;(s||s===0)&&!Vp(s)&&console.error(__(`${s}`,"Progress"));const l=Vp(s)?s:uh;r!==null&&!Hp(r,l)&&console.error(T_(`${r}`,"Progress"));const c=Hp(r,l)?r:null,u=Tl(c)?o(c,l):void 0;return i.jsx(j_,{scope:n,value:c,max:l,children:i.jsx(we.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Tl(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":T0(c,l),"data-value":c??void 0,"data-max":l,...a,ref:t})})});C0.displayName=ch;var E0="ProgressIndicator",_0=m.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=C_(E0,n);return i.jsx(we.div,{"data-state":T0(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});_0.displayName=E0;function E_(e,t){return`${Math.round(e/t*100)}%`}function T0(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Tl(e){return typeof e=="number"}function Vp(e){return Tl(e)&&!isNaN(e)&&e>0}function Hp(e,t){return Tl(e)&&!isNaN(e)&&e<=t&&e>=0}function __(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${uh}\`.`}function T_(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${uh} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var P0=C0,P_=_0;const dh=m.forwardRef(({className:e,value:t,...n},r)=>i.jsx(P0,{ref:r,className:Ce("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:i.jsx(P_,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));dh.displayName=P0.displayName;function A_({isAudioEngineOnline:e,latency:t,isHost:n=!1,isViewer:r=!1,currentRoom:s=null,exportTask:o}){return i.jsxs("div",{className:"bg-surface rounded-xl p-4 border border-gray-700","data-testid":"status-bar",children:[o&&i.jsxs("div",{className:"mb-3 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg","data-testid":"status-export",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("span",{className:"text-sm font-medium text-blue-300",children:"Exporting Library"}),i.jsxs("span",{className:"text-sm text-blue-200","data-testid":"text-export-percentage",children:[o.progress,"%"]})]}),o.onCancel&&i.jsx(ee,{variant:"ghost",size:"sm",onClick:o.onCancel,className:"h-6 w-6 p-0 hover:bg-red-500/20 text-gray-400 hover:text-red-300","data-testid":"button-cancel-export",children:i.jsx(cc,{className:"h-3 w-3"})})]}),i.jsx(dh,{value:o.progress,className:"w-full h-2 mb-1","data-testid":"progress-export"}),i.jsx("div",{className:"text-xs text-blue-300/70",children:o.status})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${e?"bg-secondary":"bg-error"}`}),i.jsxs("span",{className:"text-sm",children:["Audio Engine: ",i.jsx("span",{className:e?"text-secondary":"text-error",children:e?"Online":"Offline"})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsxs("span",{className:"text-sm text-gray-400",children:["Latency: ",i.jsxs("span",{className:"text-secondary",children:[t.toFixed(1),"ms"]})]})}),(n||r)&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-purple-500":"bg-blue-500"}`}),i.jsxs("span",{className:"text-sm",children:["Broadcast: ",i.jsx("span",{className:n?"text-purple-400":"text-blue-400",children:n?"🎭 Broadcasting":"📺 Viewing"}),s&&i.jsxs("span",{className:"text-gray-400 ml-1",children:['("',s,'")']})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[i.jsx("span",{children:"Buffer: 256 samples"}),i.jsx("span",{children:"Sample Rate: 48kHz"}),i.jsx("span",{children:"Bit Depth: 24-bit"})]})]})]})}var R_="Label",A0=m.forwardRef((e,t)=>i.jsx(we.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));A0.displayName=R_;var R0=A0;const I_=ic("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),rt=m.forwardRef(({className:e,...t},n)=>i.jsx(R0,{ref:n,className:Ce(I_(),e),...t}));rt.displayName=R0.displayName;const je=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ce("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));je.displayName="Card";const Oe=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ce("flex flex-col space-y-1.5 p-6",e),...t}));Oe.displayName="CardHeader";const Le=m.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:Ce("text-2xl font-semibold leading-none tracking-tight",e),...t}));Le.displayName="CardTitle";const Rr=m.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:Ce("text-sm text-muted-foreground",e),...t}));Rr.displayName="CardDescription";const Pe=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ce("p-6 pt-0",e),...t}));Pe.displayName="CardContent";const Xa=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Ce("flex items-center p-6 pt-0",e),...t}));Xa.displayName="CardFooter";class cn{constructor(){this.dbName="MusicAppStorage",this.dbVersion=1,this.db=null,this.audioFiles=new Map,this.blobUrls=new Map,this.initializationPromise=null,this.config={version:"1.0.0",lastUpdated:Date.now(),songs:{},waveforms:{}},this.initializationPromise=this.initialize().then(()=>(console.log("✅ BrowserFileSystem fully initialized with config loaded"),!0)).catch(t=>(console.error("❌ Failed to auto-initialize BrowserFileSystem:",t),this.initializeDB().then(()=>(console.log("✅ BrowserFileSystem database fallback initialized"),!0)).catch(n=>(console.error("❌ Even fallback initialization failed:",n),!1))))}static getInstance(){return cn.instance||(cn.instance=new cn),cn.instance}async isAlreadyInitialized(){try{return localStorage.getItem("browserfs-initialized")==="true"}catch{return!1}}async initialize(){try{return await this.initializeDB(),await this.loadConfig(),localStorage.setItem("browserfs-initialized","true"),console.log("Browser file system initialized successfully"),!0}catch(t){return console.error("Failed to initialize browser file system:",t),!1}}async initializeDB(){return new Promise((t,n)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>n(r.error),r.onsuccess=()=>{this.db=r.result,t()},r.onupgradeneeded=s=>{const o=s.target.result;o.objectStoreNames.contains("audioFiles")||o.createObjectStore("audioFiles",{keyPath:"id"}),o.objectStoreNames.contains("config")||o.createObjectStore("config",{keyPath:"key"})}})}async loadConfig(){if(this.db)try{const r=this.db.transaction(["config"],"readonly").objectStore("config").get("appConfig"),s=await new Promise((o,a)=>{r.onsuccess=()=>o(r.result),r.onerror=()=>a(r.error)});s&&s.data&&(this.config=s.data,console.log(`Loaded config with ${Object.keys(this.config.songs).length} songs`))}catch{console.log("No existing config found, using defaults")}}async saveConfig(){if(this.db)try{this.config.lastUpdated=Date.now(),await this.db.transaction(["config"],"readwrite").objectStore("config").put({key:"appConfig",data:this.config}),console.log("Config saved successfully")}catch(t){console.error("Failed to save config:",t)}}async addAudioFile(t,n,r,s){if(console.log(`🔄 BrowserFS.addAudioFile: Storing ${s.name} as track ${n}`),console.log(`🗃️ Database initialized: ${!!this.db}`),!this.db)return console.log("❌ Database not initialized, cannot store file"),!1;try{const o=await s.arrayBuffer(),l=this.db.transaction(["audioFiles"],"readwrite").objectStore("audioFiles");await new Promise((d,g)=>{const v=l.put({id:n,songId:t,name:r,fileName:s.name,fileData:o,size:s.size,type:s.type,lastModified:s.lastModified||Date.now()});v.onsuccess=()=>{console.log(`✅ IndexedDB storage successful for ${n}`),d(v.result)},v.onerror=()=>{console.log(`❌ IndexedDB storage failed for ${n}:`,v.error),g(v.error)}}),this.audioFiles.set(n,s),console.log(`✅ Memory cache updated for ${n}`);const c=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),u=/Surface/i.test(navigator.userAgent),f=/Edg|Edge/.test(navigator.userAgent);return(c||u||f&&/Windows/.test(navigator.userAgent))&&(console.log(`📱 ${u?"Surface tablet":c?"Mobile device":"Edge on Windows"}: clearing memory cache for ${n} to save memory`),this.audioFiles.delete(n)),console.log(`✅ Audio file stored: ${s.name} for track: ${r}`),!0}catch(o){return console.error(`❌ Failed to store audio file for ${n}:`,o),!1}}async getAudioFile(t){if(console.log(`🔍 BrowserFS.getAudioFile: Looking for track ${t}`),console.log(`💾 Memory cache has: [${Array.from(this.audioFiles.keys()).join(", ")}]`),console.log(`🗃️ Database initialized: ${!!this.db}`),this.initializationPromise){console.log(`⏳ Waiting for database initialization for track ${t}`);try{await this.initializationPromise,console.log(`✅ Database initialization completed for track ${t}`)}catch(n){return console.error(`❌ Database initialization failed for track ${t}:`,n),null}}if(this.audioFiles.has(t))return console.log(`✅ Found in memory cache: ${t}`),this.audioFiles.get(t);if(console.log(`💾 Not in memory cache, checking IndexedDB for ${t}`),!this.db)return console.log(`❌ Database still not initialized for track ${t} after waiting`),null;try{const s=this.db.transaction(["audioFiles"],"readonly").objectStore("audioFiles").get(t),o=await new Promise((a,l)=>{s.onsuccess=()=>a(s.result),s.onerror=()=>l(s.error)});if(o&&o.fileData){console.log(`✅ Found in IndexedDB: ${t} (${o.fileName})`);const a=new File([o.fileData],o.fileName,{type:o.type,lastModified:o.lastModified});return this.audioFiles.set(t,a),a}return console.log(`❌ Not found in IndexedDB: ${t}`),null}catch(n){return console.error(`❌ Failed to load audio file for ${t}:`,n),null}}async getAudioUrl(t){if(this.blobUrls.has(t))return this.blobUrls.get(t);const n=await this.getAudioFile(t);if(!n)return null;try{const r=URL.createObjectURL(n);return this.blobUrls.set(t,r),r}catch(r){return console.error("Failed to create blob URL:",r),null}}async saveSong(t,n){this.config.songs[t]={...n,lastModified:Date.now()},await this.saveConfig()}getSong(t){return this.config.songs[t]||null}getAllSongs(){return Object.entries(this.config.songs).map(([t,n])=>({id:t,...n}))}async deleteSong(t){try{if(delete this.config.songs[t],delete this.config.waveforms[t],this.db){const r=this.db.transaction(["audioFiles"],"readwrite").objectStore("audioFiles"),s=await new Promise((o,a)=>{const l=r.getAll();l.onsuccess=()=>o(l.result),l.onerror=()=>a(l.error)});for(const o of s)o.songId===t&&(await r.delete(o.id),this.audioFiles.delete(o.id),this.blobUrls.has(o.id)&&(URL.revokeObjectURL(this.blobUrls.get(o.id)),this.blobUrls.delete(o.id)))}return await this.saveConfig(),console.log(`Song deleted: ${t}`),!0}catch(n){return console.error("Failed to delete song:",n),!1}}async saveWaveform(t,n){this.config.waveforms[t]=n,await this.saveConfig()}getWaveform(t){return this.config.waveforms[t]||null}isReady(){return!!this.db}getStatus(){const t=Object.keys(this.config.songs).length,n=this.audioFiles.size;return`Ready - ${t} songs, ${n} audio files cached`}async showFilePicker(t=".mp3,.wav,.m4a,.ogg"){return new Promise(n=>{const r=document.createElement("input");r.type="file",r.accept=t,r.multiple=!0,r.onchange=()=>{n(r.files)},r.oncancel=()=>{n(null)},r.click()})}getTrackFileInfo(t){const n=this.audioFiles.get(t);return n?{fileName:n.name,size:n.size,type:n.type,lastModified:n.lastModified}:null}cleanup(){this.blobUrls.forEach(t=>{URL.revokeObjectURL(t)}),this.blobUrls.clear()}}const pu="music-app-audio-files";class $n{constructor(){this.audioFiles=new Map,this.fileObjects=new Map,this.blobUrls=new Map,this.fileCache=new Map,this.browserFS=cn.getInstance()}static getInstance(){return $n.instance||($n.instance=new $n,$n.instance.loadFromStorage()),$n.instance}async storeAudioFile(t,n,r,s){try{if(console.log(`Storing audio file in browser: ${n.name}, size: ${n.size} bytes`),!r)throw new Error("Track information required for storage");if(!await this.browserFS.addAudioFile(r.songId,t,r.name,n))throw new Error("Failed to save file to browser storage");this.fileObjects.set(t,n);const a={id:t,name:n.name,filePath:`browser://${r.songId}/${t}`,mimeType:n.type,size:n.size,lastModified:n.lastModified||Date.now()};this.audioFiles.set(t,a),this.saveToStorage(),console.log(`Successfully stored audio file for track: ${r.name} (${Math.round(n.size/1024)}KB)`)}catch(o){throw console.error("Failed to store audio file:",o),o}}async getAudioUrl(t){console.log(`🔍 Requesting audio URL for track: ${t}`),console.log(`📂 Available audio files (${this.audioFiles.size}):`,Array.from(this.audioFiles.keys())),console.log(`💾 Memory cache files (${this.fileObjects.size}):`,Array.from(this.fileObjects.keys()));try{const r=await this.browserFS.getAudioUrl(t);if(r)return console.log(`✅ Got audio URL from browser storage for track: ${t}`),r}catch(r){console.error(`❌ Error getting URL from browser storage for track ${t}:`,r)}const n=this.fileObjects.get(t);if(!n)return console.warn(`⚠️ Audio file not found for track: ${t}`),console.log("🔍 Checking if browser file system has any files..."),console.log("💡 Audio files are stored locally when you record or add tracks"),console.log("🎵 Record new audio or add existing audio files to enable playback"),null;try{const r=URL.createObjectURL(n);return this.blobUrls.set(t,r),console.log(`Created fallback audio URL for track: ${t}`),r}catch(r){return console.error(`Failed to create audio URL for track: ${t}`,r),null}}hasAudioFile(t){return this.fileObjects.has(t)}removeAudioFile(t){const n=this.blobUrls.get(t);n&&(URL.revokeObjectURL(n),this.blobUrls.delete(t)),this.audioFiles.delete(t),this.fileObjects.delete(t),this.saveToStorage(),console.log(`Removed audio file for track: ${t}`)}getAllStoredFiles(){return Array.from(this.audioFiles.values())}async getAudioFileData(t){let n=this.fileObjects.get(t);if(!n){const r=this.audioFiles.get(t);r&&(n=this.fileCache.get(r.filePath),n&&this.fileObjects.set(t,n))}if(!n)return null;try{return await n.arrayBuffer()}catch(r){return console.error(`Failed to get audio data for track: ${t}`,r),null}}loadFromStorage(){try{const t=localStorage.getItem(pu);if(t){const n=JSON.parse(t);this.audioFiles=new Map(n),console.log(`Loaded ${this.audioFiles.size} audio file path references from localStorage`),this.autoLoadStoredFiles(),this.displayExpectedFiles()}else console.log("No stored audio file references found")}catch(t){console.error("Failed to load audio file references from storage:",t),this.audioFiles=new Map}}async autoLoadStoredFiles(){console.log(`🔄 Auto-loading ${this.audioFiles.size} stored audio files...`);let t=0;const n=Array.from(this.audioFiles.keys());for(const r of n)try{await this.browserFS.getAudioUrl(r)&&(t++,console.log(`✅ Auto-loaded audio file for track: ${r}`))}catch(s){console.warn(`⚠️ Failed to auto-load audio file for track: ${r}`,s)}console.log(`✅ Auto-loaded ${t}/${this.audioFiles.size} audio files into cache`)}displayExpectedFiles(){if(this.audioFiles.size>0){console.log("Expected audio files for tracks:");const t=Array.from(this.audioFiles.entries());for(const[n,r]of t)console.log(`  - ${r.name} (${r.filePath})`);console.log("These files will be loaded when you select them through the file picker.")}}storeTrackReference(t,n){const r={id:t,name:n.name,filePath:n.filePath,mimeType:n.mimeType,size:n.size,lastModified:n.lastModified};this.audioFiles.set(t,r),this.saveToStorage(),console.log(`Stored track reference: ${t} -> ${n.name}`)}registerFoundFile(t,n){this.fileCache.set(t,n),console.log(`Registered file: ${n.name} at path: ${t}`);const r=Array.from(this.audioFiles.entries());for(const[s,o]of r)if(o.filePath===t||o.name===n.name){this.fileObjects.set(s,n),console.log(`Connected file ${n.name} to track: ${s}`);const a=URL.createObjectURL(n);this.blobUrls.set(s,a)}}registerFiles(t){console.log(`Attempting to register ${t.length} files`);const n=Array.from(this.audioFiles.values());let r=0;return Array.from(t).forEach(s=>{const o=s.name.replace(/\.(mp3|wav|ogg|m4a)$/i,""),a=n.find(l=>l.name.replace(/\.(mp3|wav|ogg|m4a)$/i,"")===o||l.name===s.name);if(a){console.log(`Registering file: ${s.name} for track: ${a.id}`),this.fileObjects.set(a.id,s),this.fileCache.set(s.name,s),this.fileCache.set(a.filePath,s);const l=URL.createObjectURL(s);this.blobUrls.set(a.id,l),r++}else console.log(`File ${s.name} does not match any expected tracks`)}),console.log(`Registered ${r} out of ${n.length} expected files`),{registered:r,expectedCount:n.length}}saveToStorage(){try{const t=Array.from(this.audioFiles.entries()),n=JSON.stringify(t);localStorage.setItem(pu,n),console.log(`Saved ${t.length} audio file path references to localStorage (${Math.round(n.length/1024)}KB)`)}catch(t){console.error("Failed to save audio file references:",t)}}clearAll(){const t=Array.from(this.blobUrls.values());for(const n of t)URL.revokeObjectURL(n);this.audioFiles.clear(),this.fileObjects.clear(),this.blobUrls.clear(),this.fileCache.clear(),localStorage.removeItem(pu),console.log("Cleared all audio file references and cache")}}const M_=$n.getInstance(),D_="lpp_songs";class Fe{static getSongKey(t){return`${D_}_${t}`}static getAllSongs(t){try{const n=localStorage.getItem(this.getSongKey(t));return n?JSON.parse(n):[]}catch(n){return console.error("Error loading songs from localStorage:",n),[]}}static getSong(t,n){return this.getAllSongs(t).find(s=>s.id===n)}static saveSongs(t,n){try{localStorage.setItem(this.getSongKey(t),JSON.stringify(n))}catch(r){throw console.error("Error saving songs to localStorage:",r),r}}static addSong(t,n){const r=this.getAllSongs(t),s={id:crypto.randomUUID(),...n,tracks:[],waveformGenerated:!1,createdAt:new Date().toISOString()};return r.push(s),this.saveSongs(t,r),s}static updateSong(t,n,r){const s=this.getAllSongs(t),o=s.findIndex(a=>a.id===n);return o===-1?null:(s[o]={...s[o],...r},this.saveSongs(t,s),s[o])}static deleteSong(t,n){const r=this.getAllSongs(t),s=r.filter(o=>o.id!==n);return s.length===r.length?!1:(this.saveSongs(t,s),!0)}static addTrack(t,n,r){try{const s=this.getAllSongs(t),o=s.findIndex(l=>l.id===n);if(o===-1)return console.error("LocalSongStorage.addTrack: Song not found:",n),!1;const a={id:crypto.randomUUID(),songId:n,name:r.name||"",trackNumber:r.trackNumber||1,audioUrl:r.audioUrl||"",localFileName:r.localFileName||null,audioData:r.audioData||null,mimeType:r.mimeType||null,fileSize:r.fileSize||null,volume:r.volume||1,balance:r.balance||0,isMuted:r.isMuted||!1,isSolo:r.isSolo||!1,muteRegions:r.muteRegions||[],filePath:r.filePath||null,...r,createdAt:new Date().toISOString()};return s[o].tracks.push(a),this.saveSongs(t,s),console.log("LocalSongStorage.addTrack: Track added successfully:",a.id),a}catch(s){return console.error("LocalSongStorage.addTrack: Error adding track:",s),!1}}static getTracks(t,n){const r=this.getSong(t,n);return(r==null?void 0:r.tracks)||[]}static deleteTrack(t,n,r){const s=this.getAllSongs(t),o=s.findIndex(l=>l.id===n);if(o===-1)return!1;const a=s[o].tracks.length;return s[o].tracks=s[o].tracks.filter(l=>l.id!==r),s[o].tracks.length===a?!1:(this.saveSongs(t,s),!0)}static updateTrack(t,n,r,s){const o=this.getAllSongs(t),a=o.findIndex(c=>c.id===n);if(a===-1)return null;const l=o[a].tracks.findIndex(c=>c.id===r);return l===-1?null:(o[a].tracks[l]={...o[a].tracks[l],...s},this.saveSongs(t,o),o[a].tracks[l])}static addTrackToSong(t,n,r){const s=this.getSong(t,n);if(!s)return null;const o={id:crypto.randomUUID(),songId:n,...r},a={...s,tracks:[...s.tracks,o]};return this.updateSong(t,n,a)}static removeTrackFromSong(t,n,r){const s=this.getSong(t,n);if(!s)return null;const o={...s,tracks:s.tracks.filter(a=>a.id!==r)};return this.updateSong(t,n,o)}static addMuteRegion(t,n,r,s){const o=this.getAllSongs(t),a=o.findIndex(f=>f.id===n);if(a===-1)return null;const l=o[a].tracks.findIndex(f=>f.id===r);if(l===-1)return null;const c={id:crypto.randomUUID(),...s},u=o[a].tracks[l];return u.muteRegions||(u.muteRegions=[]),u.muteRegions.push(c),this.saveSongs(t,o),c}static updateMuteRegion(t,n,r,s,o){const a=this.getAllSongs(t),l=a.findIndex(d=>d.id===n);if(l===-1)return null;const c=a[l].tracks.findIndex(d=>d.id===r);if(c===-1)return null;const u=a[l].tracks[c];if(!u.muteRegions)return null;const f=u.muteRegions.findIndex(d=>d.id===s);return f===-1?null:(u.muteRegions[f]={...u.muteRegions[f],...o},this.saveSongs(t,a),u.muteRegions[f])}static deleteMuteRegion(t,n,r,s){const o=this.getAllSongs(t),a=o.findIndex(f=>f.id===n);if(a===-1)return!1;const l=o[a].tracks.findIndex(f=>f.id===r);if(l===-1)return!1;const c=o[a].tracks[l];if(!c.muteRegions)return!1;const u=c.muteRegions.length;return c.muteRegions=c.muteRegions.filter(f=>f.id!==s),c.muteRegions.length===u?!1:(this.saveSongs(t,o),!0)}static getMuteRegions(t,n,r){const o=this.getAllSongs(t).find(l=>l.id===n);if(!o)return[];const a=o.tracks.find(l=>l.id===r);return(a==null?void 0:a.muteRegions)||[]}}const vn="lpp_local_user",O_=24*60*60*1e3,L_=()=>{const e=navigator.userAgent,t=/Android/i.test(e),n=/Chrome/i.test(e)&&!/Edg|Edge/i.test(e),r=/Edg\/|Edge\//i.test(e)&&!t;return{isAndroid:t,isChrome:n,isEdge:r,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),isAndroidChrome:t&&n}},Kp=()=>L_().isEdge;function hr(){const[e,t]=m.useState(null),[n,r]=m.useState(!0),[s,o]=m.useState(!1),a=m.useRef(!1);m.useEffect(()=>{let d=!0;const g=()=>{try{const S="_test_"+Date.now();return localStorage.setItem(S,"test"),localStorage.removeItem(S),typeof fetch>"u"?(console.error("❌ Fetch API not available"),!1):!0}catch(S){return console.error("❌ Browser compatibility issue:",S),!1}},v=async()=>{if(a.current){console.log("🔄 Authentication already in progress, skipping...");return}if(!g()){console.error("❌ Browser not compatible with authentication system"),r(!1);return}try{a.current=!0,o(!0);const S=localStorage.getItem(vn);if(S){const j=JSON.parse(S);if(j.userType==="paid"&&(j.userType="premium",localStorage.setItem(vn,JSON.stringify(j)),console.log('🔄 Migrated old "paid" status to "premium"')),Date.now()-j.loginTime<O_){const N=Kp(),C=!j.lastVerified||Date.now()-j.lastVerified>60*60*1e3;if(j.email&&C&&!N)try{console.log("🔄 Checking fresh subscription status for:",j.email);const P=new Promise((A,R)=>setTimeout(()=>R(new Error("Authentication timeout")),1e4)),T=ou("POST","/api/verify-subscription",{email:j.email}),M=await Promise.race([T,P]);if(M.ok&&d){const A=await M.json();console.log("✅ Fresh subscription status:",A.userType);const R={...j,userType:A.userType,lastVerified:Date.now()};localStorage.setItem(vn,JSON.stringify(R)),t(R)}else d&&(console.log("❌ Subscription verification failed, using cached data"),t(j))}catch(P){console.error("❌ Error verifying subscription (Edge browser compatibility):",P),d&&(console.log("📱 Using cached authentication data for Edge browser"),t(j))}else d&&(t(j),N&&j.email&&C&&setTimeout(async()=>{try{console.log("📱 Edge browser: Starting background verification");const P=await ou("POST","/api/verify-subscription",{email:j.email});if(P.ok&&d){const T=await P.json(),M={...j,userType:T.userType,lastVerified:Date.now()};localStorage.setItem(vn,JSON.stringify(M)),t(M),console.log("✅ Edge browser: Background verification complete")}}catch{console.log("📱 Edge browser: Background verification failed, keeping cached data")}},2e3))}else localStorage.removeItem(vn),d&&t(null)}}catch(S){if(console.error("Error checking local session:",S),d)try{const j=localStorage.getItem(vn);if(j){const N=JSON.parse(j);console.log("📱 Using fallback authentication for Edge browser compatibility"),t(N)}else t(null)}catch(j){console.error("❌ Fallback session check failed:",j),t(null)}}finally{d&&(r(!1),o(!1),a.current=!1)}},w=Kp(),p=setTimeout(()=>{w&&console.log("📱 Edge browser detected - using compatibility mode"),v()},w?500:100);let x;const h=()=>{if(a.current){console.log("🔄 Skipping auth change - verification in progress");return}clearTimeout(x),x=setTimeout(()=>{d&&!a.current&&(r(!0),v())},500)},y=()=>{clearTimeout(x),x=setTimeout(()=>{if(d&&(e!=null&&e.email)){console.log("🔄 Force refreshing subscription on demand");const S={...e,lastVerified:0};localStorage.setItem(vn,JSON.stringify(S)),v()}},100)};return window.addEventListener("auth-change",h),window.addEventListener("storage",h),window.addEventListener("force-subscription-refresh",y),()=>{d=!1,clearTimeout(x),clearTimeout(p),window.removeEventListener("auth-change",h),window.removeEventListener("storage",h),window.removeEventListener("force-subscription-refresh",y)}},[]);const l=(d,g)=>{const v={email:g,userType:d,loginTime:Date.now(),lastVerified:Date.now()};localStorage.setItem(vn,JSON.stringify(v)),t(v),r(!1),setTimeout(()=>{window.dispatchEvent(new Event("auth-change"))},0)},c=()=>{localStorage.removeItem(vn),t(null),setTimeout(()=>{window.dispatchEvent(new Event("auth-change"))},0)},u=()=>{if(e){const d={...e,userType:"premium"};localStorage.setItem(vn,JSON.stringify(d)),t(d)}},f=async()=>{if(e!=null&&e.email)try{console.log("🔄 Force refreshing subscription status for:",e.email);const d=await ou("POST","/api/verify-subscription",{email:e.email});if(d.ok){const g=await d.json();console.log("✅ Force refresh result:",g.userType);const v={...e,userType:g.userType,lastVerified:Date.now()};localStorage.setItem(vn,JSON.stringify(v)),t(v)}}catch(d){console.error("❌ Error force refreshing subscription:",d)}};return{user:e,isLoading:n,isAuthenticated:!!e,isPaidUser:(e==null?void 0:e.userType)==="premium"||(e==null?void 0:e.userType)==="professional",isFreeUser:(e==null?void 0:e.userType)==="free",login:l,logout:c,upgrade:u,forceRefreshSubscription:f}}function fh(e,[t,n]){return Math.min(n,Math.max(t,e))}var F_=m.createContext(void 0);function Mo(e){const t=m.useContext(F_);return e||t||"ltr"}function I0(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var M0=["PageUp","PageDown"],D0=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],O0={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Do="Slider",[Ad,$_,z_]=tc(Do),[L0,w4]=Ct(Do,[z_]),[B_,vc]=L0(Do),F0=m.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:o=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:f,onValueChange:d=()=>{},onValueCommit:g=()=>{},inverted:v=!1,form:w,...p}=e,x=m.useRef(new Set),h=m.useRef(0),S=a==="horizontal"?U_:W_,[j=[],N]=Po({prop:f,defaultProp:u,onChange:R=>{var O;(O=[...x.current][h.current])==null||O.focus(),d(R)}}),C=m.useRef(j);function P(R){const E=Y_(j,R);A(R,E)}function T(R){A(R,h.current)}function M(){const R=C.current[h.current];j[h.current]!==R&&g(j)}function A(R,E,{commit:O}={commit:!1}){const b=Z_(o),I=J_(Math.round((R-r)/o)*o+r,b),$=fh(I,[r,s]);N((U=[])=>{const z=K_(U,$,E);if(Q_(z,c*o)){h.current=z.indexOf($);const _=String(z)!==String(U);return _&&O&&g(z),_?z:U}else return U})}return i.jsx(B_,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:h,thumbs:x.current,values:j,orientation:a,form:w,children:i.jsx(Ad.Provider,{scope:e.__scopeSlider,children:i.jsx(Ad.Slot,{scope:e.__scopeSlider,children:i.jsx(S,{"aria-disabled":l,"data-disabled":l?"":void 0,...p,ref:t,onPointerDown:de(p.onPointerDown,()=>{l||(C.current=j)}),min:r,max:s,inverted:v,onSlideStart:l?void 0:P,onSlideMove:l?void 0:T,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&A(r,0,{commit:!0}),onEndKeyDown:()=>!l&&A(s,j.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:E})=>{if(!l){const I=M0.includes(R.key)||R.shiftKey&&D0.includes(R.key)?10:1,$=h.current,U=j[$],z=o*I*E;A(U+z,$,{commit:!0})}}})})})})});F0.displayName=Do;var[$0,z0]=L0(Do,{startEdge:"left",endEdge:"right",size:"width",direction:1}),U_=m.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...f}=e,[d,g]=m.useState(null),v=Re(t,S=>g(S)),w=m.useRef(void 0),p=Mo(s),x=p==="ltr",h=x&&!o||!x&&o;function y(S){const j=w.current||d.getBoundingClientRect(),N=[0,j.width],P=hh(N,h?[n,r]:[r,n]);return w.current=j,P(S-j.left)}return i.jsx($0,{scope:e.__scopeSlider,startEdge:h?"left":"right",endEdge:h?"right":"left",direction:h?1:-1,size:"width",children:i.jsx(B0,{dir:p,"data-orientation":"horizontal",...f,ref:v,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const j=y(S.clientX);a==null||a(j)},onSlideMove:S=>{const j=y(S.clientX);l==null||l(j)},onSlideEnd:()=>{w.current=void 0,c==null||c()},onStepKeyDown:S=>{const N=O0[h?"from-left":"from-right"].includes(S.key);u==null||u({event:S,direction:N?-1:1})}})})}),W_=m.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,f=m.useRef(null),d=Re(t,f),g=m.useRef(void 0),v=!s;function w(p){const x=g.current||f.current.getBoundingClientRect(),h=[0,x.height],S=hh(h,v?[r,n]:[n,r]);return g.current=x,S(p-x.top)}return i.jsx($0,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:i.jsx(B0,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const x=w(p.clientY);o==null||o(x)},onSlideMove:p=>{const x=w(p.clientY);a==null||a(x)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:p=>{const h=O0[v?"from-bottom":"from-top"].includes(p.key);c==null||c({event:p,direction:h?-1:1})}})})}),B0=m.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=e,f=vc(Do,n);return i.jsx(we.span,{...u,ref:t,onKeyDown:de(e.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(l(d),d.preventDefault()):M0.concat(D0).includes(d.key)&&(c(d),d.preventDefault())}),onPointerDown:de(e.onPointerDown,d=>{const g=d.target;g.setPointerCapture(d.pointerId),d.preventDefault(),f.thumbs.has(g)?g.focus():r(d)}),onPointerMove:de(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:de(e.onPointerUp,d=>{const g=d.target;g.hasPointerCapture(d.pointerId)&&(g.releasePointerCapture(d.pointerId),o(d))})})}),U0="SliderTrack",W0=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=vc(U0,n);return i.jsx(we.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});W0.displayName=U0;var Rd="SliderRange",V0=m.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=vc(Rd,n),o=z0(Rd,n),a=m.useRef(null),l=Re(t,a),c=s.values.length,u=s.values.map(g=>K0(g,s.min,s.max)),f=c>1?Math.min(...u):0,d=100-Math.max(...u);return i.jsx(we.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[o.startEdge]:f+"%",[o.endEdge]:d+"%"}})});V0.displayName=Rd;var Id="SliderThumb",H0=m.forwardRef((e,t)=>{const n=$_(e.__scopeSlider),[r,s]=m.useState(null),o=Re(t,l=>s(l)),a=m.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(V_,{...e,ref:o,index:a})}),V_=m.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...o}=e,a=vc(Id,n),l=z0(Id,n),[c,u]=m.useState(null),f=Re(t,y=>u(y)),d=c?a.form||!!c.closest("form"):!0,g=th(c),v=a.values[r],w=v===void 0?0:K0(v,a.min,a.max),p=G_(r,a.values.length),x=g==null?void 0:g[l.size],h=x?q_(x,w,l.direction):0;return m.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${w}% + ${h}px)`},children:[i.jsx(Ad.ItemSlot,{scope:e.__scopeSlider,children:i.jsx(we.span,{role:"slider","aria-label":e["aria-label"]||p,"aria-valuemin":a.min,"aria-valuenow":v,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:f,style:v===void 0?{display:"none"}:e.style,onFocus:de(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),d&&i.jsx(H_,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:v},r)]})});H0.displayName=Id;var H_=e=>{const{value:t,...n}=e,r=m.useRef(null),s=I0(t);return m.useEffect(()=>{const o=r.current,a=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(a,"value").set;if(s!==t&&c){const u=new Event("input",{bubbles:!0});c.call(o,t),o.dispatchEvent(u)}},[s,t]),i.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function K_(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,o)=>s-o)}function K0(e,t,n){const o=100/(n-t)*(e-t);return fh(o,[0,100])}function G_(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Y_(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function q_(e,t,n){const r=e/2,o=hh([0,50],[0,r]);return(r-o(t)*n)*n}function X_(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Q_(e,t){if(t>0){const n=X_(e);return Math.min(...n)>=t}return!0}function hh(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Z_(e){return(String(e).split(".")[1]||"").length}function J_(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var G0=F0,eT=W0,tT=V0,nT=H0;const Md=m.forwardRef(({className:e,...t},n)=>i.jsxs(G0,{ref:n,className:Ce("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(eT,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:i.jsx(tT,{className:"absolute h-full bg-primary"})}),i.jsx(nT,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Md.displayName=G0.displayName;function Y0({leftLevel:e,rightLevel:t,isPlaying:n=!0,className:r="",size:s="md",showLabels:o=!0,horizontal:a=!1}){const[l,c]=m.useState(0),[u,f]=m.useState(0),[d,g]=m.useState(0),[v,w]=m.useState(0),p=m.useRef(),x=m.useRef(0);m.useEffect(()=>{if(!n){c(0),f(0),g(0),w(0);return}const S=Math.max(0,Math.min(100,e)),j=Math.max(0,Math.min(100,t)),N=()=>{const C=performance.now(),P=C-x.current;x.current=C,c(T=>{if(S>T)return T+(S-T)*.9;{const M=Math.max(.88,1-P/1e3*1.5);return Math.max(S,T*M)}}),f(T=>{if(j>T)return T+(j-T)*.9;{const M=Math.max(.88,1-P/1e3*1.5);return Math.max(j,T*M)}}),g(T=>{if(S>T)return S;{const M=Math.max(.985,1-P/1e3*.3);return Math.max(S,T*M)}}),w(T=>{if(j>T)return j;{const M=Math.max(.985,1-P/1e3*.3);return Math.max(j,T*M)}}),p.current=requestAnimationFrame(N)};return x.current=performance.now(),p.current=requestAnimationFrame(N),()=>{p.current&&cancelAnimationFrame(p.current)}},[e,t,n]);const h=(S,j,N)=>{const C=a?16:12,P=Math.floor(S/100*C),T=Math.floor(j/100*C),M=E=>{if(!n)return"bg-gray-800";const O=E/C*100,b=E<P,I=E===T-1&&T>P;return O<60?I?"bg-green-300 shadow-green-300/80":b?"bg-green-400 shadow-green-400/60":"bg-green-900/25":O<85?I?"bg-yellow-300 shadow-yellow-300/80":b?"bg-yellow-400 shadow-yellow-400/60":"bg-yellow-900/25":I?"bg-red-300 shadow-red-300/80":b?"bg-red-400 shadow-red-400/60":"bg-red-900/25"},R={sm:a?"w-0.5 h-1.5":"w-1 h-0.5",md:a?"w-1 h-2":"w-1.5 h-0.5",lg:a?"w-1.5 h-3":"w-2 h-1"}[s];return i.jsxs("div",{className:"flex items-center space-x-1",children:[o&&i.jsx("div",{className:"text-xs font-mono text-gray-400 w-3 text-center",children:N}),i.jsx("div",{className:"flex space-x-0.5 bg-black/30 p-1 rounded border border-gray-700 pl-[17px] pr-[17px] ml-[2px] mr-[2px] mt-[0px] mb-[0px] pt-[3px] pb-[3px]",children:Array.from({length:C},(E,O)=>i.jsx("div",{className:`${R} rounded-sm transition-all duration-100 ${M(O)}`,style:{boxShadow:O<P||O===T-1?"0 0 2px currentColor":"none"}},O))})]})};return i.jsxs("div",{className:`flex flex-col space-y-0.5 ${r}`,children:[h(l,d,"L"),h(u,v,"R")]})}class os{static getInstance(){return os.instance||(os.instance=new os),os.instance}getWaveformCacheKey(t){return`waveform_${t}`}getTrackWaveformCacheKey(t){return`waveform_track_${t}`}getCachedWaveform(t){try{const n=localStorage.getItem(this.getWaveformCacheKey(t));if(n){const r=JSON.parse(n);if(Array.isArray(r))return r}}catch(n){console.error("Failed to load cached waveform:",n)}return null}saveWaveformToCache(t,n){try{localStorage.setItem(this.getWaveformCacheKey(t),JSON.stringify(n)),console.log(`Waveform cached for song: ${t}`)}catch(r){console.error("Failed to save waveform to cache:",r)}}getCachedTrackWaveform(t){try{const n=localStorage.getItem(this.getTrackWaveformCacheKey(t));if(n){const r=JSON.parse(n);if(Array.isArray(r))return new Float32Array(r)}}catch(n){console.error("Failed to load cached track waveform:",n)}return null}saveTrackWaveformToCache(t,n){try{const r=Array.from(n);localStorage.setItem(this.getTrackWaveformCacheKey(t),JSON.stringify(r)),console.log(`Track waveform cached for track: ${t}`)}catch(r){console.error("Failed to save track waveform to cache:",r)}}clearCachedTrackWaveform(t){try{localStorage.removeItem(this.getTrackWaveformCacheKey(t)),console.log(`Cleared cached track waveform for track: ${t}`)}catch(n){console.error("Failed to clear cached track waveform:",n)}}async generateWaveformFromSong(t){if(!t||t.tracks.length===0)return console.log(`No tracks available for waveform generation: ${(t==null?void 0:t.title)||"Unknown song"}`),this.generateFallbackWaveform(400,(t==null?void 0:t.duration)||240);const n=this.getCachedWaveform(t.id);if(n)return console.log(`Using cached waveform for "${t.title}" (${n.length} data points)`),n;console.log(`Auto-generating waveform for "${t.title}" from ${t.tracks.length} tracks...`);let r=null;try{r=new AudioContext;const s=400,o=new Array(s).fill(0);let a=0,l=0;const c=t.tracks.map(async f=>{try{const d=await M_.getAudioUrl(f.id);if(!d)return console.log(`Skipping track ${f.name} - no audio URL available`),null;const g=await fetch(d);if(!g.ok)return console.log(`Skipping track ${f.name} - failed to fetch audio data`),null;const v=await g.arrayBuffer();if(!v)return console.log(`Skipping track ${f.name} - no audio data in response`),null;if(!r)return console.error("AudioContext not available for track processing"),null;const w=await r.decodeAudioData(v.slice(0)),p=w.getChannelData(0),x=Math.floor(p.length/s),h=new Array(s).fill(0);for(let y=0;y<s;y++){const S=y*x,j=Math.min(S+x,p.length);let N=0;for(let C=S;C<j;C+=5){const P=Math.abs(p[C]);P>N&&(N=P)}h[y]=N}return console.log(`Processed track: ${f.name} (${w.duration.toFixed(1)}s)`),{trackData:h,duration:w.duration}}catch(d){return console.error(`Failed to process track ${f.name}:`,d),null}});if((await Promise.all(c)).forEach(f=>{if(f){a=Math.max(a,f.duration);for(let d=0;d<s;d++)o[d]+=f.trackData[d];l++}}),l>0){const f=Math.max(...o);if(f>0)for(let d=0;d<o.length;d++)o[d]=o[d]/f;return console.log(`Generated comprehensive waveform from ${l} tracks, duration: ${a.toFixed(1)}s`),this.saveWaveformToCache(t.id,o),o}else return console.log("No tracks with audio data available, generating fallback waveform pattern"),this.generateFallbackWaveform(s,t.duration||240)}catch(s){return console.error("Failed to generate waveform from audio:",s),console.log("Generating fallback waveform due to error"),this.generateFallbackWaveform(400,t.duration||240)}finally{try{r&&r.state!=="closed"&&typeof r.close=="function"&&(await r.close(),console.log("🔇 Closed temporary AudioContext for waveform generation"))}catch(s){console.warn("⚠️ Error closing AudioContext (already closed):",s)}}}generateFallbackWaveform(t,n){const r=[];for(let s=0;s<t;s++){const o=s/t;let a=.3+Math.sin(o*Math.PI*8)*.2;a+=Math.sin(o*Math.PI*32)*.15,a+=Math.sin(o*Math.PI*64)*.1,a+=(Math.random()-.5)*.1;const l=o*4%1;l<.25||l>.75?a*=.7:a*=1.2,o<.05&&(a*=o*20),o>.95&&(a*=(1-o)*20),r.push(Math.max(0,Math.min(1,a)))}return r}clearCachedWaveform(t){try{localStorage.removeItem(this.getWaveformCacheKey(t)),console.log(`Cleared cached waveform for song: ${t}`)}catch(n){console.error("Failed to clear cached waveform:",n)}}setCachedWaveform(t,n){try{localStorage.setItem(this.getWaveformCacheKey(t),JSON.stringify(n)),console.log(`Set cached waveform for song: ${t} (${n.length} data points)`)}catch(r){console.error("Failed to set cached waveform:",r)}}}const bs=os.getInstance(),rT=Object.freeze(Object.defineProperty({__proto__:null,WaveformGenerator:os,waveformGenerator:bs},Symbol.toStringTag,{value:"Module"}));function sT({trackId:e,songId:t,userEmail:n,audioUrl:r,duration:s,isCollapsed:o=!0,onRegionsChange:a,audioEngine:l}){const c=m.useRef(null),[u,f]=m.useState(o),[d,g]=m.useState([]),[v,w]=m.useState(null),[p,x]=m.useState(!1),[h,y]=m.useState(null),[S,j]=m.useState(null),[N,C]=m.useState(null),[P,T]=m.useState(!1),[M,A]=m.useState(1),[R,E]=m.useState(0),O=850,b=80,I=10;m.useEffect(()=>{const k=Fe.getMuteRegions(n,t,e);g(k),l&&k.length>0&&(l.setTrackMuteRegions(e,k),console.log(`🔇 Loaded ${k.length} mute regions for track ${e}`))},[n,t,e,l]),m.useEffect(()=>()=>{document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",ve)},[]),m.useEffect(()=>{if(!u&&!v&&r){const k=bs.getCachedTrackWaveform(e);k?(console.log(`✅ Using cached waveform for track ${e}`),w(k)):$()}},[u,v,r]),m.useEffect(()=>{!u&&v&&c.current&&U()},[u,v,d,h,S,M,R,N]);const $=async()=>{if(!r||p)return;x(!0);let k=r;try{let H=new Audio(k);if(!await new Promise(ae=>{const fe=new Audio(k);fe.addEventListener("canplaythrough",()=>ae(!0),{once:!0}),fe.addEventListener("error",()=>ae(!1),{once:!0}),fe.load()})){const fe=await cn.getInstance().getAudioUrl(e);if(fe)k=fe,H=new Audio(k);else throw new Error("Unable to get valid audio URL from storage")}await new Promise((ae,fe)=>{H.addEventListener("canplaythrough",()=>ae(),{once:!0}),H.addEventListener("error",ye=>fe(ye),{once:!0}),H.load()});const L=new(window.AudioContext||window.webkitAudioContext),q=await(await fetch(k)).arrayBuffer(),G=(await L.decodeAudioData(q)).getChannelData(0),ne=8e3,ie=Math.floor(G.length/ne),re=new Float32Array(ne);for(let ae=0;ae<ne;ae++){let fe=0,ye=0;const ce=Math.min(ie,G.length-ae*ie);for(let be=0;be<ce;be++){const xt=G[ae*ie+be]||0,Be=Math.abs(xt);Be>fe&&(fe=Be),ye+=xt*xt}const Ge=Math.sqrt(ye/ce);re[ae]=fe*.7+Ge*.3}w(re),bs.saveTrackWaveformToCache(e,re),L.close()}catch(H){console.error("Error generating waveform:",H)}finally{x(!1)}},U=()=>{const k=c.current;if(!k||!v)return;const H=k.getContext("2d");if(!H)return;H.clearRect(0,0,O,b),H.fillStyle="#374151",H.fillRect(0,0,O,b);const K=O-2*I,F=b-2*I,L=s/M,V=R,q=Math.min(V+L,s),te=v.length,G=Math.floor(V/s*te),ie=Math.ceil(q/s*te)-G,re=Math.min(ie*2,K),ae=K/re;H.fillStyle="#ffffff";for(let fe=0;fe<re;fe++){const ye=fe/re*ie,ce=G+ye;let Ge;if(ce>=0&&ce<v.length){const pn=Math.floor(ce),Tn=Math.min(pn+1,v.length-1),Se=ce-pn,Qr=v[pn]||0,Lo=v[Tn]||0;Ge=Qr+(Lo-Qr)*Se}else Ge=0;const be=Math.max(1,Ge*F),xt=I+fe*ae,Be=I+(F-be)/2;H.fillRect(xt,Be,Math.max(.5,ae),be)}if(d.forEach(fe=>{if(fe.end>=V&&fe.start<=q){const ye=Math.max(fe.start,V),ce=Math.min(fe.end,q),Ge=I+(ye-V)/(q-V)*K,xt=I+(ce-V)/(q-V)*K-Ge;H.fillStyle=S===fe.id?"rgba(239, 68, 68, 0.6)":"rgba(239, 68, 68, 0.4)",H.fillRect(Ge,I,xt,F),H.strokeStyle=S===fe.id?"#dc2626":"#ef4444",H.lineWidth=S===fe.id?2:1,H.strokeRect(Ge,I,xt,F)}}),h!=null&&h.isDragging&&h.endTime!==void 0){const fe=I+(h.startTime-V)/(q-V)*K,ye=I+(h.endTime-V)/(q-V)*K,ce=Math.abs(ye-fe),Ge=Math.min(fe,ye);H.fillStyle="rgba(59, 130, 246, 0.3)",H.fillRect(Ge,I,ce,F),H.strokeStyle="#3b82f6",H.lineWidth=2,H.strokeRect(Ge,I,ce,F)}if(N){const fe=I+(N.start-V)/(q-V)*K,ye=I+(N.end-V)/(q-V)*K,ce=Math.abs(ye-fe),Ge=Math.min(fe,ye);H.fillStyle="rgba(34, 197, 94, 0.3)",H.fillRect(Ge,I,ce,F),H.strokeStyle="#22c55e",H.lineWidth=2,H.strokeRect(Ge,I,ce,F)}},z=()=>{A(k=>Math.min(k*2,20))},_=()=>{A(k=>{const H=Math.max(k/2,1);return H===1&&E(0),H})},W=()=>{A(1),E(0)},D=async()=>{N&&(await ue(N.start,N.end),C(null))},B=()=>{if(!N)return;const k=N.end-N.start,H=k*.1,K=k+2*H,F=Math.min(s/K,20),L=s/F,V=N.start-H,q=Math.min(Math.max(0,V),Math.max(0,s-L));A(F),E(q),C(null)},X=async()=>{if(!(!N||!r||P)){T(!0);try{const H=await cn.getInstance().getAudioUrl(e);if(!H)throw new Error("Could not get valid audio URL for track");const K=new Audio(H);K.currentTime=N.start;const F=N.end-N.start;let L;const V=()=>{K.pause(),L&&clearTimeout(L),T(!1)};L=setTimeout(V,F*1e3),K.addEventListener("ended",V),await K.play()}catch(k){console.error("Error playing selection:",k),T(!1)}}},Y=k=>{var ne;const H=(ne=c.current)==null?void 0:ne.getBoundingClientRect();if(!H)return 0;const F=(k-H.left-I)*(O/H.width),L=O-2*I,V=Math.max(0,Math.min(1,F/L)),q=s/M,te=R,G=Math.min(te+q,s);return te+V*(G-te)},Z=k=>{if(!c.current)return;const H=Y(k.clientX),K=d.find(F=>H>=F.start&&H<=F.end);K?(j(K.id),C(null)):(j(null),C(null),y({isDragging:!0,startX:k.clientX,startTime:H}),document.addEventListener("mousemove",le),document.addEventListener("mouseup",ve))},le=k=>{if(!(h!=null&&h.isDragging))return;const H=Y(k.clientX);y({...h,endTime:H})},ve=()=>{if(document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",ve),h!=null&&h.isDragging&&h.endTime!==void 0){const k=Math.min(h.startTime,h.endTime),H=Math.max(h.startTime,h.endTime);H-k>=.1&&(C({start:k,end:H}),j(null))}y(null)},ge=k=>{if(!(h!=null&&h.isDragging))return;const H=Y(k.clientX);y({...h,endTime:H})},Q=()=>{if(document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",ve),h!=null&&h.isDragging&&h.endTime!==void 0){const k=Math.min(h.startTime,h.endTime),H=Math.max(h.startTime,h.endTime);H-k>=.1&&(C({start:k,end:H}),j(null))}y(null)},ue=async(k,H)=>{const K=Fe.addMuteRegion(n,t,e,{start:k,end:H});if(K){const F=[...d,K];g(F),a==null||a(F),l&&(l.setTrackMuteRegions(e,F),console.log(`🔇 Added mute region ${k.toFixed(1)}s-${H.toFixed(1)}s to track ${e}`))}},xe=k=>{if(Fe.deleteMuteRegion(n,t,e,k)){const K=d.filter(F=>F.id!==k);g(K),j(null),a==null||a(K),l&&(l.setTrackMuteRegions(e,K),console.log(`🔇 Removed mute region from track ${e}`))}},Me=()=>{d.forEach(k=>{Fe.deleteMuteRegion(n,t,e,k.id)}),g([]),j(null),a==null||a([]),l&&(l.setTrackMuteRegions(e,[]),console.log(`🔇 Cleared all mute regions from track ${e}`))},ke=k=>{const H=Math.floor(k/60),K=Math.floor(k%60);return`${H}:${K.toString().padStart(2,"0")}`};return i.jsxs("div",{className:"border rounded-lg bg-gray-700 border-gray-600",children:[i.jsx("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-600",onClick:()=>f(!u),"data-testid":`toggle-waveform-editor-${e}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[u?i.jsx(bx,{className:"h-4 w-4"}):i.jsx(hj,{className:"h-4 w-4"}),i.jsx(hs,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium text-white",children:"Waveform & Mute Regions"}),d.length>0&&i.jsxs("span",{className:"text-xs bg-red-900 text-red-200 px-2 py-1 rounded",children:[d.length," muted"]})]})}),!u&&i.jsxs("div",{className:"p-3 pt-0 space-y-3",children:[i.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:p?i.jsx("div",{className:"flex items-center justify-center h-20",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),"Generating waveform..."]})}):v?i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-300",children:"Zoom:"}),i.jsx(ee,{onClick:_,variant:"outline",size:"sm",disabled:M<=1,"data-testid":`button-zoom-out-${e}`,children:i.jsx(Oj,{className:"h-3 w-3"})}),i.jsxs("span",{className:"text-xs text-gray-300 min-w-[30px] text-center",children:[M.toFixed(1),"x"]}),i.jsx(ee,{onClick:z,variant:"outline",size:"sm",disabled:M>=20,"data-testid":`button-zoom-in-${e}`,children:i.jsx(Dj,{className:"h-3 w-3"})}),M>1&&i.jsx(ee,{onClick:W,variant:"outline",size:"sm",className:"text-xs","data-testid":`button-reset-zoom-${e}`,children:"Reset"}),N&&i.jsxs(i.Fragment,{children:[i.jsxs(ee,{onClick:X,variant:"outline",size:"sm",className:"text-xs bg-green-700 hover:bg-green-600 text-white border-green-600",disabled:P,"data-testid":`button-play-selection-${e}`,children:[i.jsx(xs,{className:"h-3 w-3 mr-1"}),P?"Playing...":"Play"]}),i.jsxs(ee,{onClick:D,variant:"outline",size:"sm",className:"text-xs bg-red-700 hover:bg-red-600 text-white border-red-600","data-testid":`button-mute-selection-${e}`,children:[i.jsx(Cx,{className:"h-3 w-3 mr-1"}),"Mute"]}),i.jsxs(ee,{onClick:B,variant:"outline",size:"sm",className:"text-xs bg-blue-700 hover:bg-blue-600 text-white border-blue-600","data-testid":`button-zoom-to-selection-${e}`,children:[i.jsx(yj,{className:"h-3 w-3 mr-1"}),"Zoom"]})]})]}),M>1&&i.jsxs("div",{className:"text-xs text-gray-300",children:["Viewing: ",ke(R)," - ",ke(Math.min(R+s/M,s))]})]}),i.jsx("canvas",{ref:c,width:O,height:b,className:"border border-gray-500 rounded cursor-crosshair w-full",onMouseDown:Z,onMouseMove:ge,onMouseUp:Q,onMouseLeave:()=>y(null),"data-testid":`waveform-canvas-${e}`}),i.jsx("div",{className:"text-xs text-gray-300 mt-2",children:N?`Selection: ${ke(N.start)} - ${ke(N.end)} (${ke(N.end-N.start)}). Choose action above.`:"Click and drag to select. Click existing regions to select them."})]}):i.jsx("div",{className:"flex items-center justify-center h-20",children:i.jsxs(ee,{onClick:$,variant:"outline",size:"sm","data-testid":`button-generate-waveform-${e}`,children:[i.jsx(hs,{className:"h-4 w-4 mr-2"}),"Generate Waveform"]})})}),d.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"text-sm font-medium text-white",children:["Muted Regions (",d.length,")"]}),i.jsx(ee,{onClick:Me,variant:"outline",size:"sm",className:"text-red-400 hover:text-red-300 border-red-600","data-testid":`button-clear-all-regions-${e}`,children:"Clear All"})]}),i.jsx("div",{className:"space-y-1",children:d.map(k=>i.jsxs("div",{className:`flex items-center justify-between p-2 rounded text-sm ${S===k.id?"bg-red-900/20 border border-red-800 text-white":"bg-gray-600 text-white"}`,"data-testid":`mute-region-${k.id}`,children:[i.jsxs("span",{children:[ke(k.start)," - ",ke(k.end),i.jsxs("span",{className:"text-gray-400 ml-2",children:["(",ke(k.end-k.start),")"]})]}),i.jsx(ee,{onClick:()=>xe(k.id),variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-red-400 hover:text-red-300","data-testid":`button-delete-region-${k.id}`,children:i.jsx(pi,{className:"h-3 w-3"})})]},k.id))})]})]})]})}function oT({song:e,audioEngine:t,onSongUpdate:n,onTrackVolumeChange:r,onTrackMuteToggle:s,onTrackSoloToggle:o,onTrackBalanceChange:a,audioLevels:l={},isPlaying:c=!1,isLoadingTracks:u=!1,onPlay:f,onPause:d,isOpen:g=!1}){m.useState(!1),m.useState(""),m.useState("");const[v,w]=m.useState([]),[p,x]=m.useState(0),[h,y]=m.useState(!1),[S,j]=m.useState({}),{toast:N}=Mt(),{user:C}=hr(),P=m.useRef({}),T=(e==null?void 0:e.tracks)||[];m.useEffect(()=>{if(T.length>0){const _={};T.forEach(W=>{_[W.id]={volume:W.volume||1,balance:W.balance||0}}),j(_)}},[T]);const M=m.useCallback(()=>{if(!(!(e!=null&&e.id)||!(C!=null&&C.email)))try{const _=Fe.getSong(C.email,e.id);_&&n&&(console.log("Track Manager: Found",_.tracks.length,"tracks for song",_.title,`(ID: ${_.id}):`,_.tracks.map(W=>W.name)),n(_))}catch(_){console.error("Failed to refetch tracks:",_)}},[e==null?void 0:e.id,C==null?void 0:C.email,n]),A=async(_,W)=>{try{const D=new Audio,B=URL.createObjectURL(_);return new Promise(X=>{D.addEventListener("loadedmetadata",()=>{const Y=Math.round(D.duration);console.log(`Detected audio duration: ${Y}s from file: ${_.name}`),URL.revokeObjectURL(B),C!=null&&C.email&&Y>0&&Fe.updateSong(C.email,W,{duration:Y}),X()}),D.addEventListener("error",()=>{console.warn(`Could not detect duration for: ${_.name}`),URL.revokeObjectURL(B),X()}),D.src=B})}catch(D){console.error("Error detecting song duration:",D)}},R=()=>{console.log("=== Web Track Manager: Starting file selection ===");try{const _=document.createElement("input");_.type="file",_.multiple=!0,_.accept="audio/*",_.onchange=async W=>{console.log("=== Web Track Manager: File change event triggered ===");try{const D=W.target;if(!D||!D.files){console.error("No target or files in change event");return}const B=Array.from(D.files);if(console.log("Files selected:",B.length),B.length===0){console.log("No files selected, returning");return}if(T.length+B.length>6){console.warn(`Track limit would be exceeded: ${T.length} + ${B.length} > 6`),N({title:"Too many tracks",description:`You can only have 6 tracks per song. You currently have ${T.length} tracks.`,variant:"destructive"});return}const X=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(X&&B.length>3){console.log("📱 Mobile device detected - limiting to 3 files max to prevent crashes"),N({title:"Mobile Device Limit",description:"On mobile devices, you can only add 3 audio files at once to prevent crashes. Please select 3 files or fewer.",variant:"destructive"});return}X&&B.length>1&&console.log(`📱 Mobile device: processing ${B.length} files with extra safety measures`),w(B),y(!0);let Y=0,Z=0;const le=X;for(let ve=0;ve<B.length;ve++){const ge=B[ve];try{console.log(`📁 Processing file ${ve+1}/${B.length}: ${ge.name} (${(ge.size/1024/1024).toFixed(1)}MB)`),le&&console.log("📱 Mobile device: waiting for complete file processing before next"),w([ge]),console.log(`⏳ Starting processing of ${ge.name}...`),await E(ge),console.log(`✅ File ${ve+1} completely processed and stored`),Z++,le&&(console.log(`📱 Mobile cleanup after file ${ve+1}`),"gc"in window&&typeof window.gc=="function"&&window.gc(),await new Promise(Q=>setTimeout(Q,100)));try{const Q=new Audio,ue=URL.createObjectURL(ge),xe=await new Promise(Me=>{const ke=()=>{URL.revokeObjectURL(ue),Q.src="",Q.load()},k=setTimeout(()=>{console.warn(`⏰ Duration detection timeout for ${ge.name}`),ke(),Me(0)},5e3);Q.addEventListener("loadedmetadata",()=>{clearTimeout(k);const H=Q.duration||0;ke(),Me(H)}),Q.addEventListener("error",()=>{clearTimeout(k),ke(),Me(0)}),Q.src=ue});Y+=xe,console.log(`📊 Duration added: ${xe.toFixed(1)}s (total: ${Y.toFixed(1)}s)`)}catch(Q){console.warn(`Could not get duration for ${ge.name}:`,Q)}le&&ve<B.length-1&&(console.log("📱 Mobile safety pause..."),await new Promise(Q=>setTimeout(Q,500)))}catch(Q){if(console.error(`❌ Failed to process file ${ge.name}:`,Q),N({title:"File processing failed",description:`Failed to process ${ge.name}: ${Q instanceof Error?Q.message:"Unknown error"}`,variant:"destructive"}),le){console.log("📱 Mobile: stopping batch processing after error to prevent crash");break}}}x(Y),Z>0&&N({title:"Files imported successfully",description:`Successfully imported ${Z} out of ${B.length} files`})}catch(D){console.error("=== Web Track Manager: Error in file change handler ==="),console.error("Error:",D),N({title:"File selection failed",description:D instanceof Error?D.message:"Failed to process selected files",variant:"destructive"})}finally{console.log("=== Web Track Manager: Cleaning up file selection ==="),y(!1),w([]),x(0)}},_.click()}catch(_){console.error("=== Web Track Manager: Error creating file input ==="),console.error("Error:",_),N({title:"File selection error",description:_ instanceof Error?_.message:"Failed to open file selector",variant:"destructive"})}},E=async _=>{if(!(!(e!=null&&e.id)||!(C!=null&&C.email)))try{console.log(`Processing file ${v.indexOf(_)+1}/${v.length}: ${_.name}`);const W=_.name,D=W.replace(/\.[^/.]+$/,"");if(console.log(`Adding track "${D}" with file: ${W}`),Fe.addTrack(C.email,e.id,{name:D,songId:e.id,trackNumber:T.length+1,audioUrl:"",localFileName:W,mimeType:_.type,fileSize:_.size,volume:50,balance:0,isMuted:!1,isSolo:!1})){const X=Fe.getSong(C.email,e.id),Y=X==null?void 0:X.tracks.find(le=>le.name===D&&le.localFileName===W);if(Y){const le=$n.getInstance();await le.storeAudioFile(Y.id,_,Y,e.title),console.log("Audio file stored successfully for track:",Y.id);const ve=await le.getAudioUrl(Y.id);ve&&(Fe.updateTrack(C.email,e.id,Y.id,{audioUrl:ve}),console.log("Track updated with audio URL:",ve.substring(0,50)+"..."))}await A(_,e.id),console.log("Track added successfully");const Z=Fe.getSong(C.email,e.id);if(Z&&n&&(console.log("Track data updated, refreshing song with",Z.tracks.length,"tracks"),n(Z)),e!=null&&e.id){const le=`waveform_${e.id}`;localStorage.removeItem(le),console.log(`Cleared waveform cache for "${e.title}" - will regenerate on next view`)}N({title:"Track added successfully",description:"Audio track has been registered and is ready for use"}),console.log(`Successfully processed: ${_.name}`)}}catch(W){console.error("Error adding track:",W),N({title:"Add track failed",description:W instanceof Error?W.message:"Failed to add track",variant:"destructive"})}},O=async _=>{if(!(!(e!=null&&e.id)||!(C!=null&&C.email)))try{if(Fe.deleteTrack(C.email,e.id,_)){const D=Fe.getSong(C.email,e.id);if(D&&n&&(console.log("Track deleted, refreshing song with",D.tracks.length,"tracks"),n(D)),e!=null&&e.id){const B=`waveform_${e.id}`;localStorage.removeItem(B),console.log(`Cleared waveform cache for "${e.title}" - will regenerate on next view`)}N({title:"Track deleted",description:"Audio track has been removed. Waveform will regenerate with remaining tracks."})}}catch(W){N({title:"Delete failed",description:W instanceof Error?W.message:"Failed to delete track",variant:"destructive"})}},b=async()=>{if(!(T.length===0||!(e!=null&&e.id)||!(C!=null&&C.email)))try{for(const W of T)Fe.deleteTrack(C.email,e.id,W.id);const _=Fe.getSong(C.email,e.id);if(_&&n&&(console.log("All tracks cleared, refreshing song with",_.tracks.length,"tracks"),n(_)),e!=null&&e.id){const W=`waveform_${e.id}`;localStorage.removeItem(W),console.log(`Cleared waveform cache for "${e.title}" - all tracks removed`)}N({title:"All tracks cleared",description:"All audio tracks have been removed from this song."})}catch(_){N({title:"Clear failed",description:_ instanceof Error?_.message:"Failed to clear tracks",variant:"destructive"})}},I=m.useCallback((_,W)=>{j(D=>({...D,[_]:{...D[_],volume:W}})),P.current[_]&&clearTimeout(P.current[_]),P.current[_]=setTimeout(()=>{if(r==null||r(_,W),e!=null&&e.id&&(C!=null&&C.email)&&T.find(B=>B.id===_)&&(Fe.updateTrack(C.email,e.id,_,{volume:W}),e&&n)){const B={...e,tracks:e.tracks.map(X=>X.id===_?{...X,volume:W}:X)};n(B)}delete P.current[_]},150)},[T,e==null?void 0:e.id,C==null?void 0:C.email,r]),$=m.useCallback((_,W)=>{j(B=>({...B,[_]:{...B[_],balance:W}}));const D=`${_}_balance`;P.current[D]&&clearTimeout(P.current[D]),P.current[D]=setTimeout(()=>{if(a==null||a(_,W),e!=null&&e.id&&(C!=null&&C.email)&&T.find(X=>X.id===_)&&(Fe.updateTrack(C.email,e.id,_,{balance:W}),e&&n)){const X={...e,tracks:e.tracks.map(Y=>Y.id===_?{...Y,balance:W}:Y)};n(X)}delete P.current[D]},150)},[T,e==null?void 0:e.id,C==null?void 0:C.email,a]),U=m.useCallback(_=>{if(s==null||s(_),e!=null&&e.id&&(C!=null&&C.email)){const W=T.find(D=>D.id===_);W&&(Fe.updateTrack(C.email,e.id,_,{isMuted:!W.isMuted}),setTimeout(()=>M(),50))}},[T,e==null?void 0:e.id,C==null?void 0:C.email,s,M]),z=m.useCallback(_=>{if(o==null||o(_),e!=null&&e.id&&(C!=null&&C.email)){const W=T.find(D=>D.id===_);W&&(Fe.updateTrack(C.email,e.id,_,{isSolo:!W.isSolo}),setTimeout(()=>M(),50))}},[T,e==null?void 0:e.id,C==null?void 0:C.email,o,M]);return m.useEffect(()=>()=>{Object.values(P.current).forEach(_=>{_&&clearTimeout(_)})},[]),i.jsxs("div",{className:"w-full space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Track Manager"}),T.length>0&&i.jsxs("span",{className:"text-sm text-gray-500",children:["(",T.length," track",T.length!==1?"s":"",")"]})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[(f||d)&&i.jsxs(ee,{onClick:c?d:f,variant:c?"destructive":"default",size:"sm","data-testid":"button-play-pause",children:[c?i.jsx(xo,{className:"h-4 w-4 mr-2"}):i.jsx(xs,{className:"h-4 w-4 mr-2"}),c?"Pause":"Play"]}),i.jsxs(ee,{onClick:R,disabled:T.length>=6||h,size:"sm",className:"hidden md:flex","data-testid":"button-add-tracks-desktop",children:[i.jsx(Nd,{className:"h-4 w-4 mr-2"}),h?"Adding...":"Add Tracks"]}),T.length>0&&i.jsxs(ee,{onClick:b,variant:"outline",size:"sm",className:"hidden md:flex","data-testid":"button-clear-tracks-desktop",children:[i.jsx(pi,{className:"h-4 w-4 mr-2"}),"Clear All"]}),i.jsxs(ee,{onClick:R,disabled:T.length>=6||h,size:"sm",className:"flex md:hidden","data-testid":"button-add-tracks-mobile",children:[i.jsx(Nd,{className:"h-4 w-4 mr-1"}),h?"Adding...":"Add"]}),T.length>0&&i.jsx(ee,{onClick:b,variant:"outline",size:"sm",className:"flex md:hidden h-8 w-8 p-0",title:"Clear All Tracks","data-testid":"button-clear-tracks-mobile",children:i.jsx(pi,{className:"h-4 w-4"})})]})]}),T.length===0?i.jsx(je,{children:i.jsx(Pe,{className:"p-6",children:i.jsxs("div",{className:"text-center text-gray-500",children:[i.jsx(Vn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"mb-2",children:"No tracks added yet"}),i.jsx("p",{className:"text-sm",children:"Add audio files to start building your performance"})]})})}):i.jsx("div",{className:"space-y-3",children:T.map((_,W)=>{const D=S[_.id]||{volume:_.volume,balance:_.balance},B=l[_.id]||0;return i.jsx(je,{className:"transition-all hover:shadow-md",children:i.jsxs(Pe,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-sm font-medium",children:W+1}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h4",{className:"font-medium truncate",title:_.name,children:_.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[_.localFileName," • ",((_.fileSize||0)/1024/1024).toFixed(1),"MB"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Y0,{leftLevel:B,rightLevel:B,isPlaying:c,size:"sm",horizontal:!0,className:"flex-shrink-0"}),i.jsx(ee,{onClick:()=>O(_.id),variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",title:"Delete track","data-testid":`button-delete-track-${W}`,children:i.jsx(pi,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(rt,{className:"text-xs font-medium",children:"Volume"}),i.jsxs("span",{className:"text-xs text-gray-500",children:[D.volume,"%"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ee,{onClick:()=>U(_.id),variant:"ghost",size:"sm",className:`h-8 w-8 p-0 ${_.isMuted?"text-red-500 bg-red-50":"text-gray-500"}`,title:_.isMuted?"Unmute":"Mute","data-testid":`button-mute-track-${W}`,children:_.isMuted?i.jsx(Cx,{className:"h-4 w-4"}):i.jsx(jx,{className:"h-4 w-4"})}),i.jsx(Md,{value:[D.volume],onValueChange:X=>I(_.id,X[0]),max:100,step:1,className:"flex-1","data-testid":`slider-volume-track-${W}`})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(rt,{className:"text-xs font-medium",children:"Balance"}),i.jsx("span",{className:"text-xs text-gray-500",children:D.balance===0?"Center":D.balance<0?`L${Math.abs(D.balance)}`:`R${D.balance}`})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ee,{onClick:()=>z(_.id),variant:"ghost",size:"sm",className:`h-8 w-8 p-0 ${_.isSolo?"text-yellow-500 bg-yellow-50":"text-gray-500"}`,title:_.isSolo?"Unsolo":"Solo","data-testid":`button-solo-track-${W}`,children:i.jsx(ac,{className:"h-4 w-4"})}),i.jsx(Md,{value:[D.balance],onValueChange:X=>$(_.id,X[0]),min:-100,max:100,step:1,className:"flex-1","data-testid":`slider-balance-track-${W}`})]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsx(sT,{trackId:_.id,songId:(e==null?void 0:e.id)||"",userEmail:(C==null?void 0:C.email)||"",audioUrl:_.audioUrl,duration:(e==null?void 0:e.duration)||240,isCollapsed:!0,audioEngine:t,onRegionsChange:X=>{console.log(`Track ${_.name}: Updated mute regions:`,X)}})})]})},_.id)})})]})}var gu="focusScope.autoFocusOnMount",vu="focusScope.autoFocusOnUnmount",Gp={bubbles:!1,cancelable:!0},iT="FocusScope",mh=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=m.useState(null),u=qe(s),f=qe(o),d=m.useRef(null),g=Re(t,p=>c(p)),v=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let p=function(S){if(v.paused||!l)return;const j=S.target;l.contains(j)?d.current=j:xr(d.current,{select:!0})},x=function(S){if(v.paused||!l)return;const j=S.relatedTarget;j!==null&&(l.contains(j)||xr(d.current,{select:!0}))},h=function(S){if(document.activeElement===document.body)for(const N of S)N.removedNodes.length>0&&xr(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",x);const y=new MutationObserver(h);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",x),y.disconnect()}}},[r,l,v.paused]),m.useEffect(()=>{if(l){qp.add(v);const p=document.activeElement;if(!l.contains(p)){const h=new CustomEvent(gu,Gp);l.addEventListener(gu,u),l.dispatchEvent(h),h.defaultPrevented||(aT(fT(q0(l)),{select:!0}),document.activeElement===p&&xr(l))}return()=>{l.removeEventListener(gu,u),setTimeout(()=>{const h=new CustomEvent(vu,Gp);l.addEventListener(vu,f),l.dispatchEvent(h),h.defaultPrevented||xr(p??document.body,{select:!0}),l.removeEventListener(vu,f),qp.remove(v)},0)}}},[l,u,f,v]);const w=m.useCallback(p=>{if(!n&&!r||v.paused)return;const x=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,h=document.activeElement;if(x&&h){const y=p.currentTarget,[S,j]=lT(y);S&&j?!p.shiftKey&&h===j?(p.preventDefault(),n&&xr(S,{select:!0})):p.shiftKey&&h===S&&(p.preventDefault(),n&&xr(j,{select:!0})):h===y&&p.preventDefault()}},[n,r,v.paused]);return i.jsx(we.div,{tabIndex:-1,...a,ref:g,onKeyDown:w})});mh.displayName=iT;function aT(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(xr(r,{select:t}),document.activeElement!==n)return}function lT(e){const t=q0(e),n=Yp(t,e),r=Yp(t.reverse(),e);return[n,r]}function q0(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Yp(e,t){for(const n of e)if(!cT(n,{upTo:t}))return n}function cT(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function uT(e){return e instanceof HTMLInputElement&&"select"in e}function xr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&uT(e)&&t&&e.select()}}var qp=dT();function dT(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Xp(e,t),e.unshift(t)},remove(t){var n;e=Xp(e,t),(n=e[0])==null||n.resume()}}}function Xp(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function fT(e){return e.filter(t=>t.tagName!=="A")}var yu=0;function X0(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Qp()),document.body.insertAdjacentElement("beforeend",e[1]??Qp()),yu++,()=>{yu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),yu--}},[])}function Qp(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var zn=function(){return zn=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},zn.apply(this,arguments)};function Q0(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function hT(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var Qa="right-scroll-bar-position",Za="width-before-scroll-bar",mT="with-scroll-bars-hidden",pT="--removed-body-scroll-bar-size";function xu(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function gT(e,t){var n=m.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var vT=typeof window<"u"?m.useLayoutEffect:m.useEffect,Zp=new WeakMap;function yT(e,t){var n=gT(null,function(r){return e.forEach(function(s){return xu(s,r)})});return vT(function(){var r=Zp.get(n);if(r){var s=new Set(r),o=new Set(e),a=n.current;s.forEach(function(l){o.has(l)||xu(l,null)}),o.forEach(function(l){s.has(l)||xu(l,a)})}Zp.set(n,e)},[e]),n}function xT(e){return e}function wT(e,t){t===void 0&&(t=xT);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var a=t(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var c=function(){var f=a;a=[],f.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),n}}}};return s}function bT(e){e===void 0&&(e={});var t=wT(null);return t.options=zn({async:!0,ssr:!1},e),t}var Z0=function(e){var t=e.sideCar,n=Q0(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,zn({},n))};Z0.isSideCarExport=!0;function ST(e,t){return e.useMedium(t),Z0}var J0=bT(),wu=function(){},yc=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:wu,onWheelCapture:wu,onTouchMoveCapture:wu}),s=r[0],o=r[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,g=e.sideCar,v=e.noIsolation,w=e.inert,p=e.allowPinchZoom,x=e.as,h=x===void 0?"div":x,y=e.gapMode,S=Q0(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=g,N=yT([n,t]),C=zn(zn({},S),s);return m.createElement(m.Fragment,null,f&&m.createElement(j,{sideCar:J0,removeScrollBar:u,shards:d,noIsolation:v,inert:w,setCallbacks:o,allowPinchZoom:!!p,lockRef:n,gapMode:y}),a?m.cloneElement(m.Children.only(l),zn(zn({},C),{ref:N})):m.createElement(h,zn({},C,{className:c,ref:N}),l))});yc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yc.classNames={fullWidth:Za,zeroRight:Qa};var kT=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function NT(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=kT();return t&&e.setAttribute("nonce",t),e}function jT(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function CT(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ET=function(){var e=0,t=null;return{add:function(n){e==0&&(t=NT())&&(jT(t,n),CT(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},_T=function(){var e=ET();return function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},ew=function(){var e=_T(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},TT={left:0,top:0,right:0,gap:0},bu=function(e){return parseInt(e||"",10)||0},PT=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[bu(n),bu(r),bu(s)]},AT=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return TT;var t=PT(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},RT=ew(),Js="data-scroll-locked",IT=function(e,t,n,r){var s=e.left,o=e.top,a=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(mT,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Js,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qa,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Za,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Qa," .").concat(Qa,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Za," .").concat(Za,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Js,`] {
    `).concat(pT,": ").concat(l,`px;
  }
`)},Jp=function(){var e=parseInt(document.body.getAttribute(Js)||"0",10);return isFinite(e)?e:0},MT=function(){m.useEffect(function(){return document.body.setAttribute(Js,(Jp()+1).toString()),function(){var e=Jp()-1;e<=0?document.body.removeAttribute(Js):document.body.setAttribute(Js,e.toString())}},[])},DT=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;MT();var o=m.useMemo(function(){return AT(s)},[s]);return m.createElement(RT,{styles:IT(o,!t,s,n?"":"!important")})},Dd=!1;if(typeof window<"u")try{var Ea=Object.defineProperty({},"passive",{get:function(){return Dd=!0,!0}});window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{Dd=!1}var Ps=Dd?{passive:!1}:!1,OT=function(e){return e.tagName==="TEXTAREA"},tw=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!OT(e)&&n[t]==="visible")},LT=function(e){return tw(e,"overflowY")},FT=function(e){return tw(e,"overflowX")},eg=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=nw(e,r);if(s){var o=rw(e,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},$T=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},zT=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},nw=function(e,t){return e==="v"?LT(t):FT(t)},rw=function(e,t){return e==="v"?$T(t):zT(t)},BT=function(e,t){return e==="h"&&t==="rtl"?-1:1},UT=function(e,t,n,r,s){var o=BT(e,window.getComputedStyle(t).direction),a=o*r,l=n.target,c=t.contains(l),u=!1,f=a>0,d=0,g=0;do{var v=rw(e,l),w=v[0],p=v[1],x=v[2],h=p-x-o*w;(w||h)&&nw(e,l)&&(d+=h,g+=w),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(d)<1||!s)||!f&&(Math.abs(g)<1||!s))&&(u=!0),u},_a=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tg=function(e){return[e.deltaX,e.deltaY]},ng=function(e){return e&&"current"in e?e.current:e},WT=function(e,t){return e[0]===t[0]&&e[1]===t[1]},VT=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},HT=0,As=[];function KT(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(HT++)[0],o=m.useState(ew)[0],a=m.useRef(e);m.useEffect(function(){a.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var p=hT([e.lockRef.current],(e.shards||[]).map(ng),!0).filter(Boolean);return p.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=m.useCallback(function(p,x){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!a.current.allowPinchZoom;var h=_a(p),y=n.current,S="deltaX"in p?p.deltaX:y[0]-h[0],j="deltaY"in p?p.deltaY:y[1]-h[1],N,C=p.target,P=Math.abs(S)>Math.abs(j)?"h":"v";if("touches"in p&&P==="h"&&C.type==="range")return!1;var T=eg(P,C);if(!T)return!0;if(T?N=P:(N=P==="v"?"h":"v",T=eg(P,C)),!T)return!1;if(!r.current&&"changedTouches"in p&&(S||j)&&(r.current=N),!N)return!0;var M=r.current||N;return UT(M,x,p,M==="h"?S:j,!0)},[]),c=m.useCallback(function(p){var x=p;if(!(!As.length||As[As.length-1]!==o)){var h="deltaY"in x?tg(x):_a(x),y=t.current.filter(function(N){return N.name===x.type&&(N.target===x.target||x.target===N.shadowParent)&&WT(N.delta,h)})[0];if(y&&y.should){x.cancelable&&x.preventDefault();return}if(!y){var S=(a.current.shards||[]).map(ng).filter(Boolean).filter(function(N){return N.contains(x.target)}),j=S.length>0?l(x,S[0]):!a.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),u=m.useCallback(function(p,x,h,y){var S={name:p,delta:x,target:h,should:y,shadowParent:GT(h)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(j){return j!==S})},1)},[]),f=m.useCallback(function(p){n.current=_a(p),r.current=void 0},[]),d=m.useCallback(function(p){u(p.type,tg(p),p.target,l(p,e.lockRef.current))},[]),g=m.useCallback(function(p){u(p.type,_a(p),p.target,l(p,e.lockRef.current))},[]);m.useEffect(function(){return As.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:g}),document.addEventListener("wheel",c,Ps),document.addEventListener("touchmove",c,Ps),document.addEventListener("touchstart",f,Ps),function(){As=As.filter(function(p){return p!==o}),document.removeEventListener("wheel",c,Ps),document.removeEventListener("touchmove",c,Ps),document.removeEventListener("touchstart",f,Ps)}},[]);var v=e.removeScrollBar,w=e.inert;return m.createElement(m.Fragment,null,w?m.createElement(o,{styles:VT(s)}):null,v?m.createElement(DT,{gapMode:e.gapMode}):null)}function GT(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const YT=ST(J0,KT);var ph=m.forwardRef(function(e,t){return m.createElement(yc,zn({},e,{ref:t,sideCar:YT}))});ph.classNames=yc.classNames;var qT=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Rs=new WeakMap,Ta=new WeakMap,Pa={},Su=0,sw=function(e){return e&&(e.host||sw(e.parentNode))},XT=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=sw(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},QT=function(e,t,n,r){var s=XT(t,Array.isArray(e)?e:[e]);Pa[n]||(Pa[n]=new WeakMap);var o=Pa[n],a=[],l=new Set,c=new Set(s),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};s.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(g){if(l.has(g))f(g);else try{var v=g.getAttribute(r),w=v!==null&&v!=="false",p=(Rs.get(g)||0)+1,x=(o.get(g)||0)+1;Rs.set(g,p),o.set(g,x),a.push(g),p===1&&w&&Ta.set(g,!0),x===1&&g.setAttribute(n,"true"),w||g.setAttribute(r,"true")}catch(h){console.error("aria-hidden: cannot operate on ",g,h)}})};return f(t),l.clear(),Su++,function(){a.forEach(function(d){var g=Rs.get(d)-1,v=o.get(d)-1;Rs.set(d,g),o.set(d,v),g||(Ta.has(d)||d.removeAttribute(r),Ta.delete(d)),v||d.removeAttribute(n)}),Su--,Su||(Rs=new WeakMap,Rs=new WeakMap,Ta=new WeakMap,Pa={})}},ow=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=qT(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),QT(r,s,n,"aria-hidden")):function(){return null}},gh="Dialog",[iw,b4]=Ct(gh),[ZT,_n]=iw(gh),aw=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=m.useRef(null),c=m.useRef(null),[u=!1,f]=Po({prop:r,defaultProp:s,onChange:o});return i.jsx(ZT,{scope:t,triggerRef:l,contentRef:c,contentId:Br(),titleId:Br(),descriptionId:Br(),open:u,onOpenChange:f,onOpenToggle:m.useCallback(()=>f(d=>!d),[f]),modal:a,children:n})};aw.displayName=gh;var lw="DialogTrigger",cw=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=_n(lw,n),o=Re(t,s.triggerRef);return i.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":xh(s.open),...r,ref:o,onClick:de(e.onClick,s.onOpenToggle)})});cw.displayName=lw;var vh="DialogPortal",[JT,uw]=iw(vh,{forceMount:void 0}),dw=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=_n(vh,t);return i.jsx(JT,{scope:t,forceMount:n,children:m.Children.map(r,a=>i.jsx(Dt,{present:n||o.open,children:i.jsx(nc,{asChild:!0,container:s,children:a})}))})};dw.displayName=vh;var Pl="DialogOverlay",fw=m.forwardRef((e,t)=>{const n=uw(Pl,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=_n(Pl,e.__scopeDialog);return o.modal?i.jsx(Dt,{present:r||o.open,children:i.jsx(tP,{...s,ref:t})}):null});fw.displayName=Pl;var eP=vo("DialogOverlay.RemoveScroll"),tP=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=_n(Pl,n);return i.jsx(ph,{as:eP,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(we.div,{"data-state":xh(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ss="DialogContent",hw=m.forwardRef((e,t)=>{const n=uw(Ss,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=_n(Ss,e.__scopeDialog);return i.jsx(Dt,{present:r||o.open,children:o.modal?i.jsx(nP,{...s,ref:t}):i.jsx(rP,{...s,ref:t})})});hw.displayName=Ss;var nP=m.forwardRef((e,t)=>{const n=_n(Ss,e.__scopeDialog),r=m.useRef(null),s=Re(t,n.contentRef,r);return m.useEffect(()=>{const o=r.current;if(o)return ow(o)},[]),i.jsx(mw,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:de(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:de(e.onFocusOutside,o=>o.preventDefault())})}),rP=m.forwardRef((e,t)=>{const n=_n(Ss,e.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return i.jsx(mw,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),mw=m.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=_n(Ss,n),c=m.useRef(null),u=Re(t,c);return X0(),i.jsxs(i.Fragment,{children:[i.jsx(mh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Yi,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":xh(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(sP,{titleId:l.titleId}),i.jsx(iP,{contentRef:c,descriptionId:l.descriptionId})]})]})}),yh="DialogTitle",pw=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=_n(yh,n);return i.jsx(we.h2,{id:s.titleId,...r,ref:t})});pw.displayName=yh;var gw="DialogDescription",vw=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=_n(gw,n);return i.jsx(we.p,{id:s.descriptionId,...r,ref:t})});vw.displayName=gw;var yw="DialogClose",xw=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=_n(yw,n);return i.jsx(we.button,{type:"button",...r,ref:t,onClick:de(e.onClick,()=>s.onOpenChange(!1))})});xw.displayName=yw;function xh(e){return e?"open":"closed"}var ww="DialogTitleWarning",[S4,bw]=wN(ww,{contentName:Ss,titleName:yh,docsSlug:"dialog"}),sP=({titleId:e})=>{const t=bw(ww),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},oP="DialogDescriptionWarning",iP=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${bw(oP).contentName}}.`;return m.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},aP=aw,lP=cw,cP=dw,Sw=fw,kw=hw,Nw=pw,jw=vw,uP=xw;const Jn=aP,dP=lP,fP=cP,Cw=m.forwardRef(({className:e,...t},n)=>i.jsx(Sw,{ref:n,className:Ce("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Cw.displayName=Sw.displayName;const Ln=m.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(fP,{children:[i.jsx(Cw,{}),i.jsxs(kw,{ref:r,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(uP,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(cc,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ln.displayName=kw.displayName;const er=({className:e,...t})=>i.jsx("div",{className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});er.displayName="DialogHeader";const tr=m.forwardRef(({className:e,...t},n)=>i.jsx(Nw,{ref:n,className:Ce("text-lg font-semibold leading-none tracking-tight",e),...t}));tr.displayName=Nw.displayName;const Al=m.forwardRef(({className:e,...t},n)=>i.jsx(jw,{ref:n,className:Ce("text-sm text-muted-foreground",e),...t}));Al.displayName=jw.displayName;var wh="Checkbox",[hP,k4]=Ct(wh),[mP,pP]=hP(wh),Ew=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[g,v]=m.useState(null),w=Re(t,j=>v(j)),p=m.useRef(!1),x=g?f||!!g.closest("form"):!0,[h=!1,y]=Po({prop:s,defaultProp:o,onChange:u}),S=m.useRef(h);return m.useEffect(()=>{const j=g==null?void 0:g.form;if(j){const N=()=>y(S.current);return j.addEventListener("reset",N),()=>j.removeEventListener("reset",N)}},[g,y]),i.jsxs(mP,{scope:n,state:h,disabled:l,children:[i.jsx(we.button,{type:"button",role:"checkbox","aria-checked":Ur(h)?"mixed":h,"aria-required":a,"data-state":Pw(h),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:w,onKeyDown:de(e.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:de(e.onClick,j=>{y(N=>Ur(N)?!0:!N),x&&(p.current=j.isPropagationStopped(),p.current||j.stopPropagation())})}),x&&i.jsx(gP,{control:g,bubbles:!p.current,name:r,value:c,checked:h,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Ur(o)?!1:o})]})});Ew.displayName=wh;var _w="CheckboxIndicator",Tw=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,o=pP(_w,n);return i.jsx(Dt,{present:r||Ur(o.state)||o.state===!0,children:i.jsx(we.span,{"data-state":Pw(o.state),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Tw.displayName=_w;var gP=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:s,...o}=e,a=m.useRef(null),l=I0(n),c=th(t);m.useEffect(()=>{const f=a.current,d=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&v){const w=new Event("click",{bubbles:r});f.indeterminate=Ur(n),v.call(f,Ur(n)?!1:n),f.dispatchEvent(w)}},[l,n,r]);const u=m.useRef(Ur(n)?!1:n);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...o,tabIndex:-1,ref:a,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ur(e){return e==="indeterminate"}function Pw(e){return Ur(e)?"indeterminate":e?"checked":"unchecked"}var Aw=Ew,vP=Tw;const Rw=m.forwardRef(({className:e,...t},n)=>i.jsx(Aw,{ref:n,className:Ce("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(vP,{className:Ce("flex items-center justify-center text-current"),children:i.jsx(Ar,{className:"h-4 w-4"})})}));Rw.displayName=Aw.displayName;function yP({song:e,currentTime:t,isPlaying:n,audioLevels:r={},className:s="",onSeek:o}){const a=m.useRef(null),l=m.useRef(),[c,u]=m.useState([]),[f,d]=m.useState(!1),[g,v]=m.useState(!1),[w,p]=m.useState(null);m.useEffect(()=>{if(!e){u([]);return}const N=bs.getCachedWaveform(e.id);if(N){console.log(`Loading cached waveform for "${e.title}" (${N.length} data points)`),u(N),d(!1);return}e.tracks.length>0?(console.log(`No cached waveform found for "${e.title}", generating...`),d(!0),bs.generateWaveformFromSong(e).then(C=>{u(C),d(!1)}).catch(C=>{console.error(`Failed to generate waveform for "${e.title}":`,C),u([]),d(!1)})):(console.log(`No tracks or cached waveform for "${e.title}"`),u([]),d(!1))},[e==null?void 0:e.id]);const x=()=>{const N=a.current;if(!N||!e)return;const C=N.getContext("2d");if(!C)return;const{width:P,height:T}=N,M=e.duration||240;if(C.clearRect(0,0,P,T),f){C.fillStyle="rgba(148, 163, 184, 0.7)",C.font='12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',C.textAlign="center",C.fillText("Generating waveform from audio...",P/2,T/2);return}if(c.length===0&&!e){C.fillStyle="rgba(148, 163, 184, 0.5)",C.font='11px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',C.textAlign="center",C.fillText("Select a song to see waveform",P/2,T/2);return}if(c.length===0&&e){C.fillStyle="rgba(148, 163, 184, 0.5)",C.font='11px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',C.textAlign="center",C.fillText("Waveform unavailable",P/2,T/2);return}if(C.fillStyle="rgba(15, 23, 42, 0.8)",C.fillRect(0,0,P,T),c.length===0)return;const A=P/c.length,R=T/2,E=T*.9;if(c.forEach((O,b)=>{const I=b*A,$=O*E,z=b/c.length*M;let _;if(z<=t)if(n){const W=Object.values(r).reduce((B,X)=>B+X,0)/Object.keys(r).length||0;_=`rgba(34, 197, 94, ${Math.min(1,W/50+.3)})`}else _="rgba(59, 130, 246, 0.7)";else z<=t+5&&n?_=`rgba(59, 130, 246, ${(1-(z-t)/5)*.4})`:_=`rgba(71, 85, 105, ${!n&&o&&c.length>0&&g?.8:.6})`;C.fillStyle=_,C.fillRect(I,R-$/2,Math.max(1,A-.5),$)}),M>0){const O=t/M*P;n?(C.shadowColor="rgba(34, 197, 94, 0.8)",C.shadowBlur=4,C.strokeStyle="rgba(34, 197, 94, 0.9)"):(C.shadowColor="rgba(255, 255, 255, 0.6)",C.shadowBlur=3,C.strokeStyle="rgba(255, 255, 255, 0.8)"),C.lineWidth=2,C.beginPath(),C.moveTo(O,0),C.lineTo(O,T),C.stroke(),C.shadowBlur=0}if(!n&&w!==null&&o&&c.length>0){const O=w*P;C.shadowColor="rgba(59, 130, 246, 0.6)",C.shadowBlur=3,C.strokeStyle="rgba(59, 130, 246, 0.8)",C.lineWidth=2,C.setLineDash([4,4]),C.beginPath(),C.moveTo(O,0),C.lineTo(O,T),C.stroke(),C.setLineDash([]),C.shadowBlur=0}if(M>0){C.fillStyle="rgba(148, 163, 184, 0.7)",C.font='10px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',C.textAlign="center";const O=30;for(let b=0;b<=M;b+=O){const I=b/M*P,$=Math.floor(b/60),U=Math.floor(b%60),z=`${$}:${U.toString().padStart(2,"0")}`;I>25&&I<P-25&&C.fillText(z,I,T-6)}}};m.useEffect(()=>{const N=()=>{x(),n&&(l.current=requestAnimationFrame(N))};return N(),()=>{l.current&&cancelAnimationFrame(l.current)}},[e,t,n,r,c,g,w]),m.useEffect(()=>{n||x()},[e,t,c,g,w]);const h=N=>{const C=a.current;if(!C||!e)return null;const P=C.getBoundingClientRect();let T;if("touches"in N){if(N.touches.length===0)return null;T=N.touches[0].clientX}else T=N.clientX;const M=T-P.left,A=P.width;return Math.max(0,Math.min(1,M/A))},y=N=>{if(!e||!o||n||c.length===0){p(null);return}const C=h(N);p(C)},S=N=>{if(!e||!o||n||c.length===0){p(null);return}N.preventDefault();const C=h(N);p(C)},j=N=>{if(!e||!o||n||c.length===0)return;const C=h(N);if(C===null)return;const P=e.duration||240,T=C*P;o(T)};return!e||e.tracks.length===0?i.jsx("div",{className:`bg-slate-900/80 rounded-lg border border-slate-700 ${s}`,children:i.jsx("div",{className:"flex items-center justify-center h-full text-slate-400 text-sm",children:"Load a song to see waveform"})}):i.jsx("div",{className:"bg-slate-900/80 overflow-hidden border border-gray-600 rounded w-full h-[68px] mt-[-10px] mb-[-10px] pt-[4px] pb-[4px]",children:i.jsx("canvas",{ref:a,width:400,height:60,className:"w-full h-full",style:{display:"block",height:"60px",cursor:!n&&e&&c.length>0&&o?"pointer":"default"},onClick:j,onTouchStart:j,onMouseMove:y,onTouchMove:S,onMouseEnter:()=>v(!0),onMouseLeave:()=>{v(!1),p(null)},onTouchEnd:()=>p(null)})})}const xP="modulepreload",wP=function(e){return"/"+e},rg={},Od=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=wP(c),c in rg)return;rg[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":xP,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((g,v)=>{d.addEventListener("load",g),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};class Iw{constructor(){this.listeners=new Set,this.updateInterval=null,this.syncTimeouts=[],this.durationTimeouts=[],this.onSongEndCallback=null,this.scheduledGainChanges=new Map,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.state={isPlaying:!1,currentTime:0,duration:0,tracks:[],masterVolume:.8,masterGainNode:null,masterOutputNode:null},this.setupMasterOutput()}setupMasterOutput(){this.state.masterGainNode=this.audioContext.createGain(),this.state.masterGainNode.gain.value=this.state.masterVolume,this.state.masterOutputNode=this.audioContext.createGain(),this.state.masterGainNode.connect(this.state.masterOutputNode),this.state.masterOutputNode.connect(this.audioContext.destination),console.log("🎵 Master output initialized")}async checkForProcessedVersions(t){return console.log("🎵 Loading original tracks..."),console.log(`🎵 Track loading complete: ${t.length} tracks ready`),t}async loadTracks(t){console.log(`🚀 Streaming load: ${t.length} tracks (deferred setup)`),this.clearTracks();const r=(await this.checkForProcessedVersions(t)).map(s=>({id:s.id,name:s.name,url:s.url,audioElement:null,source:null,gainNode:null,panNode:null,analyzerNode:null,volume:1,balance:0,isMuted:!1,isSolo:!1}));this.state.tracks=r,r.length>0&&setTimeout(()=>this.setupDurationDetection(),0),this.notifyListeners(),console.log(`✅ Streaming ready: ${r.length} tracks setup instantly (audio nodes created on demand)`)}async autoGenerateWaveform(t){if(this.state.tracks.length>0&&t){console.log(`Starting automatic waveform generation for "${t.title}"...`);try{const n=(async()=>{const{waveformGenerator:o}=await Od(async()=>{const{waveformGenerator:a}=await Promise.resolve().then(()=>rT);return{waveformGenerator:a}},void 0);return await o.generateWaveformFromSong(t)})(),r=new Promise((o,a)=>{setTimeout(()=>a(new Error("Waveform generation timeout")),3e4)}),s=await Promise.race([n,r]);console.log(`📈 Waveform auto-generated for "${t.title}" (${s.length} data points)`)}catch(n){console.warn(`⚠️ Failed to auto-generate waveform for "${t.title}" (continuing without waveform):`,n)}}}ensureTrackAudioNodes(t){if(!t.audioElement)try{t.audioElement=new Audio;const n=s=>{console.warn(`⚠️ Audio error for ${t.name}:`,s.type,s),t.audioElement=null,this.notifyListeners()};t.audioElement.addEventListener("error",n),t.audioElement.addEventListener("abort",n),t.audioElement.addEventListener("stalled",s=>{console.warn(`⚠️ Audio stalled for ${t.name}:`,s)}),t.audioElement.addEventListener("loadstart",()=>{console.log(`🔄 Loading started for ${t.name}`)});try{t.audioElement.src=t.url,t.audioElement.preload="none",t.audioElement.crossOrigin="anonymous"}catch(s){console.error(`❌ Failed to set audio src for ${t.name}:`,s),t.audioElement=null;return}const r=()=>{this.state.isPlaying&&(console.log(`🔄 Audio element ended event triggered for ${t.name}, triggering callback`),this.onSongEndCallback?this.onSongEndCallback():this.stop())};t.audioElement.addEventListener("ended",r),t.audioElement.onended=r;try{t.source=this.audioContext.createMediaElementSource(t.audioElement),t.gainNode=this.audioContext.createGain(),t.panNode=this.audioContext.createStereoPanner(),t.analyzerNode=this.audioContext.createAnalyser(),t.source.connect(t.gainNode),t.gainNode.connect(t.panNode),t.panNode.connect(t.analyzerNode),t.analyzerNode.connect(this.state.masterGainNode),t.analyzerNode.fftSize=512,t.analyzerNode.smoothingTimeConstant=.6,console.log(`🔧 Audio nodes created on demand for: ${t.name}`)}catch(s){console.error(`❌ Failed to create/connect audio nodes for ${t.name}:`,s),t.audioElement=null,t.source=null,t.gainNode=null,t.panNode=null,t.analyzerNode=null}}catch(n){console.error(`❌ Critical error creating audio nodes for ${t.name}:`,n),t.audioElement=null,t.source=null,t.gainNode=null,t.panNode=null,t.analyzerNode=null}}setupDurationDetection(){if(this.state.tracks.length===0)return;this.state.tracks.forEach(s=>{if(this.ensureTrackAudioNodes(s),s.audioElement){const o=()=>{if(this.state.tracks.length>0){const a=Math.max(...this.state.tracks.map(l=>{var c;return((c=l.audioElement)==null?void 0:c.duration)||0}));a>0&&a!==this.state.duration&&(this.state.duration=a,this.notifyListeners())}};s.audioElement.addEventListener("loadedmetadata",o),s.audioElement.onloadedmetadata=o}});let t=0;const n=50,r=()=>{if(this.state.tracks.length>0&&t<n){const s=Math.max(...this.state.tracks.map(o=>{var a;return((a=o.audioElement)==null?void 0:a.duration)||0}));if(s>0)this.state.duration=s,this.notifyListeners();else{t++;const o=window.setTimeout(r,100);this.durationTimeouts.push(o)}}};r()}async play(){if(this.state.tracks.length===0)return;this.state.tracks.forEach(n=>this.ensureTrackAudioNodes(n)),this.audioContext.state==="suspended"&&await this.audioContext.resume(),console.log(`▶️ Starting streaming playback: ${this.state.tracks.length} tracks`);const t=this.state.tracks.map(n=>{if(n.audioElement)try{return n.audioElement.currentTime=this.state.currentTime,n.audioElement.play().catch(r=>(console.warn(`⚠️ Failed to start streaming track ${n.name}:`,r),Promise.resolve()))}catch(r){return console.warn(`⚠️ Error setting currentTime for ${n.name}:`,r),Promise.resolve()}return Promise.resolve()});await Promise.allSettled(t),this.state.isPlaying=!0,this.startTimeTracking(),this.scheduleAllMuteRegions(this.state.currentTime),this.notifyListeners(),console.log("✅ Streaming playback started instantly")}pause(){this.state.tracks.forEach(t=>{t.audioElement&&t.audioElement.pause()}),this.state.isPlaying=!1,this.stopTimeTracking(),this.notifyListeners(),console.log("⏸️ Streaming playback paused")}stop(){this.state.tracks.forEach(t=>{t.audioElement&&(t.audioElement.pause(),t.audioElement.currentTime=0)}),this.state.isPlaying=!1,this.state.currentTime=0,this.stopTimeTracking(),this.notifyListeners(),console.log("⏹️ Streaming playback stopped")}seek(t){this.state.currentTime=Math.max(0,Math.min(this.state.duration,t)),this.state.tracks.forEach(n=>{n.audioElement&&(n.audioElement.currentTime=this.state.currentTime)}),this.state.isPlaying&&this.scheduleAllMuteRegions(this.state.currentTime),this.notifyListeners(),console.log(`⏯️ Streamed to ${this.state.currentTime.toFixed(1)}s`)}setTrackVolume(t,n){const r=this.state.tracks.find(s=>s.id===t);if(r&&(r.volume=n,this.ensureTrackAudioNodes(r),r.gainNode)){const s=n>1?n/100:n;r.gainNode.gain.value=r.isMuted?0:s}}toggleTrackMute(t){const n=this.state.tracks.find(r=>r.id===t);if(n&&(n.isMuted=!n.isMuted,this.ensureTrackAudioNodes(n),n.gainNode)){const r=n.volume>1?n.volume/100:n.volume;n.gainNode.gain.value=n.isMuted?0:r}}toggleTrackSolo(t){const n=this.state.tracks.find(r=>r.id===t);n&&(n.isSolo=!n.isSolo,this.updateSoloStates())}setTrackBalance(t,n){const r=this.state.tracks.find(s=>s.id===t);r&&(r.balance=n,this.ensureTrackAudioNodes(r),r.panNode&&(r.panNode.pan.value=n))}updateSoloStates(){const t=this.state.tracks.some(n=>n.isSolo);this.state.tracks.forEach(n=>{this.ensureTrackAudioNodes(n);const r=t&&!n.isSolo;if(n.gainNode){const s=n.volume>1?n.volume/100:n.volume;n.gainNode.gain.value=r?0:s}})}setMasterVolume(t){this.state.masterVolume=t,this.state.masterGainNode&&(this.state.masterGainNode.gain.value=t)}setTrackMuteRegions(t,n){const r=this.state.tracks.find(s=>s.id===t);r&&(r.muteRegions=n,console.log(`🔇 Set ${n.length} mute regions for track: ${r.name}`))}clearScheduledGainChanges(t){const n=this.state.tracks.find(r=>r.id===t);n&&n.gainNode&&n.gainNode.gain.cancelScheduledValues(this.audioContext.currentTime),this.scheduledGainChanges.delete(t)}scheduleTrackMuteRegions(t,n){if(!t.gainNode||!t.muteRegions||t.muteRegions.length===0)return;this.clearScheduledGainChanges(t.id);const r=[],s=this.state.tracks.some(l=>l.isSolo),a=t.isMuted||s&&!t.isSolo?0:t.volume>1?t.volume/100:t.volume;t.gainNode.gain.cancelScheduledValues(this.audioContext.currentTime),t.gainNode.gain.setValueAtTime(a,this.audioContext.currentTime),t.muteRegions.forEach(l=>{const c=this.audioContext.currentTime+Math.max(0,l.start-n),u=this.audioContext.currentTime+Math.max(0,l.end-n);l.end>n&&t.gainNode&&(l.start<=n&&l.end>n&&t.gainNode.gain.setValueAtTime(0,this.audioContext.currentTime),l.start>n&&t.gainNode.gain.setValueAtTime(0,c),l.end>n&&t.gainNode.gain.setValueAtTime(a,u))}),this.scheduledGainChanges.set(t.id,r),console.log(`⏰ Scheduled mute automation for track: ${t.name} from position ${Math.round(n)}s`)}scheduleAllMuteRegions(t){this.state.tracks.forEach(n=>{this.scheduleTrackMuteRegions(n,t)})}getTrackLevels(t){const n=this.state.tracks.find(d=>d.id===t);if(!n||!n.analyzerNode||!this.state.isPlaying)return{left:0,right:0};const r=n.analyzerNode.frequencyBinCount,s=new Uint8Array(r);n.analyzerNode.getByteFrequencyData(s);const o=Math.floor(r*.02),a=Math.floor(r*.95);let l=0,c=0;for(let d=o;d<a;d++){let g=1;d<r*.08||d<r*.2?g=20:d<r*.4?g=1.26:g=.99,l+=s[d]*g,c+=g}const f=l/c/255*100;return{left:f,right:f}}getMasterLevels(){return this.state.isPlaying?this.state.tracks.reduce((n,r)=>{const s=this.getTrackLevels(r.id);return{left:Math.max(n.left,s.left),right:Math.max(n.right,s.right)}},{left:0,right:0}):{left:0,right:0}}setOnSongEndCallback(t){this.onSongEndCallback=t}startTimeTracking(){this.stopTimeTracking(),this.updateInterval=window.setInterval(()=>{if(this.state.isPlaying&&this.state.tracks.length>0){const t=this.state.tracks[0];if(t.audioElement){const n=t.audioElement.currentTime;if(this.state.currentTime=n,this.state.duration>0&&n>=this.state.duration-.1){console.log(`🔄 Song ended automatically at ${n.toFixed(2)}s (duration: ${this.state.duration.toFixed(2)}s), triggering callback`),this.onSongEndCallback?this.onSongEndCallback():this.stop();return}this.notifyListeners()}}},16)}stopTimeTracking(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null),this.syncTimeouts.forEach(t=>clearTimeout(t)),this.syncTimeouts=[],this.clearAllTimeouts()}clearTracks(){this.state.tracks.forEach(t=>{if(t.audioElement){if(t.audioElement.pause(),t.audioElement.removeEventListener("ended",t.audioElement.onended),t.audioElement.removeEventListener("loadedmetadata",t.audioElement.onloadedmetadata),t.source)try{t.source.disconnect()}catch{}if(t.gainNode)try{t.gainNode.disconnect()}catch{}if(t.panNode)try{t.panNode.disconnect()}catch{}if(t.analyzerNode)try{t.analyzerNode.disconnect()}catch{}t.audioElement.src="",t.audioElement.load()}t.audioElement=null,t.source=null,t.gainNode=null,t.panNode=null,t.analyzerNode=null}),this.state.tracks=[],this.clearAllTimeouts()}clearAllTimeouts(){this.durationTimeouts.forEach(t=>clearTimeout(t)),this.durationTimeouts=[]}getState(){return{...this.state}}get isLoading(){return!1}get isReady(){return this.state.tracks.length>0}subscribe(t){return this.listeners.add(t),()=>this.listeners.delete(t)}notifyListeners(){this.listeners.forEach(t=>t())}dispose(){if(this.stopTimeTracking(),this.clearTracks(),this.clearAllTimeouts(),this.state.masterGainNode)try{this.state.masterGainNode.disconnect()}catch{}/Edg|Edge/.test(navigator.userAgent)&&(console.log("📱 Edge browser: Forcing memory cleanup"),setTimeout(()=>{window.gc&&window.gc()},100)),this.audioContext.state!=="closed"&&this.audioContext.close()}}function Mw(e){var U;let t,n;e&&"song"in e?(t=e.song,n=e.onDurationUpdated):t=e;const{user:r}=hr(),[s,o]=m.useState(!1),[a,l]=m.useState(0),[c,u]=m.useState(0),[f,d]=m.useState({}),[g,v]=m.useState({left:0,right:0}),[w,p]=m.useState(23),[x,h]=m.useState(!0),[y,S]=m.useState(85),[j,N]=m.useState(!1),C=m.useRef(null),P=m.useRef(),T=m.useCallback(()=>{C.current&&(C.current.stop(),o(!1),l(0))},[]);m.useEffect(()=>((async()=>{try{C.current=new Iw,C.current.setOnSongEndCallback(()=>{console.log("🔄 Song ended automatically - using same path as stop button"),T()});const _=C.current.subscribe(()=>{if(C.current){const W=C.current.getState();if(W.duration>0&&W.duration!==c){const D=Math.round(W.duration);console.log(`Duration updated from streaming engine: ${D}s`),u(D),t&&n&&(console.log(`Saving updated duration ${D}s to database for song: ${t.title}`),n(t.id,D))}}});C.current.unsubscribe=_,h(!0)}catch(_){console.error("Failed to initialize audio engine:",_),h(!1)}})(),()=>{C.current&&(C.current.unsubscribe&&C.current.unsubscribe(),C.current.dispose()),P.current&&cancelAnimationFrame(P.current)}),[T]),m.useEffect(()=>{t&&C.current&&(console.log(`Song selected: "${t.title}" with ${t.tracks.length} tracks - loading for streaming`),u(t.duration),l(0),o(!1),console.log(`Setting up streaming for: "${t.title}" - UI stays responsive`),(async()=>{var _;try{const W=$n.getInstance(),D=t.tracks.map(async Y=>{const Z=await W.getAudioUrl(Y.id);return Z?{id:Y.id,name:Y.name,url:Z}:null}),X=(await Promise.all(D)).filter(Y=>Y!==null);(_=C.current)==null||_.loadTracks(X),C.current&&(r!=null&&r.email)&&t&&t.tracks.forEach(Y=>{var Z;try{const le=Fe.getMuteRegions(r.email,t.id,Y.id);le&&le.length>0&&((Z=C.current)==null||Z.setTrackMuteRegions(Y.id,le),console.log(`🔇 Loaded ${le.length} mute regions for track: ${Y.name}`))}catch(le){console.warn(`Failed to load mute regions for track ${Y.name}:`,le)}}),C.current&&typeof C.current.autoGenerateWaveform=="function"&&C.current.autoGenerateWaveform(t),console.log(`✅ Streaming ready for "${t.title}" - instant playback available`)}catch(W){console.error(`❌ Streaming setup failed for "${t.title}":`,W)}})())},[t==null?void 0:t.id,(U=t==null?void 0:t.tracks)==null?void 0:U.length,r==null?void 0:r.email]),m.useEffect(()=>{const z=()=>{if(C.current&&t){const D=C.current.getState(),B=D.isPlaying;if(B){const X=D.currentTime;l(X),p(20+Math.random()*10),c>0&&X>=c&&(console.log(`Auto-stopping playback - time: ${X.toFixed(2)}s, duration: ${c}s`),o(!1),l(c))}s!==B&&o(B)}P.current=requestAnimationFrame(z)},_=()=>{if(C.current&&t&&s){const D={};t.tracks.forEach(X=>{const Y=C.current.getTrackLevels(X.id);D[X.id]=Math.max(Y.left,Y.right)}),d(D);const B=C.current.getMasterLevels();v(B)}};P.current=requestAnimationFrame(z);const W=setInterval(_,25);return()=>{P.current&&cancelAnimationFrame(P.current),clearInterval(W)}},[t==null?void 0:t.id,s]);const M=m.useCallback(async()=>{if(!(!C.current||!t)){if(!C.current.isReady){console.log("Tracks not loaded, cannot start playback yet");return}try{await C.current.play(),o(!0)}catch(z){console.error("Failed to start playback:",z),o(!1)}}},[t]),A=m.useCallback(()=>{C.current&&(C.current.pause(),o(!1))},[]),R=m.useCallback(async z=>{C.current&&(C.current.seek(z),l(Math.round(z*10)/10))},[]),E=m.useCallback(async(z,_)=>{C.current&&C.current.setTrackVolume(z,_)},[]),O=m.useCallback(async(z,_)=>{C.current&&C.current.setTrackBalance(z,_)},[]),b=m.useCallback(async z=>{C.current&&C.current.toggleTrackMute(z)},[]),I=m.useCallback(async z=>{C.current&&C.current.toggleTrackSolo(z)},[]),$=m.useCallback(z=>{C.current&&(C.current.setMasterVolume(z/100),S(z))},[]);return{isPlaying:s,currentTime:a,duration:c,audioLevels:f,masterStereoLevels:g,cpuUsage:w,isAudioEngineOnline:x,masterVolume:y,isLoadingTracks:j,audioEngine:C.current,play:M,pause:A,stop:T,seek:R,updateTrackVolume:E,updateTrackBalance:O,updateTrackMute:b,updateTrackSolo:I,updateMasterVolume:$}}function bP({onPlay:e,onPause:t,onStop:n,onTogglePlayback:r,onTrackMute:s,isPlaying:o}){m.useEffect(()=>{const a=l=>{if(!(l.target instanceof HTMLInputElement||l.target instanceof HTMLTextAreaElement))switch(l.code){case"Space":l.preventDefault(),r();break;case"KeyS":l.preventDefault(),n();break;case"KeyP":!l.ctrlKey&&!l.metaKey&&(l.preventDefault(),console.log("Previous song shortcut"));break;case"KeyN":!l.ctrlKey&&!l.metaKey&&(l.preventDefault(),console.log("Next song shortcut"));break;case"KeyR":l.preventDefault(),console.log("Rewind shortcut");break;case"KeyF":l.preventDefault(),console.log("Fast forward shortcut");break;case"Digit1":case"Digit2":case"Digit3":case"Digit4":case"Digit5":case"Digit6":if(!l.ctrlKey&&!l.metaKey){l.preventDefault();const c=parseInt(l.code.slice(-1));console.log(`Mute track ${c} shortcut`)}else{l.preventDefault();const c=parseInt(l.code.slice(-1));console.log(`Solo track ${c} shortcut`)}break;case"F1":l.preventDefault(),console.log("Help shortcut");break;case"Comma":(l.ctrlKey||l.metaKey)&&(l.preventDefault(),console.log("Settings shortcut"));break}};return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[e,t,n,r,s,o])}var ku="rovingFocusGroup.onEntryFocus",SP={bubbles:!1,cancelable:!0},xc="RovingFocusGroup",[Ld,Dw,kP]=tc(xc),[NP,Ow]=Ct(xc,[kP]),[jP,CP]=NP(xc),Lw=m.forwardRef((e,t)=>i.jsx(Ld.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Ld.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(EP,{...e,ref:t})})}));Lw.displayName=xc;var EP=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,g=m.useRef(null),v=Re(t,g),w=Mo(o),[p=null,x]=Po({prop:a,defaultProp:l,onChange:c}),[h,y]=m.useState(!1),S=qe(u),j=Dw(n),N=m.useRef(!1),[C,P]=m.useState(0);return m.useEffect(()=>{const T=g.current;if(T)return T.addEventListener(ku,S),()=>T.removeEventListener(ku,S)},[S]),i.jsx(jP,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:p,onItemFocus:m.useCallback(T=>x(T),[x]),onItemShiftTab:m.useCallback(()=>y(!0),[]),onFocusableItemAdd:m.useCallback(()=>P(T=>T+1),[]),onFocusableItemRemove:m.useCallback(()=>P(T=>T-1),[]),children:i.jsx(we.div,{tabIndex:h||C===0?-1:0,"data-orientation":r,...d,ref:v,style:{outline:"none",...e.style},onMouseDown:de(e.onMouseDown,()=>{N.current=!0}),onFocus:de(e.onFocus,T=>{const M=!N.current;if(T.target===T.currentTarget&&M&&!h){const A=new CustomEvent(ku,SP);if(T.currentTarget.dispatchEvent(A),!A.defaultPrevented){const R=j().filter($=>$.focusable),E=R.find($=>$.active),O=R.find($=>$.id===p),I=[E,O,...R].filter(Boolean).map($=>$.ref.current);zw(I,f)}}N.current=!1}),onBlur:de(e.onBlur,()=>y(!1))})})}),Fw="RovingFocusGroupItem",$w=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,...a}=e,l=Br(),c=o||l,u=CP(Fw,n),f=u.currentTabStopId===c,d=Dw(n),{onFocusableItemAdd:g,onFocusableItemRemove:v}=u;return m.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),i.jsx(Ld.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:i.jsx(we.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:de(e.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:de(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:de(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const p=PP(w,u.orientation,u.dir);if(p!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let h=d().filter(y=>y.focusable).map(y=>y.ref.current);if(p==="last")h.reverse();else if(p==="prev"||p==="next"){p==="prev"&&h.reverse();const y=h.indexOf(w.currentTarget);h=u.loop?AP(h,y+1):h.slice(y+1)}setTimeout(()=>zw(h))}})})})});$w.displayName=Fw;var _P={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function TP(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function PP(e,t,n){const r=TP(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return _P[r]}function zw(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function AP(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var RP=Lw,IP=$w,Fd=["Enter"," "],MP=["ArrowDown","PageUp","Home"],Bw=["ArrowUp","PageDown","End"],DP=[...MP,...Bw],OP={ltr:[...Fd,"ArrowRight"],rtl:[...Fd,"ArrowLeft"]},LP={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xi="Menu",[Li,FP,$P]=tc(Xi),[js,Uw]=Ct(Xi,[$P,hc,Ow]),wc=hc(),Ww=Ow(),[zP,Cs]=js(Xi),[BP,Qi]=js(Xi),Vw=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:o,modal:a=!0}=e,l=wc(t),[c,u]=m.useState(null),f=m.useRef(!1),d=qe(o),g=Mo(s);return m.useEffect(()=>{const v=()=>{f.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>f.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),i.jsx(jE,{...l,children:i.jsx(zP,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:u,children:i.jsx(BP,{scope:t,onClose:m.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:g,modal:a,children:r})})})};Vw.displayName=Xi;var UP="MenuAnchor",bh=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=wc(n);return i.jsx(r0,{...s,...r,ref:t})});bh.displayName=UP;var Sh="MenuPortal",[WP,Hw]=js(Sh,{forceMount:void 0}),Kw=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,o=Cs(Sh,t);return i.jsx(WP,{scope:t,forceMount:n,children:i.jsx(Dt,{present:n||o.open,children:i.jsx(nc,{asChild:!0,container:s,children:r})})})};Kw.displayName=Sh;var dn="MenuContent",[VP,kh]=js(dn),Gw=m.forwardRef((e,t)=>{const n=Hw(dn,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=Cs(dn,e.__scopeMenu),a=Qi(dn,e.__scopeMenu);return i.jsx(Li.Provider,{scope:e.__scopeMenu,children:i.jsx(Dt,{present:r||o.open,children:i.jsx(Li.Slot,{scope:e.__scopeMenu,children:a.modal?i.jsx(HP,{...s,ref:t}):i.jsx(KP,{...s,ref:t})})})})}),HP=m.forwardRef((e,t)=>{const n=Cs(dn,e.__scopeMenu),r=m.useRef(null),s=Re(t,r);return m.useEffect(()=>{const o=r.current;if(o)return ow(o)},[]),i.jsx(Nh,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:de(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),KP=m.forwardRef((e,t)=>{const n=Cs(dn,e.__scopeMenu);return i.jsx(Nh,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),GP=vo("MenuContent.ScrollLock"),Nh=m.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:g,onDismiss:v,disableOutsideScroll:w,...p}=e,x=Cs(dn,n),h=Qi(dn,n),y=wc(n),S=Ww(n),j=FP(n),[N,C]=m.useState(null),P=m.useRef(null),T=Re(t,P,x.onContentChange),M=m.useRef(0),A=m.useRef(""),R=m.useRef(0),E=m.useRef(null),O=m.useRef("right"),b=m.useRef(0),I=w?ph:m.Fragment,$=w?{as:GP,allowPinchZoom:!0}:void 0,U=_=>{var ve,ge;const W=A.current+_,D=j().filter(Q=>!Q.disabled),B=document.activeElement,X=(ve=D.find(Q=>Q.ref.current===B))==null?void 0:ve.textValue,Y=D.map(Q=>Q.textValue),Z=oA(Y,W,X),le=(ge=D.find(Q=>Q.textValue===Z))==null?void 0:ge.ref.current;(function Q(ue){A.current=ue,window.clearTimeout(M.current),ue!==""&&(M.current=window.setTimeout(()=>Q(""),1e3))})(W),le&&setTimeout(()=>le.focus())};m.useEffect(()=>()=>window.clearTimeout(M.current),[]),X0();const z=m.useCallback(_=>{var D,B;return O.current===((D=E.current)==null?void 0:D.side)&&aA(_,(B=E.current)==null?void 0:B.area)},[]);return i.jsx(VP,{scope:n,searchRef:A,onItemEnter:m.useCallback(_=>{z(_)&&_.preventDefault()},[z]),onItemLeave:m.useCallback(_=>{var W;z(_)||((W=P.current)==null||W.focus(),C(null))},[z]),onTriggerLeave:m.useCallback(_=>{z(_)&&_.preventDefault()},[z]),pointerGraceTimerRef:R,onPointerGraceIntentChange:m.useCallback(_=>{E.current=_},[]),children:i.jsx(I,{...$,children:i.jsx(mh,{asChild:!0,trapped:s,onMountAutoFocus:de(o,_=>{var W;_.preventDefault(),(W=P.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Yi,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:g,onDismiss:v,children:i.jsx(RP,{asChild:!0,...S,dir:h.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:C,onEntryFocus:de(c,_=>{h.isUsingKeyboardRef.current||_.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(s0,{role:"menu","aria-orientation":"vertical","data-state":cb(x.open),"data-radix-menu-content":"",dir:h.dir,...y,...p,ref:T,style:{outline:"none",...p.style},onKeyDown:de(p.onKeyDown,_=>{const D=_.target.closest("[data-radix-menu-content]")===_.currentTarget,B=_.ctrlKey||_.altKey||_.metaKey,X=_.key.length===1;D&&(_.key==="Tab"&&_.preventDefault(),!B&&X&&U(_.key));const Y=P.current;if(_.target!==Y||!DP.includes(_.key))return;_.preventDefault();const le=j().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);Bw.includes(_.key)&&le.reverse(),rA(le)}),onBlur:de(e.onBlur,_=>{_.currentTarget.contains(_.target)||(window.clearTimeout(M.current),A.current="")}),onPointerMove:de(e.onPointerMove,Fi(_=>{const W=_.target,D=b.current!==_.clientX;if(_.currentTarget.contains(W)&&D){const B=_.clientX>b.current?"right":"left";O.current=B,b.current=_.clientX}}))})})})})})})});Gw.displayName=dn;var YP="MenuGroup",jh=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(we.div,{role:"group",...r,ref:t})});jh.displayName=YP;var qP="MenuLabel",Yw=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(we.div,{...r,ref:t})});Yw.displayName=qP;var Rl="MenuItem",sg="menu.itemSelect",bc=m.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,o=m.useRef(null),a=Qi(Rl,e.__scopeMenu),l=kh(Rl,e.__scopeMenu),c=Re(t,o),u=m.useRef(!1),f=()=>{const d=o.current;if(!n&&d){const g=new CustomEvent(sg,{bubbles:!0,cancelable:!0});d.addEventListener(sg,v=>r==null?void 0:r(v),{once:!0}),Wf(d,g),g.defaultPrevented?u.current=!1:a.onClose()}};return i.jsx(qw,{...s,ref:c,disabled:n,onClick:de(e.onClick,f),onPointerDown:d=>{var g;(g=e.onPointerDown)==null||g.call(e,d),u.current=!0},onPointerUp:de(e.onPointerUp,d=>{var g;u.current||(g=d.currentTarget)==null||g.click()}),onKeyDown:de(e.onKeyDown,d=>{const g=l.searchRef.current!=="";n||g&&d.key===" "||Fd.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});bc.displayName=Rl;var qw=m.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=e,a=kh(Rl,n),l=Ww(n),c=m.useRef(null),u=Re(t,c),[f,d]=m.useState(!1),[g,v]=m.useState("");return m.useEffect(()=>{const w=c.current;w&&v((w.textContent??"").trim())},[o.children]),i.jsx(Li.ItemSlot,{scope:n,disabled:r,textValue:s??g,children:i.jsx(IP,{asChild:!0,...l,focusable:!r,children:i.jsx(we.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:de(e.onPointerMove,Fi(w=>{r?a.onItemLeave(w):(a.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:de(e.onPointerLeave,Fi(w=>a.onItemLeave(w))),onFocus:de(e.onFocus,()=>d(!0)),onBlur:de(e.onBlur,()=>d(!1))})})})}),XP="MenuCheckboxItem",Xw=m.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return i.jsx(tb,{scope:e.__scopeMenu,checked:n,children:i.jsx(bc,{role:"menuitemcheckbox","aria-checked":Il(n)?"mixed":n,...s,ref:t,"data-state":Eh(n),onSelect:de(s.onSelect,()=>r==null?void 0:r(Il(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Xw.displayName=XP;var Qw="MenuRadioGroup",[QP,ZP]=js(Qw,{value:void 0,onValueChange:()=>{}}),Zw=m.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,o=qe(r);return i.jsx(QP,{scope:e.__scopeMenu,value:n,onValueChange:o,children:i.jsx(jh,{...s,ref:t})})});Zw.displayName=Qw;var Jw="MenuRadioItem",eb=m.forwardRef((e,t)=>{const{value:n,...r}=e,s=ZP(Jw,e.__scopeMenu),o=n===s.value;return i.jsx(tb,{scope:e.__scopeMenu,checked:o,children:i.jsx(bc,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":Eh(o),onSelect:de(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});eb.displayName=Jw;var Ch="MenuItemIndicator",[tb,JP]=js(Ch,{checked:!1}),nb=m.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,o=JP(Ch,n);return i.jsx(Dt,{present:r||Il(o.checked)||o.checked===!0,children:i.jsx(we.span,{...s,ref:t,"data-state":Eh(o.checked)})})});nb.displayName=Ch;var eA="MenuSeparator",rb=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(we.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});rb.displayName=eA;var tA="MenuArrow",sb=m.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=wc(n);return i.jsx(o0,{...s,...r,ref:t})});sb.displayName=tA;var nA="MenuSub",[N4,ob]=js(nA),ri="MenuSubTrigger",ib=m.forwardRef((e,t)=>{const n=Cs(ri,e.__scopeMenu),r=Qi(ri,e.__scopeMenu),s=ob(ri,e.__scopeMenu),o=kh(ri,e.__scopeMenu),a=m.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},f=m.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return m.useEffect(()=>f,[f]),m.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),i.jsx(bh,{asChild:!0,...u,children:i.jsx(qw,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":cb(n.open),...e,ref:Gi(t,s.onTriggerChange),onClick:d=>{var g;(g=e.onClick)==null||g.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:de(e.onPointerMove,Fi(d=>{o.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:de(e.onPointerLeave,Fi(d=>{var v,w;f();const g=(v=n.content)==null?void 0:v.getBoundingClientRect();if(g){const p=(w=n.content)==null?void 0:w.dataset.side,x=p==="right",h=x?-5:5,y=g[x?"left":"right"],S=g[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+h,y:d.clientY},{x:y,y:g.top},{x:S,y:g.top},{x:S,y:g.bottom},{x:y,y:g.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:de(e.onKeyDown,d=>{var v;const g=o.searchRef.current!=="";e.disabled||g&&d.key===" "||OP[r.dir].includes(d.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),d.preventDefault())})})})});ib.displayName=ri;var ab="MenuSubContent",lb=m.forwardRef((e,t)=>{const n=Hw(dn,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,o=Cs(dn,e.__scopeMenu),a=Qi(dn,e.__scopeMenu),l=ob(ab,e.__scopeMenu),c=m.useRef(null),u=Re(t,c);return i.jsx(Li.Provider,{scope:e.__scopeMenu,children:i.jsx(Dt,{present:r||o.open,children:i.jsx(Li.Slot,{scope:e.__scopeMenu,children:i.jsx(Nh,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;a.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:de(e.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:de(e.onEscapeKeyDown,f=>{a.onClose(),f.preventDefault()}),onKeyDown:de(e.onKeyDown,f=>{var v;const d=f.currentTarget.contains(f.target),g=LP[a.dir].includes(f.key);d&&g&&(o.onOpenChange(!1),(v=l.trigger)==null||v.focus(),f.preventDefault())})})})})})});lb.displayName=ab;function cb(e){return e?"open":"closed"}function Il(e){return e==="indeterminate"}function Eh(e){return Il(e)?"indeterminate":e?"checked":"unchecked"}function rA(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function sA(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function oA(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=sA(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function iA(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o].x,c=t[o].y,u=t[a].x,f=t[a].y;c>r!=f>r&&n<(u-l)*(r-c)/(f-c)+l&&(s=!s)}return s}function aA(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return iA(n,t)}function Fi(e){return t=>t.pointerType==="mouse"?e(t):void 0}var lA=Vw,cA=bh,uA=Kw,dA=Gw,fA=jh,hA=Yw,mA=bc,pA=Xw,gA=Zw,vA=eb,yA=nb,xA=rb,wA=sb,bA=ib,SA=lb,_h="DropdownMenu",[kA,j4]=Ct(_h,[Uw]),Ot=Uw(),[NA,ub]=kA(_h),db=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=e,c=Ot(t),u=m.useRef(null),[f=!1,d]=Po({prop:s,defaultProp:o,onChange:a});return i.jsx(NA,{scope:t,triggerId:Br(),triggerRef:u,contentId:Br(),open:f,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(g=>!g),[d]),modal:l,children:i.jsx(lA,{...c,open:f,onOpenChange:d,dir:r,modal:l,children:n})})};db.displayName=_h;var fb="DropdownMenuTrigger",hb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,o=ub(fb,n),a=Ot(n);return i.jsx(cA,{asChild:!0,...a,children:i.jsx(we.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Gi(t,o.triggerRef),onPointerDown:de(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:de(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});hb.displayName=fb;var jA="DropdownMenuPortal",mb=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ot(t);return i.jsx(uA,{...r,...n})};mb.displayName=jA;var pb="DropdownMenuContent",gb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=ub(pb,n),o=Ot(n),a=m.useRef(!1);return i.jsx(dA,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:t,onCloseAutoFocus:de(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:de(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!s.modal||f)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gb.displayName=pb;var CA="DropdownMenuGroup",EA=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(fA,{...s,...r,ref:t})});EA.displayName=CA;var _A="DropdownMenuLabel",vb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(hA,{...s,...r,ref:t})});vb.displayName=_A;var TA="DropdownMenuItem",yb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(mA,{...s,...r,ref:t})});yb.displayName=TA;var PA="DropdownMenuCheckboxItem",xb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(pA,{...s,...r,ref:t})});xb.displayName=PA;var AA="DropdownMenuRadioGroup",RA=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(gA,{...s,...r,ref:t})});RA.displayName=AA;var IA="DropdownMenuRadioItem",wb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(vA,{...s,...r,ref:t})});wb.displayName=IA;var MA="DropdownMenuItemIndicator",bb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(yA,{...s,...r,ref:t})});bb.displayName=MA;var DA="DropdownMenuSeparator",Sb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(xA,{...s,...r,ref:t})});Sb.displayName=DA;var OA="DropdownMenuArrow",LA=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(wA,{...s,...r,ref:t})});LA.displayName=OA;var FA="DropdownMenuSubTrigger",kb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(bA,{...s,...r,ref:t})});kb.displayName=FA;var $A="DropdownMenuSubContent",Nb=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ot(n);return i.jsx(SA,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Nb.displayName=$A;var zA=db,BA=hb,UA=mb,jb=gb,Cb=vb,Eb=yb,_b=xb,Tb=wb,Pb=bb,Ab=Sb,Rb=kb,Ib=Nb;const WA=zA,VA=BA,HA=m.forwardRef(({className:e,inset:t,children:n,...r},s)=>i.jsxs(Rb,{ref:s,className:Ce("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,i.jsx(bx,{className:"ml-auto"})]}));HA.displayName=Rb.displayName;const KA=m.forwardRef(({className:e,...t},n)=>i.jsx(Ib,{ref:n,className:Ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));KA.displayName=Ib.displayName;const Mb=m.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(UA,{children:i.jsx(jb,{ref:r,sideOffset:t,className:Ce("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Mb.displayName=jb.displayName;const ts=m.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(Eb,{ref:r,className:Ce("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));ts.displayName=Eb.displayName;const GA=m.forwardRef(({className:e,children:t,checked:n,...r},s)=>i.jsxs(_b,{ref:s,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Pb,{children:i.jsx(Ar,{className:"h-4 w-4"})})}),t]}));GA.displayName=_b.displayName;const YA=m.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Tb,{ref:r,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Pb,{children:i.jsx(Sx,{className:"h-2 w-2 fill-current"})})}),t]}));YA.displayName=Tb.displayName;const qA=m.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(Cb,{ref:r,className:Ce("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));qA.displayName=Cb.displayName;const si=m.forwardRef(({className:e,...t},n)=>i.jsx(Ab,{ref:n,className:Ce("-mx-1 my-1 h-px bg-muted",e),...t}));si.displayName=Ab.displayName;const zt=m.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));zt.displayName="Input";const Th=m.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:Ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Th.displayName="Textarea";function Aa(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Db={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,o){function a(u,f){if(!s[u]){if(!r[u]){var d=typeof Aa=="function"&&Aa;if(!f&&d)return d(u,!0);if(l)return l(u,!0);var g=new Error("Cannot find module '"+u+"'");throw g.code="MODULE_NOT_FOUND",g}var v=s[u]={exports:{}};r[u][0].call(v.exports,function(w){var p=r[u][1][w];return a(p||w)},v,v.exports,n,r,s,o)}return s[u].exports}for(var l=typeof Aa=="function"&&Aa,c=0;c<o.length;c++)a(o[c]);return a}({1:[function(n,r,s){var o=n("./utils"),a=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var u,f,d,g,v,w,p,x=[],h=0,y=c.length,S=y,j=o.getTypeOf(c)!=="string";h<c.length;)S=y-h,d=j?(u=c[h++],f=h<y?c[h++]:0,h<y?c[h++]:0):(u=c.charCodeAt(h++),f=h<y?c.charCodeAt(h++):0,h<y?c.charCodeAt(h++):0),g=u>>2,v=(3&u)<<4|f>>4,w=1<S?(15&f)<<2|d>>6:64,p=2<S?63&d:64,x.push(l.charAt(g)+l.charAt(v)+l.charAt(w)+l.charAt(p));return x.join("")},s.decode=function(c){var u,f,d,g,v,w,p=0,x=0,h="data:";if(c.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var y,S=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&S--,c.charAt(c.length-2)===l.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|S):new Array(0|S);p<c.length;)u=l.indexOf(c.charAt(p++))<<2|(g=l.indexOf(c.charAt(p++)))>>4,f=(15&g)<<4|(v=l.indexOf(c.charAt(p++)))>>2,d=(3&v)<<6|(w=l.indexOf(c.charAt(p++))),y[x++]=u,v!==64&&(y[x++]=f),w!==64&&(y[x++]=d);return y}},{"./support":30,"./utils":32}],2:[function(n,r,s){var o=n("./external"),a=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(f,d,g,v,w){this.compressedSize=f,this.uncompressedSize=d,this.crc32=g,this.compression=v,this.compressedContent=w}u.prototype={getContentWorker:function(){var f=new a(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),d=this;return f.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new a(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(f,d,g){return f.pipe(new l).pipe(new c("uncompressedSize")).pipe(d.compressWorker(g)).pipe(new c("compressedSize")).withStreamInfo("compression",d)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var o=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var o=n("./utils"),a=function(){for(var l,c=[],u=0;u<256;u++){l=u;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;c[u]=l}return c}();r.exports=function(l,c){return l!==void 0&&l.length?o.getTypeOf(l)!=="string"?function(u,f,d,g){var v=a,w=g+d;u^=-1;for(var p=g;p<w;p++)u=u>>>8^v[255&(u^f[p])];return-1^u}(0|c,l,l.length,0):function(u,f,d,g){var v=a,w=g+d;u^=-1;for(var p=g;p<w;p++)u=u>>>8^v[255&(u^f.charCodeAt(p))];return-1^u}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var o=null;o=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:o}},{lie:37}],7:[function(n,r,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),l=n("./utils"),c=n("./stream/GenericWorker"),u=o?"uint8array":"array";function f(d,g){c.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=g,this.meta={}}s.magic="\b\0",l.inherits(f,c),f.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(u,d.data),!1)},f.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(g){d.push({data:g,meta:d.meta})}},s.compressWorker=function(d){return new f("Deflate",d)},s.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function o(v,w){var p,x="";for(p=0;p<w;p++)x+=String.fromCharCode(255&v),v>>>=8;return x}function a(v,w,p,x,h,y){var S,j,N=v.file,C=v.compression,P=y!==u.utf8encode,T=l.transformTo("string",y(N.name)),M=l.transformTo("string",u.utf8encode(N.name)),A=N.comment,R=l.transformTo("string",y(A)),E=l.transformTo("string",u.utf8encode(A)),O=M.length!==N.name.length,b=E.length!==A.length,I="",$="",U="",z=N.dir,_=N.date,W={crc32:0,compressedSize:0,uncompressedSize:0};w&&!p||(W.crc32=v.crc32,W.compressedSize=v.compressedSize,W.uncompressedSize=v.uncompressedSize);var D=0;w&&(D|=8),P||!O&&!b||(D|=2048);var B=0,X=0;z&&(B|=16),h==="UNIX"?(X=798,B|=function(Z,le){var ve=Z;return Z||(ve=le?16893:33204),(65535&ve)<<16}(N.unixPermissions,z)):(X=20,B|=function(Z){return 63&(Z||0)}(N.dosPermissions)),S=_.getUTCHours(),S<<=6,S|=_.getUTCMinutes(),S<<=5,S|=_.getUTCSeconds()/2,j=_.getUTCFullYear()-1980,j<<=4,j|=_.getUTCMonth()+1,j<<=5,j|=_.getUTCDate(),O&&($=o(1,1)+o(f(T),4)+M,I+="up"+o($.length,2)+$),b&&(U=o(1,1)+o(f(R),4)+E,I+="uc"+o(U.length,2)+U);var Y="";return Y+=`
\0`,Y+=o(D,2),Y+=C.magic,Y+=o(S,2),Y+=o(j,2),Y+=o(W.crc32,4),Y+=o(W.compressedSize,4),Y+=o(W.uncompressedSize,4),Y+=o(T.length,2),Y+=o(I.length,2),{fileRecord:d.LOCAL_FILE_HEADER+Y+T+I,dirRecord:d.CENTRAL_FILE_HEADER+o(X,2)+Y+o(R.length,2)+"\0\0\0\0"+o(B,4)+o(x,4)+T+I+R}}var l=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),f=n("../crc32"),d=n("../signature");function g(v,w,p,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=p,this.encodeFileName=x,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(g,c),g.prototype.push=function(v){var w=v.meta.percent||0,p=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,c.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:p?(w+100*(p-x-1))/p:100}}))},g.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var w=this.streamFiles&&!v.file.dir;if(w){var p=a(v,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(v){this.accumulate=!1;var w=this.streamFiles&&!v.file.dir,p=a(v,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),w)this.push({data:function(x){return d.DATA_DESCRIPTOR+o(x.crc32,4)+o(x.compressedSize,4)+o(x.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var v=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var p=this.bytesWritten-v,x=function(h,y,S,j,N){var C=l.transformTo("string",N(j));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(h,2)+o(h,2)+o(y,4)+o(S,4)+o(C.length,2)+C}(this.dirRecords.length,p,v,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(v){this._sources.push(v);var w=this;return v.on("data",function(p){w.processChunk(p)}),v.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),v.on("error",function(p){w.error(p)}),this},g.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(v){var w=this._sources;if(!c.prototype.error.call(this,v))return!1;for(var p=0;p<w.length;p++)try{w[p].error(v)}catch{}return!0},g.prototype.lock=function(){c.prototype.lock.call(this);for(var v=this._sources,w=0;w<v.length;w++)v[w].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var o=n("../compressions"),a=n("./ZipFileWorker");s.generateWorker=function(l,c,u){var f=new a(c.streamFiles,u,c.platform,c.encodeFileName),d=0;try{l.forEach(function(g,v){d++;var w=function(y,S){var j=y||S,N=o[j];if(!N)throw new Error(j+" is not a valid compression method !");return N}(v.options.compression,c.compression),p=v.options.compressionOptions||c.compressionOptions||{},x=v.dir,h=v.date;v._compressWorker(w,p).withStreamInfo("file",{name:g,dir:x,date:h,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(f)}),f.entriesCount=d}catch(g){f.error(g)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new o;for(var l in this)typeof this[l]!="function"&&(a[l]=this[l]);return a}}(o.prototype=n("./object")).loadAsync=n("./load"),o.support=n("./support"),o.defaults=n("./defaults"),o.version="3.10.1",o.loadAsync=function(a,l){return new o().loadAsync(a,l)},o.external=n("./external"),r.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var o=n("./utils"),a=n("./external"),l=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function d(g){return new a.Promise(function(v,w){var p=g.decompressed.getContentWorker().pipe(new u);p.on("error",function(x){w(x)}).on("end",function(){p.streamInfo.crc32!==g.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}r.exports=function(g,v){var w=this;return v=o.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),f.isNode&&f.isStream(g)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",g,!0,v.optimizedBinaryString,v.base64).then(function(p){var x=new c(v);return x.load(p),x}).then(function(p){var x=[a.Promise.resolve(p)],h=p.files;if(v.checkCRC32)for(var y=0;y<h.length;y++)x.push(d(h[y]));return a.Promise.all(x)}).then(function(p){for(var x=p.shift(),h=x.files,y=0;y<h.length;y++){var S=h[y],j=S.fileNameStr,N=o.resolve(S.fileNameStr);w.file(N,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:v.createFolders}),S.dir||(w.file(N).unsafeOriginalName=j)}return x.zipComment.length&&(w.comment=x.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var o=n("../utils"),a=n("../stream/GenericWorker");function l(c,u){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}o.inherits(l,a),l.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(f){u.push({data:f,meta:{percent:0}})}).on("error",function(f){u.isPaused?this.generatedError=f:u.error(f)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},l.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var o=n("readable-stream").Readable;function a(l,c,u){o.call(this,c),this._helper=l;var f=this;l.on("data",function(d,g){f.push(d)||f._helper.pause(),u&&u(g)}).on("error",function(d){f.emit("error",d)}).on("end",function(){f.push(null)})}n("../utils").inherits(a,o),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,a);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,a)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var a=new Buffer(o);return a.fill(0),a},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(n,r,s){function o(N,C,P){var T,M=l.getTypeOf(C),A=l.extend(P||{},f);A.date=A.date||new Date,A.compression!==null&&(A.compression=A.compression.toUpperCase()),typeof A.unixPermissions=="string"&&(A.unixPermissions=parseInt(A.unixPermissions,8)),A.unixPermissions&&16384&A.unixPermissions&&(A.dir=!0),A.dosPermissions&&16&A.dosPermissions&&(A.dir=!0),A.dir&&(N=h(N)),A.createFolders&&(T=x(N))&&y.call(this,T,!0);var R=M==="string"&&A.binary===!1&&A.base64===!1;P&&P.binary!==void 0||(A.binary=!R),(C instanceof d&&C.uncompressedSize===0||A.dir||!C||C.length===0)&&(A.base64=!1,A.binary=!0,C="",A.compression="STORE",M="string");var E=null;E=C instanceof d||C instanceof c?C:w.isNode&&w.isStream(C)?new p(N,C):l.prepareContent(N,C,A.binary,A.optimizedBinaryString,A.base64);var O=new g(N,E,A);this.files[N]=O}var a=n("./utf8"),l=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),f=n("./defaults"),d=n("./compressedObject"),g=n("./zipObject"),v=n("./generate"),w=n("./nodejsUtils"),p=n("./nodejs/NodejsStreamInputAdapter"),x=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var C=N.lastIndexOf("/");return 0<C?N.substring(0,C):""},h=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},y=function(N,C){return C=C!==void 0?C:f.createFolders,N=h(N),this.files[N]||o.call(this,N,null,{dir:!0,createFolders:C}),this.files[N]};function S(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var C,P,T;for(C in this.files)T=this.files[C],(P=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&N(P,T)},filter:function(N){var C=[];return this.forEach(function(P,T){N(P,T)&&C.push(T)}),C},file:function(N,C,P){if(arguments.length!==1)return N=this.root+N,o.call(this,N,C,P),this;if(S(N)){var T=N;return this.filter(function(A,R){return!R.dir&&T.test(A)})}var M=this.files[this.root+N];return M&&!M.dir?M:null},folder:function(N){if(!N)return this;if(S(N))return this.filter(function(M,A){return A.dir&&N.test(M)});var C=this.root+N,P=y.call(this,C),T=this.clone();return T.root=P.name,T},remove:function(N){N=this.root+N;var C=this.files[N];if(C||(N.slice(-1)!=="/"&&(N+="/"),C=this.files[N]),C&&!C.dir)delete this.files[N];else for(var P=this.filter(function(M,A){return A.name.slice(0,N.length)===N}),T=0;T<P.length;T++)delete this.files[P[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var C,P={};try{if((P=l.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");l.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var T=P.comment||this.comment||"";C=v.generateWorker(this,P,T)}catch(M){(C=new c("error")).error(M)}return new u(C,P.type||"string",P.mimeType)},generateAsync:function(N,C){return this.generateInternalStream(N).accumulate(C)},generateNodeStream:function(N,C){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(C)}};r.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var o=n("./DataReader");function a(l){o.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}n("../utils").inherits(a,o),a.prototype.byteAt=function(l){return this.data[this.zero+l]},a.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),u=l.charCodeAt(1),f=l.charCodeAt(2),d=l.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===c&&this.data[g+1]===u&&this.data[g+2]===f&&this.data[g+3]===d)return g-this.zero;return-1},a.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),u=l.charCodeAt(1),f=l.charCodeAt(2),d=l.charCodeAt(3),g=this.readData(4);return c===g[0]&&u===g[1]&&f===g[2]&&d===g[3]},a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var o=n("../utils");function a(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,u=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=l,u},readString:function(l){return o.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,s){var o=n("./Uint8ArrayReader");function a(l){o.call(this,l)}n("../utils").inherits(a,o),a.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var o=n("./DataReader");function a(l){o.call(this,l)}n("../utils").inherits(a,o),a.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},a.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},a.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},a.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var o=n("./ArrayReader");function a(l){o.call(this,l)}n("../utils").inherits(a,o),a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var o=n("../utils"),a=n("../support"),l=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(d){var g=o.getTypeOf(d);return o.checkSupport(g),g!=="string"||a.uint8array?g==="nodebuffer"?new u(d):a.uint8array?new f(o.transformTo("uint8array",d)):new l(o.transformTo("array",d)):new c(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var o=n("./GenericWorker"),a=n("../utils");function l(c){o.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(l,o),l.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var o=n("./GenericWorker"),a=n("../crc32");function l(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,o),l.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var o=n("../utils"),a=n("./GenericWorker");function l(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}o.inherits(l,a),l.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}a.prototype.processChunk.call(this,c)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var o=n("../utils"),a=n("./GenericWorker");function l(c){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(f){u.dataIsReady=!0,u.data=f,u.max=f&&f.length||0,u.type=o.getTypeOf(f),u.isPaused||u._tickAndRepeat()},function(f){u.error(f)})}o.inherits(l,a),l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function o(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,l){return this._listeners[a].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,l){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,l)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var l=this;return a.on("data",function(c){l.processChunk(c)}),a.on("end",function(){l.end()}),a.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,l){return this.extraStreamInfo[a]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=o},{}],29:[function(n,r,s){var o=n("../utils"),a=n("./ConvertWorker"),l=n("./GenericWorker"),c=n("../base64"),u=n("../support"),f=n("../external"),d=null;if(u.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(w,p){return new f.Promise(function(x,h){var y=[],S=w._internalType,j=w._outputType,N=w._mimeType;w.on("data",function(C,P){y.push(C),p&&p(P)}).on("error",function(C){y=[],h(C)}).on("end",function(){try{var C=function(P,T,M){switch(P){case"blob":return o.newBlob(o.transformTo("arraybuffer",T),M);case"base64":return c.encode(T);default:return o.transformTo(P,T)}}(j,function(P,T){var M,A=0,R=null,E=0;for(M=0;M<T.length;M++)E+=T[M].length;switch(P){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(R=new Uint8Array(E),M=0;M<T.length;M++)R.set(T[M],A),A+=T[M].length;return R;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+P+"'")}}(S,y),N);x(C)}catch(P){h(P)}y=[]}).resume()})}function v(w,p,x){var h=p;switch(p){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=p,this._mimeType=x,o.checkSupport(h),this._worker=w.pipe(new a(h)),w.lock()}catch(y){this._worker=new l("error"),this._worker.error(y)}}v.prototype={accumulate:function(w){return g(this,w)},on:function(w,p){var x=this;return w==="data"?this._worker.on(w,function(h){p.call(x,h.data,h.meta)}):this._worker.on(w,function(){o.delay(p,arguments,x)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var o=new ArrayBuffer(0);try{s.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(o),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var o=n("./utils"),a=n("./support"),l=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;u[254]=u[254]=1;function d(){c.call(this,"utf-8 decode"),this.leftOver=null}function g(){c.call(this,"utf-8 encode")}s.utf8encode=function(v){return a.nodebuffer?l.newBufferFrom(v,"utf-8"):function(w){var p,x,h,y,S,j=w.length,N=0;for(y=0;y<j;y++)(64512&(x=w.charCodeAt(y)))==55296&&y+1<j&&(64512&(h=w.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(h-56320),y++),N+=x<128?1:x<2048?2:x<65536?3:4;for(p=a.uint8array?new Uint8Array(N):new Array(N),y=S=0;S<N;y++)(64512&(x=w.charCodeAt(y)))==55296&&y+1<j&&(64512&(h=w.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(h-56320),y++),x<128?p[S++]=x:(x<2048?p[S++]=192|x>>>6:(x<65536?p[S++]=224|x>>>12:(p[S++]=240|x>>>18,p[S++]=128|x>>>12&63),p[S++]=128|x>>>6&63),p[S++]=128|63&x);return p}(v)},s.utf8decode=function(v){return a.nodebuffer?o.transformTo("nodebuffer",v).toString("utf-8"):function(w){var p,x,h,y,S=w.length,j=new Array(2*S);for(p=x=0;p<S;)if((h=w[p++])<128)j[x++]=h;else if(4<(y=u[h]))j[x++]=65533,p+=y-1;else{for(h&=y===2?31:y===3?15:7;1<y&&p<S;)h=h<<6|63&w[p++],y--;1<y?j[x++]=65533:h<65536?j[x++]=h:(h-=65536,j[x++]=55296|h>>10&1023,j[x++]=56320|1023&h)}return j.length!==x&&(j.subarray?j=j.subarray(0,x):j.length=x),o.applyFromCharCode(j)}(v=o.transformTo(a.uint8array?"uint8array":"array",v))},o.inherits(d,c),d.prototype.processChunk=function(v){var w=o.transformTo(a.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var p=w;(w=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),w.set(p,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var x=function(y,S){var j;for((S=S||y.length)>y.length&&(S=y.length),j=S-1;0<=j&&(192&y[j])==128;)j--;return j<0||j===0?S:j+u[y[j]]>S?j:S}(w),h=w;x!==w.length&&(a.uint8array?(h=w.subarray(0,x),this.leftOver=w.subarray(x,w.length)):(h=w.slice(0,x),this.leftOver=w.slice(x,w.length))),this.push({data:s.utf8decode(h),meta:v.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=d,o.inherits(g,c),g.prototype.processChunk=function(v){this.push({data:s.utf8encode(v.data),meta:v.meta})},s.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var o=n("./support"),a=n("./base64"),l=n("./nodejsUtils"),c=n("./external");function u(p){return p}function f(p,x){for(var h=0;h<p.length;++h)x[h]=255&p.charCodeAt(h);return x}n("setimmediate"),s.newBlob=function(p,x){s.checkSupport("blob");try{return new Blob([p],{type:x})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(p),h.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(p,x,h){var y=[],S=0,j=p.length;if(j<=h)return String.fromCharCode.apply(null,p);for(;S<j;)x==="array"||x==="nodebuffer"?y.push(String.fromCharCode.apply(null,p.slice(S,Math.min(S+h,j)))):y.push(String.fromCharCode.apply(null,p.subarray(S,Math.min(S+h,j)))),S+=h;return y.join("")},stringifyByChar:function(p){for(var x="",h=0;h<p.length;h++)x+=String.fromCharCode(p[h]);return x},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function g(p){var x=65536,h=s.getTypeOf(p),y=!0;if(h==="uint8array"?y=d.applyCanBeUsed.uint8array:h==="nodebuffer"&&(y=d.applyCanBeUsed.nodebuffer),y)for(;1<x;)try{return d.stringifyByChunk(p,h,x)}catch{x=Math.floor(x/2)}return d.stringifyByChar(p)}function v(p,x){for(var h=0;h<p.length;h++)x[h]=p[h];return x}s.applyFromCharCode=g;var w={};w.string={string:u,array:function(p){return f(p,new Array(p.length))},arraybuffer:function(p){return w.string.uint8array(p).buffer},uint8array:function(p){return f(p,new Uint8Array(p.length))},nodebuffer:function(p){return f(p,l.allocBuffer(p.length))}},w.array={string:g,array:u,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return l.newBufferFrom(p)}},w.arraybuffer={string:function(p){return g(new Uint8Array(p))},array:function(p){return v(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:u,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return l.newBufferFrom(new Uint8Array(p))}},w.uint8array={string:g,array:function(p){return v(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:u,nodebuffer:function(p){return l.newBufferFrom(p)}},w.nodebuffer={string:g,array:function(p){return v(p,new Array(p.length))},arraybuffer:function(p){return w.nodebuffer.uint8array(p).buffer},uint8array:function(p){return v(p,new Uint8Array(p.length))},nodebuffer:u},s.transformTo=function(p,x){if(x=x||"",!p)return x;s.checkSupport(p);var h=s.getTypeOf(x);return w[h][p](x)},s.resolve=function(p){for(var x=p.split("/"),h=[],y=0;y<x.length;y++){var S=x[y];S==="."||S===""&&y!==0&&y!==x.length-1||(S===".."?h.pop():h.push(S))}return h.join("/")},s.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":o.nodebuffer&&l.isBuffer(p)?"nodebuffer":o.uint8array&&p instanceof Uint8Array?"uint8array":o.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(p){if(!o[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(p){var x,h,y="";for(h=0;h<(p||"").length;h++)y+="\\x"+((x=p.charCodeAt(h))<16?"0":"")+x.toString(16).toUpperCase();return y},s.delay=function(p,x,h){setImmediate(function(){p.apply(h||null,x||[])})},s.inherits=function(p,x){function h(){}h.prototype=x.prototype,p.prototype=new h},s.extend=function(){var p,x,h={};for(p=0;p<arguments.length;p++)for(x in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],x)&&h[x]===void 0&&(h[x]=arguments[p][x]);return h},s.prepareContent=function(p,x,h,y,S){return c.Promise.resolve(x).then(function(j){return o.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new c.Promise(function(N,C){var P=new FileReader;P.onload=function(T){N(T.target.result)},P.onerror=function(T){C(T.target.error)},P.readAsArrayBuffer(j)}):j}).then(function(j){var N=s.getTypeOf(j);return N?(N==="arraybuffer"?j=s.transformTo("uint8array",j):N==="string"&&(S?j=a.decode(j):h&&y!==!0&&(j=function(C){return f(C,o.uint8array?new Uint8Array(C.length):new Array(C.length))}(j))),j):c.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var o=n("./reader/readerFor"),a=n("./utils"),l=n("./signature"),c=n("./zipEntry"),u=n("./support");function f(d){this.files=[],this.loadOptions=d}f.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(g)+", expected "+a.pretty(d)+")")}},isSignature:function(d,g){var v=this.reader.index;this.reader.setIndex(d);var w=this.reader.readString(4)===g;return this.reader.setIndex(v),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),g=u.uint8array?"uint8array":"array",v=a.transformTo(g,d);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,g,v,w=this.zip64EndOfCentralSize-44;0<w;)d=this.reader.readInt(2),g=this.reader.readInt(4),v=this.reader.readData(g),this.zip64ExtensibleData[d]={id:d,length:g,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,g;for(d=0;d<this.files.length;d++)g=this.files[d],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(d=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var g=d;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var w=g-v;if(0<w)this.isSignature(g,l.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(d){this.reader=o(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var o=n("./reader/readerFor"),a=n("./utils"),l=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),f=n("./compressions"),d=n("./support");function g(v,w){this.options=v,this.loadOptions=w}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var w,p;if(v.skip(22),this.fileNameLength=v.readInt(2),p=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(x){for(var h in f)if(Object.prototype.hasOwnProperty.call(f,h)&&f[h].magic===x)return f[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,w,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var w=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(w),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=o(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var w,p,x,h=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<h;)w=v.readInt(2),p=v.readInt(2),x=v.readData(p),this.extraFields[w]={id:w,length:p,value:x};v.setIndex(h)},handleUTF8:function(){var v=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var p=a.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var h=a.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var w=o(v.value);return w.readInt(1)!==1||c(this.fileName)!==w.readInt(4)?null:u.utf8decode(w.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var w=o(v.value);return w.readInt(1)!==1||c(this.fileComment)!==w.readInt(4)?null:u.utf8decode(w.readData(v.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function o(w,p,x){this.name=w,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=p,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var a=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),f=n("./stream/GenericWorker");o.prototype={internalStream:function(w){var p=null,x="string";try{if(!w)throw new Error("No output type specified.");var h=(x=w.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),p=this._decompressWorker();var y=!this._dataBinary;y&&!h&&(p=p.pipe(new c.Utf8EncodeWorker)),!y&&h&&(p=p.pipe(new c.Utf8DecodeWorker))}catch(S){(p=new f("error")).error(S)}return new a(p,x,"")},async:function(w,p){return this.internalStream(w).accumulate(p)},nodeStream:function(w,p){return this.internalStream(w||"nodebuffer").toNodejsStream(p)},_compressWorker:function(w,p){if(this._data instanceof u&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(x,w,p)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof f?this._data:new l(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<d.length;v++)o.prototype[d[v]]=g;r.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(o){var a,l,c=o.MutationObserver||o.WebKitMutationObserver;if(c){var u=0,f=new c(w),d=o.document.createTextNode("");f.observe(d,{characterData:!0}),a=function(){d.data=u=++u%2}}else if(o.setImmediate||o.MessageChannel===void 0)a="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var p=o.document.createElement("script");p.onreadystatechange=function(){w(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},o.document.documentElement.appendChild(p)}:function(){setTimeout(w,0)};else{var g=new o.MessageChannel;g.port1.onmessage=w,a=function(){g.port2.postMessage(0)}}var v=[];function w(){var p,x;l=!0;for(var h=v.length;h;){for(x=v,v=[],p=-1;++p<h;)x[p]();h=v.length}l=!1}r.exports=function(p){v.push(p)!==1||l||a()}}).call(this,typeof oa<"u"?oa:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var o=n("immediate");function a(){}var l={},c=["REJECTED"],u=["FULFILLED"],f=["PENDING"];function d(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,h!==a&&p(this,h)}function g(h,y,S){this.promise=h,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function v(h,y,S){o(function(){var j;try{j=y(S)}catch(N){return l.reject(h,N)}j===h?l.reject(h,new TypeError("Cannot resolve promise with itself")):l.resolve(h,j)})}function w(h){var y=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof y=="function")return function(){y.apply(h,arguments)}}function p(h,y){var S=!1;function j(P){S||(S=!0,l.reject(h,P))}function N(P){S||(S=!0,l.resolve(h,P))}var C=x(function(){y(N,j)});C.status==="error"&&j(C.value)}function x(h,y){var S={};try{S.value=h(y),S.status="success"}catch(j){S.status="error",S.value=j}return S}(r.exports=d).prototype.finally=function(h){if(typeof h!="function")return this;var y=this.constructor;return this.then(function(S){return y.resolve(h()).then(function(){return S})},function(S){return y.resolve(h()).then(function(){throw S})})},d.prototype.catch=function(h){return this.then(null,h)},d.prototype.then=function(h,y){if(typeof h!="function"&&this.state===u||typeof y!="function"&&this.state===c)return this;var S=new this.constructor(a);return this.state!==f?v(S,this.state===u?h:y,this.outcome):this.queue.push(new g(S,h,y)),S},g.prototype.callFulfilled=function(h){l.resolve(this.promise,h)},g.prototype.otherCallFulfilled=function(h){v(this.promise,this.onFulfilled,h)},g.prototype.callRejected=function(h){l.reject(this.promise,h)},g.prototype.otherCallRejected=function(h){v(this.promise,this.onRejected,h)},l.resolve=function(h,y){var S=x(w,y);if(S.status==="error")return l.reject(h,S.value);var j=S.value;if(j)p(h,j);else{h.state=u,h.outcome=y;for(var N=-1,C=h.queue.length;++N<C;)h.queue[N].callFulfilled(y)}return h},l.reject=function(h,y){h.state=c,h.outcome=y;for(var S=-1,j=h.queue.length;++S<j;)h.queue[S].callRejected(y);return h},d.resolve=function(h){return h instanceof this?h:l.resolve(new this(a),h)},d.reject=function(h){var y=new this(a);return l.reject(y,h)},d.all=function(h){var y=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,j=!1;if(!S)return this.resolve([]);for(var N=new Array(S),C=0,P=-1,T=new this(a);++P<S;)M(h[P],P);return T;function M(A,R){y.resolve(A).then(function(E){N[R]=E,++C!==S||j||(j=!0,l.resolve(T,N))},function(E){j||(j=!0,l.reject(T,E))})}},d.race=function(h){var y=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,j=!1;if(!S)return this.resolve([]);for(var N=-1,C=new this(a);++N<S;)P=h[N],y.resolve(P).then(function(T){j||(j=!0,l.resolve(C,T))},function(T){j||(j=!0,l.reject(C,T))});var P;return C}},{immediate:36}],38:[function(n,r,s){var o={};(0,n("./lib/utils/common").assign)(o,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var o=n("./zlib/deflate"),a=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),f=Object.prototype.toString,d=0,g=-1,v=0,w=8;function p(h){if(!(this instanceof p))return new p(h);this.options=a.assign({level:g,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},h||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var S=o.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(S!==d)throw new Error(c[S]);if(y.header&&o.deflateSetHeader(this.strm,y.header),y.dictionary){var j;if(j=typeof y.dictionary=="string"?l.string2buf(y.dictionary):f.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(S=o.deflateSetDictionary(this.strm,j))!==d)throw new Error(c[S]);this._dict_set=!0}}function x(h,y){var S=new p(y);if(S.push(h,!0),S.err)throw S.msg||c[S.err];return S.result}p.prototype.push=function(h,y){var S,j,N=this.strm,C=this.options.chunkSize;if(this.ended)return!1;j=y===~~y?y:y===!0?4:0,typeof h=="string"?N.input=l.string2buf(h):f.call(h)==="[object ArrayBuffer]"?N.input=new Uint8Array(h):N.input=h,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new a.Buf8(C),N.next_out=0,N.avail_out=C),(S=o.deflate(N,j))!==1&&S!==d)return this.onEnd(S),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(a.shrinkBuf(N.output,N.next_out))):this.onData(a.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&S!==1);return j===4?(S=o.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===d):j!==2||(this.onEnd(d),!(N.avail_out=0))},p.prototype.onData=function(h){this.chunks.push(h)},p.prototype.onEnd=function(h){h===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},s.Deflate=p,s.deflate=x,s.deflateRaw=function(h,y){return(y=y||{}).raw=!0,x(h,y)},s.gzip=function(h,y){return(y=y||{}).gzip=!0,x(h,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var o=n("./zlib/inflate"),a=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),f=n("./zlib/zstream"),d=n("./zlib/gzheader"),g=Object.prototype.toString;function v(p){if(!(this instanceof v))return new v(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||p&&p.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var h=o.inflateInit2(this.strm,x.windowBits);if(h!==c.Z_OK)throw new Error(u[h]);this.header=new d,o.inflateGetHeader(this.strm,this.header)}function w(p,x){var h=new v(x);if(h.push(p,!0),h.err)throw h.msg||u[h.err];return h.result}v.prototype.push=function(p,x){var h,y,S,j,N,C,P=this.strm,T=this.options.chunkSize,M=this.options.dictionary,A=!1;if(this.ended)return!1;y=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof p=="string"?P.input=l.binstring2buf(p):g.call(p)==="[object ArrayBuffer]"?P.input=new Uint8Array(p):P.input=p,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new a.Buf8(T),P.next_out=0,P.avail_out=T),(h=o.inflate(P,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&M&&(C=typeof M=="string"?l.string2buf(M):g.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,h=o.inflateSetDictionary(this.strm,C)),h===c.Z_BUF_ERROR&&A===!0&&(h=c.Z_OK,A=!1),h!==c.Z_STREAM_END&&h!==c.Z_OK)return this.onEnd(h),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&h!==c.Z_STREAM_END&&(P.avail_in!==0||y!==c.Z_FINISH&&y!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=l.utf8border(P.output,P.next_out),j=P.next_out-S,N=l.buf2string(P.output,S),P.next_out=j,P.avail_out=T-j,j&&a.arraySet(P.output,P.output,S,j,0),this.onData(N)):this.onData(a.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(A=!0)}while((0<P.avail_in||P.avail_out===0)&&h!==c.Z_STREAM_END);return h===c.Z_STREAM_END&&(y=c.Z_FINISH),y===c.Z_FINISH?(h=o.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===c.Z_OK):y!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(P.avail_out=0))},v.prototype.onData=function(p){this.chunks.push(p)},v.prototype.onEnd=function(p){p===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},s.Inflate=v,s.inflate=w,s.inflateRaw=function(p,x){return(x=x||{}).raw=!0,w(p,x)},s.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var f=u.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])}}return c},s.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var a={arraySet:function(c,u,f,d,g){if(u.subarray&&c.subarray)c.set(u.subarray(f,f+d),g);else for(var v=0;v<d;v++)c[g+v]=u[f+v]},flattenChunks:function(c){var u,f,d,g,v,w;for(u=d=0,f=c.length;u<f;u++)d+=c[u].length;for(w=new Uint8Array(d),u=g=0,f=c.length;u<f;u++)v=c[u],w.set(v,g),g+=v.length;return w}},l={arraySet:function(c,u,f,d,g){for(var v=0;v<d;v++)c[g+v]=u[f+v]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(o)},{}],42:[function(n,r,s){var o=n("./common"),a=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new o.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function f(d,g){if(g<65537&&(d.subarray&&l||!d.subarray&&a))return String.fromCharCode.apply(null,o.shrinkBuf(d,g));for(var v="",w=0;w<g;w++)v+=String.fromCharCode(d[w]);return v}c[254]=c[254]=1,s.string2buf=function(d){var g,v,w,p,x,h=d.length,y=0;for(p=0;p<h;p++)(64512&(v=d.charCodeAt(p)))==55296&&p+1<h&&(64512&(w=d.charCodeAt(p+1)))==56320&&(v=65536+(v-55296<<10)+(w-56320),p++),y+=v<128?1:v<2048?2:v<65536?3:4;for(g=new o.Buf8(y),p=x=0;x<y;p++)(64512&(v=d.charCodeAt(p)))==55296&&p+1<h&&(64512&(w=d.charCodeAt(p+1)))==56320&&(v=65536+(v-55296<<10)+(w-56320),p++),v<128?g[x++]=v:(v<2048?g[x++]=192|v>>>6:(v<65536?g[x++]=224|v>>>12:(g[x++]=240|v>>>18,g[x++]=128|v>>>12&63),g[x++]=128|v>>>6&63),g[x++]=128|63&v);return g},s.buf2binstring=function(d){return f(d,d.length)},s.binstring2buf=function(d){for(var g=new o.Buf8(d.length),v=0,w=g.length;v<w;v++)g[v]=d.charCodeAt(v);return g},s.buf2string=function(d,g){var v,w,p,x,h=g||d.length,y=new Array(2*h);for(v=w=0;v<h;)if((p=d[v++])<128)y[w++]=p;else if(4<(x=c[p]))y[w++]=65533,v+=x-1;else{for(p&=x===2?31:x===3?15:7;1<x&&v<h;)p=p<<6|63&d[v++],x--;1<x?y[w++]=65533:p<65536?y[w++]=p:(p-=65536,y[w++]=55296|p>>10&1023,y[w++]=56320|1023&p)}return f(y,w)},s.utf8border=function(d,g){var v;for((g=g||d.length)>d.length&&(g=d.length),v=g-1;0<=v&&(192&d[v])==128;)v--;return v<0||v===0?g:v+c[d[v]]>g?v:g}},{"./common":41}],43:[function(n,r,s){r.exports=function(o,a,l,c){for(var u=65535&o|0,f=o>>>16&65535|0,d=0;l!==0;){for(l-=d=2e3<l?2e3:l;f=f+(u=u+a[c++]|0)|0,--d;);u%=65521,f%=65521}return u|f<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l,c,u){var f=o,d=u+c;a^=-1;for(var g=u;g<d;g++)a=a>>>8^f[255&(a^l[g])];return-1^a}},{}],46:[function(n,r,s){var o,a=n("../utils/common"),l=n("./trees"),c=n("./adler32"),u=n("./crc32"),f=n("./messages"),d=0,g=4,v=0,w=-2,p=-1,x=4,h=2,y=8,S=9,j=286,N=30,C=19,P=2*j+1,T=15,M=3,A=258,R=A+M+1,E=42,O=113,b=1,I=2,$=3,U=4;function z(k,H){return k.msg=f[H],H}function _(k){return(k<<1)-(4<k?9:0)}function W(k){for(var H=k.length;0<=--H;)k[H]=0}function D(k){var H=k.state,K=H.pending;K>k.avail_out&&(K=k.avail_out),K!==0&&(a.arraySet(k.output,H.pending_buf,H.pending_out,K,k.next_out),k.next_out+=K,H.pending_out+=K,k.total_out+=K,k.avail_out-=K,H.pending-=K,H.pending===0&&(H.pending_out=0))}function B(k,H){l._tr_flush_block(k,0<=k.block_start?k.block_start:-1,k.strstart-k.block_start,H),k.block_start=k.strstart,D(k.strm)}function X(k,H){k.pending_buf[k.pending++]=H}function Y(k,H){k.pending_buf[k.pending++]=H>>>8&255,k.pending_buf[k.pending++]=255&H}function Z(k,H){var K,F,L=k.max_chain_length,V=k.strstart,q=k.prev_length,te=k.nice_match,G=k.strstart>k.w_size-R?k.strstart-(k.w_size-R):0,ne=k.window,ie=k.w_mask,re=k.prev,ae=k.strstart+A,fe=ne[V+q-1],ye=ne[V+q];k.prev_length>=k.good_match&&(L>>=2),te>k.lookahead&&(te=k.lookahead);do if(ne[(K=H)+q]===ye&&ne[K+q-1]===fe&&ne[K]===ne[V]&&ne[++K]===ne[V+1]){V+=2,K++;do;while(ne[++V]===ne[++K]&&ne[++V]===ne[++K]&&ne[++V]===ne[++K]&&ne[++V]===ne[++K]&&ne[++V]===ne[++K]&&ne[++V]===ne[++K]&&ne[++V]===ne[++K]&&ne[++V]===ne[++K]&&V<ae);if(F=A-(ae-V),V=ae-A,q<F){if(k.match_start=H,te<=(q=F))break;fe=ne[V+q-1],ye=ne[V+q]}}while((H=re[H&ie])>G&&--L!=0);return q<=k.lookahead?q:k.lookahead}function le(k){var H,K,F,L,V,q,te,G,ne,ie,re=k.w_size;do{if(L=k.window_size-k.lookahead-k.strstart,k.strstart>=re+(re-R)){for(a.arraySet(k.window,k.window,re,re,0),k.match_start-=re,k.strstart-=re,k.block_start-=re,H=K=k.hash_size;F=k.head[--H],k.head[H]=re<=F?F-re:0,--K;);for(H=K=re;F=k.prev[--H],k.prev[H]=re<=F?F-re:0,--K;);L+=re}if(k.strm.avail_in===0)break;if(q=k.strm,te=k.window,G=k.strstart+k.lookahead,ne=L,ie=void 0,ie=q.avail_in,ne<ie&&(ie=ne),K=ie===0?0:(q.avail_in-=ie,a.arraySet(te,q.input,q.next_in,ie,G),q.state.wrap===1?q.adler=c(q.adler,te,ie,G):q.state.wrap===2&&(q.adler=u(q.adler,te,ie,G)),q.next_in+=ie,q.total_in+=ie,ie),k.lookahead+=K,k.lookahead+k.insert>=M)for(V=k.strstart-k.insert,k.ins_h=k.window[V],k.ins_h=(k.ins_h<<k.hash_shift^k.window[V+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[V+M-1])&k.hash_mask,k.prev[V&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=V,V++,k.insert--,!(k.lookahead+k.insert<M)););}while(k.lookahead<R&&k.strm.avail_in!==0)}function ve(k,H){for(var K,F;;){if(k.lookahead<R){if(le(k),k.lookahead<R&&H===d)return b;if(k.lookahead===0)break}if(K=0,k.lookahead>=M&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+M-1])&k.hash_mask,K=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),K!==0&&k.strstart-K<=k.w_size-R&&(k.match_length=Z(k,K)),k.match_length>=M)if(F=l._tr_tally(k,k.strstart-k.match_start,k.match_length-M),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=M){for(k.match_length--;k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+M-1])&k.hash_mask,K=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart,--k.match_length!=0;);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else F=l._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(F&&(B(k,!1),k.strm.avail_out===0))return b}return k.insert=k.strstart<M-1?k.strstart:M-1,H===g?(B(k,!0),k.strm.avail_out===0?$:U):k.last_lit&&(B(k,!1),k.strm.avail_out===0)?b:I}function ge(k,H){for(var K,F,L;;){if(k.lookahead<R){if(le(k),k.lookahead<R&&H===d)return b;if(k.lookahead===0)break}if(K=0,k.lookahead>=M&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+M-1])&k.hash_mask,K=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=M-1,K!==0&&k.prev_length<k.max_lazy_match&&k.strstart-K<=k.w_size-R&&(k.match_length=Z(k,K),k.match_length<=5&&(k.strategy===1||k.match_length===M&&4096<k.strstart-k.match_start)&&(k.match_length=M-1)),k.prev_length>=M&&k.match_length<=k.prev_length){for(L=k.strstart+k.lookahead-M,F=l._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-M),k.lookahead-=k.prev_length-1,k.prev_length-=2;++k.strstart<=L&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+M-1])&k.hash_mask,K=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),--k.prev_length!=0;);if(k.match_available=0,k.match_length=M-1,k.strstart++,F&&(B(k,!1),k.strm.avail_out===0))return b}else if(k.match_available){if((F=l._tr_tally(k,0,k.window[k.strstart-1]))&&B(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return b}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(F=l._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<M-1?k.strstart:M-1,H===g?(B(k,!0),k.strm.avail_out===0?$:U):k.last_lit&&(B(k,!1),k.strm.avail_out===0)?b:I}function Q(k,H,K,F,L){this.good_length=k,this.max_lazy=H,this.nice_length=K,this.max_chain=F,this.func=L}function ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*P),this.dyn_dtree=new a.Buf16(2*(2*N+1)),this.bl_tree=new a.Buf16(2*(2*C+1)),W(this.dyn_ltree),W(this.dyn_dtree),W(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(T+1),this.heap=new a.Buf16(2*j+1),W(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*j+1),W(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function xe(k){var H;return k&&k.state?(k.total_in=k.total_out=0,k.data_type=h,(H=k.state).pending=0,H.pending_out=0,H.wrap<0&&(H.wrap=-H.wrap),H.status=H.wrap?E:O,k.adler=H.wrap===2?0:1,H.last_flush=d,l._tr_init(H),v):z(k,w)}function Me(k){var H=xe(k);return H===v&&function(K){K.window_size=2*K.w_size,W(K.head),K.max_lazy_match=o[K.level].max_lazy,K.good_match=o[K.level].good_length,K.nice_match=o[K.level].nice_length,K.max_chain_length=o[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=M-1,K.match_available=0,K.ins_h=0}(k.state),H}function ke(k,H,K,F,L,V){if(!k)return w;var q=1;if(H===p&&(H=6),F<0?(q=0,F=-F):15<F&&(q=2,F-=16),L<1||S<L||K!==y||F<8||15<F||H<0||9<H||V<0||x<V)return z(k,w);F===8&&(F=9);var te=new ue;return(k.state=te).strm=k,te.wrap=q,te.gzhead=null,te.w_bits=F,te.w_size=1<<te.w_bits,te.w_mask=te.w_size-1,te.hash_bits=L+7,te.hash_size=1<<te.hash_bits,te.hash_mask=te.hash_size-1,te.hash_shift=~~((te.hash_bits+M-1)/M),te.window=new a.Buf8(2*te.w_size),te.head=new a.Buf16(te.hash_size),te.prev=new a.Buf16(te.w_size),te.lit_bufsize=1<<L+6,te.pending_buf_size=4*te.lit_bufsize,te.pending_buf=new a.Buf8(te.pending_buf_size),te.d_buf=1*te.lit_bufsize,te.l_buf=3*te.lit_bufsize,te.level=H,te.strategy=V,te.method=K,Me(k)}o=[new Q(0,0,0,0,function(k,H){var K=65535;for(K>k.pending_buf_size-5&&(K=k.pending_buf_size-5);;){if(k.lookahead<=1){if(le(k),k.lookahead===0&&H===d)return b;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var F=k.block_start+K;if((k.strstart===0||k.strstart>=F)&&(k.lookahead=k.strstart-F,k.strstart=F,B(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-R&&(B(k,!1),k.strm.avail_out===0))return b}return k.insert=0,H===g?(B(k,!0),k.strm.avail_out===0?$:U):(k.strstart>k.block_start&&(B(k,!1),k.strm.avail_out),b)}),new Q(4,4,8,4,ve),new Q(4,5,16,8,ve),new Q(4,6,32,32,ve),new Q(4,4,16,16,ge),new Q(8,16,32,32,ge),new Q(8,16,128,128,ge),new Q(8,32,128,256,ge),new Q(32,128,258,1024,ge),new Q(32,258,258,4096,ge)],s.deflateInit=function(k,H){return ke(k,H,y,15,8,0)},s.deflateInit2=ke,s.deflateReset=Me,s.deflateResetKeep=xe,s.deflateSetHeader=function(k,H){return k&&k.state?k.state.wrap!==2?w:(k.state.gzhead=H,v):w},s.deflate=function(k,H){var K,F,L,V;if(!k||!k.state||5<H||H<0)return k?z(k,w):w;if(F=k.state,!k.output||!k.input&&k.avail_in!==0||F.status===666&&H!==g)return z(k,k.avail_out===0?-5:w);if(F.strm=k,K=F.last_flush,F.last_flush=H,F.status===E)if(F.wrap===2)k.adler=0,X(F,31),X(F,139),X(F,8),F.gzhead?(X(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),X(F,255&F.gzhead.time),X(F,F.gzhead.time>>8&255),X(F,F.gzhead.time>>16&255),X(F,F.gzhead.time>>24&255),X(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),X(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(X(F,255&F.gzhead.extra.length),X(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(k.adler=u(k.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(X(F,0),X(F,0),X(F,0),X(F,0),X(F,0),X(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),X(F,3),F.status=O);else{var q=y+(F.w_bits-8<<4)<<8;q|=(2<=F.strategy||F.level<2?0:F.level<6?1:F.level===6?2:3)<<6,F.strstart!==0&&(q|=32),q+=31-q%31,F.status=O,Y(F,q),F.strstart!==0&&(Y(F,k.adler>>>16),Y(F,65535&k.adler)),k.adler=1}if(F.status===69)if(F.gzhead.extra){for(L=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>L&&(k.adler=u(k.adler,F.pending_buf,F.pending-L,L)),D(k),L=F.pending,F.pending!==F.pending_buf_size));)X(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>L&&(k.adler=u(k.adler,F.pending_buf,F.pending-L,L)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){L=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>L&&(k.adler=u(k.adler,F.pending_buf,F.pending-L,L)),D(k),L=F.pending,F.pending===F.pending_buf_size)){V=1;break}V=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,X(F,V)}while(V!==0);F.gzhead.hcrc&&F.pending>L&&(k.adler=u(k.adler,F.pending_buf,F.pending-L,L)),V===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){L=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>L&&(k.adler=u(k.adler,F.pending_buf,F.pending-L,L)),D(k),L=F.pending,F.pending===F.pending_buf_size)){V=1;break}V=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,X(F,V)}while(V!==0);F.gzhead.hcrc&&F.pending>L&&(k.adler=u(k.adler,F.pending_buf,F.pending-L,L)),V===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&D(k),F.pending+2<=F.pending_buf_size&&(X(F,255&k.adler),X(F,k.adler>>8&255),k.adler=0,F.status=O)):F.status=O),F.pending!==0){if(D(k),k.avail_out===0)return F.last_flush=-1,v}else if(k.avail_in===0&&_(H)<=_(K)&&H!==g)return z(k,-5);if(F.status===666&&k.avail_in!==0)return z(k,-5);if(k.avail_in!==0||F.lookahead!==0||H!==d&&F.status!==666){var te=F.strategy===2?function(G,ne){for(var ie;;){if(G.lookahead===0&&(le(G),G.lookahead===0)){if(ne===d)return b;break}if(G.match_length=0,ie=l._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++,ie&&(B(G,!1),G.strm.avail_out===0))return b}return G.insert=0,ne===g?(B(G,!0),G.strm.avail_out===0?$:U):G.last_lit&&(B(G,!1),G.strm.avail_out===0)?b:I}(F,H):F.strategy===3?function(G,ne){for(var ie,re,ae,fe,ye=G.window;;){if(G.lookahead<=A){if(le(G),G.lookahead<=A&&ne===d)return b;if(G.lookahead===0)break}if(G.match_length=0,G.lookahead>=M&&0<G.strstart&&(re=ye[ae=G.strstart-1])===ye[++ae]&&re===ye[++ae]&&re===ye[++ae]){fe=G.strstart+A;do;while(re===ye[++ae]&&re===ye[++ae]&&re===ye[++ae]&&re===ye[++ae]&&re===ye[++ae]&&re===ye[++ae]&&re===ye[++ae]&&re===ye[++ae]&&ae<fe);G.match_length=A-(fe-ae),G.match_length>G.lookahead&&(G.match_length=G.lookahead)}if(G.match_length>=M?(ie=l._tr_tally(G,1,G.match_length-M),G.lookahead-=G.match_length,G.strstart+=G.match_length,G.match_length=0):(ie=l._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++),ie&&(B(G,!1),G.strm.avail_out===0))return b}return G.insert=0,ne===g?(B(G,!0),G.strm.avail_out===0?$:U):G.last_lit&&(B(G,!1),G.strm.avail_out===0)?b:I}(F,H):o[F.level].func(F,H);if(te!==$&&te!==U||(F.status=666),te===b||te===$)return k.avail_out===0&&(F.last_flush=-1),v;if(te===I&&(H===1?l._tr_align(F):H!==5&&(l._tr_stored_block(F,0,0,!1),H===3&&(W(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),D(k),k.avail_out===0))return F.last_flush=-1,v}return H!==g?v:F.wrap<=0?1:(F.wrap===2?(X(F,255&k.adler),X(F,k.adler>>8&255),X(F,k.adler>>16&255),X(F,k.adler>>24&255),X(F,255&k.total_in),X(F,k.total_in>>8&255),X(F,k.total_in>>16&255),X(F,k.total_in>>24&255)):(Y(F,k.adler>>>16),Y(F,65535&k.adler)),D(k),0<F.wrap&&(F.wrap=-F.wrap),F.pending!==0?v:1)},s.deflateEnd=function(k){var H;return k&&k.state?(H=k.state.status)!==E&&H!==69&&H!==73&&H!==91&&H!==103&&H!==O&&H!==666?z(k,w):(k.state=null,H===O?z(k,-3):v):w},s.deflateSetDictionary=function(k,H){var K,F,L,V,q,te,G,ne,ie=H.length;if(!k||!k.state||(V=(K=k.state).wrap)===2||V===1&&K.status!==E||K.lookahead)return w;for(V===1&&(k.adler=c(k.adler,H,ie,0)),K.wrap=0,ie>=K.w_size&&(V===0&&(W(K.head),K.strstart=0,K.block_start=0,K.insert=0),ne=new a.Buf8(K.w_size),a.arraySet(ne,H,ie-K.w_size,K.w_size,0),H=ne,ie=K.w_size),q=k.avail_in,te=k.next_in,G=k.input,k.avail_in=ie,k.next_in=0,k.input=H,le(K);K.lookahead>=M;){for(F=K.strstart,L=K.lookahead-(M-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[F+M-1])&K.hash_mask,K.prev[F&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=F,F++,--L;);K.strstart=F,K.lookahead=M-1,le(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=M-1,K.match_available=0,k.next_in=te,k.input=G,k.avail_in=q,K.wrap=V,v},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(o,a){var l,c,u,f,d,g,v,w,p,x,h,y,S,j,N,C,P,T,M,A,R,E,O,b,I;l=o.state,c=o.next_in,b=o.input,u=c+(o.avail_in-5),f=o.next_out,I=o.output,d=f-(a-o.avail_out),g=f+(o.avail_out-257),v=l.dmax,w=l.wsize,p=l.whave,x=l.wnext,h=l.window,y=l.hold,S=l.bits,j=l.lencode,N=l.distcode,C=(1<<l.lenbits)-1,P=(1<<l.distbits)-1;e:do{S<15&&(y+=b[c++]<<S,S+=8,y+=b[c++]<<S,S+=8),T=j[y&C];t:for(;;){if(y>>>=M=T>>>24,S-=M,(M=T>>>16&255)===0)I[f++]=65535&T;else{if(!(16&M)){if(!(64&M)){T=j[(65535&T)+(y&(1<<M)-1)];continue t}if(32&M){l.mode=12;break e}o.msg="invalid literal/length code",l.mode=30;break e}A=65535&T,(M&=15)&&(S<M&&(y+=b[c++]<<S,S+=8),A+=y&(1<<M)-1,y>>>=M,S-=M),S<15&&(y+=b[c++]<<S,S+=8,y+=b[c++]<<S,S+=8),T=N[y&P];n:for(;;){if(y>>>=M=T>>>24,S-=M,!(16&(M=T>>>16&255))){if(!(64&M)){T=N[(65535&T)+(y&(1<<M)-1)];continue n}o.msg="invalid distance code",l.mode=30;break e}if(R=65535&T,S<(M&=15)&&(y+=b[c++]<<S,(S+=8)<M&&(y+=b[c++]<<S,S+=8)),v<(R+=y&(1<<M)-1)){o.msg="invalid distance too far back",l.mode=30;break e}if(y>>>=M,S-=M,(M=f-d)<R){if(p<(M=R-M)&&l.sane){o.msg="invalid distance too far back",l.mode=30;break e}if(O=h,(E=0)===x){if(E+=w-M,M<A){for(A-=M;I[f++]=h[E++],--M;);E=f-R,O=I}}else if(x<M){if(E+=w+x-M,(M-=x)<A){for(A-=M;I[f++]=h[E++],--M;);if(E=0,x<A){for(A-=M=x;I[f++]=h[E++],--M;);E=f-R,O=I}}}else if(E+=x-M,M<A){for(A-=M;I[f++]=h[E++],--M;);E=f-R,O=I}for(;2<A;)I[f++]=O[E++],I[f++]=O[E++],I[f++]=O[E++],A-=3;A&&(I[f++]=O[E++],1<A&&(I[f++]=O[E++]))}else{for(E=f-R;I[f++]=I[E++],I[f++]=I[E++],I[f++]=I[E++],2<(A-=3););A&&(I[f++]=I[E++],1<A&&(I[f++]=I[E++]))}break}}break}}while(c<u&&f<g);c-=A=S>>3,y&=(1<<(S-=A<<3))-1,o.next_in=c,o.next_out=f,o.avail_in=c<u?u-c+5:5-(c-u),o.avail_out=f<g?g-f+257:257-(f-g),l.hold=y,l.bits=S}},{}],49:[function(n,r,s){var o=n("../utils/common"),a=n("./adler32"),l=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),f=1,d=2,g=0,v=-2,w=1,p=852,x=592;function h(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(E){var O;return E&&E.state?(O=E.state,E.total_in=E.total_out=O.total=0,E.msg="",O.wrap&&(E.adler=1&O.wrap),O.mode=w,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new o.Buf32(p),O.distcode=O.distdyn=new o.Buf32(x),O.sane=1,O.back=-1,g):v}function j(E){var O;return E&&E.state?((O=E.state).wsize=0,O.whave=0,O.wnext=0,S(E)):v}function N(E,O){var b,I;return E&&E.state?(I=E.state,O<0?(b=0,O=-O):(b=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?v:(I.window!==null&&I.wbits!==O&&(I.window=null),I.wrap=b,I.wbits=O,j(E))):v}function C(E,O){var b,I;return E?(I=new y,(E.state=I).window=null,(b=N(E,O))!==g&&(E.state=null),b):v}var P,T,M=!0;function A(E){if(M){var O;for(P=new o.Buf32(512),T=new o.Buf32(32),O=0;O<144;)E.lens[O++]=8;for(;O<256;)E.lens[O++]=9;for(;O<280;)E.lens[O++]=7;for(;O<288;)E.lens[O++]=8;for(u(f,E.lens,0,288,P,0,E.work,{bits:9}),O=0;O<32;)E.lens[O++]=5;u(d,E.lens,0,32,T,0,E.work,{bits:5}),M=!1}E.lencode=P,E.lenbits=9,E.distcode=T,E.distbits=5}function R(E,O,b,I){var $,U=E.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new o.Buf8(U.wsize)),I>=U.wsize?(o.arraySet(U.window,O,b-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(I<($=U.wsize-U.wnext)&&($=I),o.arraySet(U.window,O,b-I,$,U.wnext),(I-=$)?(o.arraySet(U.window,O,b-I,I,0),U.wnext=I,U.whave=U.wsize):(U.wnext+=$,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=$))),0}s.inflateReset=j,s.inflateReset2=N,s.inflateResetKeep=S,s.inflateInit=function(E){return C(E,15)},s.inflateInit2=C,s.inflate=function(E,O){var b,I,$,U,z,_,W,D,B,X,Y,Z,le,ve,ge,Q,ue,xe,Me,ke,k,H,K,F,L=0,V=new o.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return v;(b=E.state).mode===12&&(b.mode=13),z=E.next_out,$=E.output,W=E.avail_out,U=E.next_in,I=E.input,_=E.avail_in,D=b.hold,B=b.bits,X=_,Y=W,H=g;e:for(;;)switch(b.mode){case w:if(b.wrap===0){b.mode=13;break}for(;B<16;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if(2&b.wrap&&D===35615){V[b.check=0]=255&D,V[1]=D>>>8&255,b.check=l(b.check,V,2,0),B=D=0,b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&D)<<8)+(D>>8))%31){E.msg="incorrect header check",b.mode=30;break}if((15&D)!=8){E.msg="unknown compression method",b.mode=30;break}if(B-=4,k=8+(15&(D>>>=4)),b.wbits===0)b.wbits=k;else if(k>b.wbits){E.msg="invalid window size",b.mode=30;break}b.dmax=1<<k,E.adler=b.check=1,b.mode=512&D?10:12,B=D=0;break;case 2:for(;B<16;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if(b.flags=D,(255&b.flags)!=8){E.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){E.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=D>>8&1),512&b.flags&&(V[0]=255&D,V[1]=D>>>8&255,b.check=l(b.check,V,2,0)),B=D=0,b.mode=3;case 3:for(;B<32;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}b.head&&(b.head.time=D),512&b.flags&&(V[0]=255&D,V[1]=D>>>8&255,V[2]=D>>>16&255,V[3]=D>>>24&255,b.check=l(b.check,V,4,0)),B=D=0,b.mode=4;case 4:for(;B<16;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}b.head&&(b.head.xflags=255&D,b.head.os=D>>8),512&b.flags&&(V[0]=255&D,V[1]=D>>>8&255,b.check=l(b.check,V,2,0)),B=D=0,b.mode=5;case 5:if(1024&b.flags){for(;B<16;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}b.length=D,b.head&&(b.head.extra_len=D),512&b.flags&&(V[0]=255&D,V[1]=D>>>8&255,b.check=l(b.check,V,2,0)),B=D=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(_<(Z=b.length)&&(Z=_),Z&&(b.head&&(k=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),o.arraySet(b.head.extra,I,U,Z,k)),512&b.flags&&(b.check=l(b.check,I,Z,U)),_-=Z,U+=Z,b.length-=Z),b.length))break e;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(_===0)break e;for(Z=0;k=I[U+Z++],b.head&&k&&b.length<65536&&(b.head.name+=String.fromCharCode(k)),k&&Z<_;);if(512&b.flags&&(b.check=l(b.check,I,Z,U)),_-=Z,U+=Z,k)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(_===0)break e;for(Z=0;k=I[U+Z++],b.head&&k&&b.length<65536&&(b.head.comment+=String.fromCharCode(k)),k&&Z<_;);if(512&b.flags&&(b.check=l(b.check,I,Z,U)),_-=Z,U+=Z,k)break e}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;B<16;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if(D!==(65535&b.check)){E.msg="header crc mismatch",b.mode=30;break}B=D=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),E.adler=b.check=0,b.mode=12;break;case 10:for(;B<32;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}E.adler=b.check=h(D),B=D=0,b.mode=11;case 11:if(b.havedict===0)return E.next_out=z,E.avail_out=W,E.next_in=U,E.avail_in=_,b.hold=D,b.bits=B,2;E.adler=b.check=1,b.mode=12;case 12:if(O===5||O===6)break e;case 13:if(b.last){D>>>=7&B,B-=7&B,b.mode=27;break}for(;B<3;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}switch(b.last=1&D,B-=1,3&(D>>>=1)){case 0:b.mode=14;break;case 1:if(A(b),b.mode=20,O!==6)break;D>>>=2,B-=2;break e;case 2:b.mode=17;break;case 3:E.msg="invalid block type",b.mode=30}D>>>=2,B-=2;break;case 14:for(D>>>=7&B,B-=7&B;B<32;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if((65535&D)!=(D>>>16^65535)){E.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&D,B=D=0,b.mode=15,O===6)break e;case 15:b.mode=16;case 16:if(Z=b.length){if(_<Z&&(Z=_),W<Z&&(Z=W),Z===0)break e;o.arraySet($,I,U,Z,z),_-=Z,U+=Z,W-=Z,z+=Z,b.length-=Z;break}b.mode=12;break;case 17:for(;B<14;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if(b.nlen=257+(31&D),D>>>=5,B-=5,b.ndist=1+(31&D),D>>>=5,B-=5,b.ncode=4+(15&D),D>>>=4,B-=4,286<b.nlen||30<b.ndist){E.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;B<3;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}b.lens[q[b.have++]]=7&D,D>>>=3,B-=3}for(;b.have<19;)b.lens[q[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,K={bits:b.lenbits},H=u(0,b.lens,0,19,b.lencode,0,b.work,K),b.lenbits=K.bits,H){E.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;Q=(L=b.lencode[D&(1<<b.lenbits)-1])>>>16&255,ue=65535&L,!((ge=L>>>24)<=B);){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if(ue<16)D>>>=ge,B-=ge,b.lens[b.have++]=ue;else{if(ue===16){for(F=ge+2;B<F;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if(D>>>=ge,B-=ge,b.have===0){E.msg="invalid bit length repeat",b.mode=30;break}k=b.lens[b.have-1],Z=3+(3&D),D>>>=2,B-=2}else if(ue===17){for(F=ge+3;B<F;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}B-=ge,k=0,Z=3+(7&(D>>>=ge)),D>>>=3,B-=3}else{for(F=ge+7;B<F;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}B-=ge,k=0,Z=11+(127&(D>>>=ge)),D>>>=7,B-=7}if(b.have+Z>b.nlen+b.ndist){E.msg="invalid bit length repeat",b.mode=30;break}for(;Z--;)b.lens[b.have++]=k}}if(b.mode===30)break;if(b.lens[256]===0){E.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,K={bits:b.lenbits},H=u(f,b.lens,0,b.nlen,b.lencode,0,b.work,K),b.lenbits=K.bits,H){E.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,K={bits:b.distbits},H=u(d,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,K),b.distbits=K.bits,H){E.msg="invalid distances set",b.mode=30;break}if(b.mode=20,O===6)break e;case 20:b.mode=21;case 21:if(6<=_&&258<=W){E.next_out=z,E.avail_out=W,E.next_in=U,E.avail_in=_,b.hold=D,b.bits=B,c(E,Y),z=E.next_out,$=E.output,W=E.avail_out,U=E.next_in,I=E.input,_=E.avail_in,D=b.hold,B=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;Q=(L=b.lencode[D&(1<<b.lenbits)-1])>>>16&255,ue=65535&L,!((ge=L>>>24)<=B);){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if(Q&&!(240&Q)){for(xe=ge,Me=Q,ke=ue;Q=(L=b.lencode[ke+((D&(1<<xe+Me)-1)>>xe)])>>>16&255,ue=65535&L,!(xe+(ge=L>>>24)<=B);){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}D>>>=xe,B-=xe,b.back+=xe}if(D>>>=ge,B-=ge,b.back+=ge,b.length=ue,Q===0){b.mode=26;break}if(32&Q){b.back=-1,b.mode=12;break}if(64&Q){E.msg="invalid literal/length code",b.mode=30;break}b.extra=15&Q,b.mode=22;case 22:if(b.extra){for(F=b.extra;B<F;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}b.length+=D&(1<<b.extra)-1,D>>>=b.extra,B-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;Q=(L=b.distcode[D&(1<<b.distbits)-1])>>>16&255,ue=65535&L,!((ge=L>>>24)<=B);){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if(!(240&Q)){for(xe=ge,Me=Q,ke=ue;Q=(L=b.distcode[ke+((D&(1<<xe+Me)-1)>>xe)])>>>16&255,ue=65535&L,!(xe+(ge=L>>>24)<=B);){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}D>>>=xe,B-=xe,b.back+=xe}if(D>>>=ge,B-=ge,b.back+=ge,64&Q){E.msg="invalid distance code",b.mode=30;break}b.offset=ue,b.extra=15&Q,b.mode=24;case 24:if(b.extra){for(F=b.extra;B<F;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}b.offset+=D&(1<<b.extra)-1,D>>>=b.extra,B-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){E.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(W===0)break e;if(Z=Y-W,b.offset>Z){if((Z=b.offset-Z)>b.whave&&b.sane){E.msg="invalid distance too far back",b.mode=30;break}le=Z>b.wnext?(Z-=b.wnext,b.wsize-Z):b.wnext-Z,Z>b.length&&(Z=b.length),ve=b.window}else ve=$,le=z-b.offset,Z=b.length;for(W<Z&&(Z=W),W-=Z,b.length-=Z;$[z++]=ve[le++],--Z;);b.length===0&&(b.mode=21);break;case 26:if(W===0)break e;$[z++]=b.length,W--,b.mode=21;break;case 27:if(b.wrap){for(;B<32;){if(_===0)break e;_--,D|=I[U++]<<B,B+=8}if(Y-=W,E.total_out+=Y,b.total+=Y,Y&&(E.adler=b.check=b.flags?l(b.check,$,Y,z-Y):a(b.check,$,Y,z-Y)),Y=W,(b.flags?D:h(D))!==b.check){E.msg="incorrect data check",b.mode=30;break}B=D=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;B<32;){if(_===0)break e;_--,D+=I[U++]<<B,B+=8}if(D!==(4294967295&b.total)){E.msg="incorrect length check",b.mode=30;break}B=D=0}b.mode=29;case 29:H=1;break e;case 30:H=-3;break e;case 31:return-4;case 32:default:return v}return E.next_out=z,E.avail_out=W,E.next_in=U,E.avail_in=_,b.hold=D,b.bits=B,(b.wsize||Y!==E.avail_out&&b.mode<30&&(b.mode<27||O!==4))&&R(E,E.output,E.next_out,Y-E.avail_out)?(b.mode=31,-4):(X-=E.avail_in,Y-=E.avail_out,E.total_in+=X,E.total_out+=Y,b.total+=Y,b.wrap&&Y&&(E.adler=b.check=b.flags?l(b.check,$,Y,E.next_out-Y):a(b.check,$,Y,E.next_out-Y)),E.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),(X==0&&Y===0||O===4)&&H===g&&(H=-5),H)},s.inflateEnd=function(E){if(!E||!E.state)return v;var O=E.state;return O.window&&(O.window=null),E.state=null,g},s.inflateGetHeader=function(E,O){var b;return E&&E.state&&2&(b=E.state).wrap?((b.head=O).done=!1,g):v},s.inflateSetDictionary=function(E,O){var b,I=O.length;return E&&E.state?(b=E.state).wrap!==0&&b.mode!==11?v:b.mode===11&&a(1,O,I,0)!==b.check?-3:R(E,O,I,I)?(b.mode=31,-4):(b.havedict=1,g):v},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var o=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,d,g,v,w,p,x,h){var y,S,j,N,C,P,T,M,A,R=h.bits,E=0,O=0,b=0,I=0,$=0,U=0,z=0,_=0,W=0,D=0,B=null,X=0,Y=new o.Buf16(16),Z=new o.Buf16(16),le=null,ve=0;for(E=0;E<=15;E++)Y[E]=0;for(O=0;O<v;O++)Y[d[g+O]]++;for($=R,I=15;1<=I&&Y[I]===0;I--);if(I<$&&($=I),I===0)return w[p++]=20971520,w[p++]=20971520,h.bits=1,0;for(b=1;b<I&&Y[b]===0;b++);for($<b&&($=b),E=_=1;E<=15;E++)if(_<<=1,(_-=Y[E])<0)return-1;if(0<_&&(f===0||I!==1))return-1;for(Z[1]=0,E=1;E<15;E++)Z[E+1]=Z[E]+Y[E];for(O=0;O<v;O++)d[g+O]!==0&&(x[Z[d[g+O]]++]=O);if(P=f===0?(B=le=x,19):f===1?(B=a,X-=257,le=l,ve-=257,256):(B=c,le=u,-1),E=b,C=p,z=O=D=0,j=-1,N=(W=1<<(U=$))-1,f===1&&852<W||f===2&&592<W)return 1;for(;;){for(T=E-z,A=x[O]<P?(M=0,x[O]):x[O]>P?(M=le[ve+x[O]],B[X+x[O]]):(M=96,0),y=1<<E-z,b=S=1<<U;w[C+(D>>z)+(S-=y)]=T<<24|M<<16|A|0,S!==0;);for(y=1<<E-1;D&y;)y>>=1;if(y!==0?(D&=y-1,D+=y):D=0,O++,--Y[E]==0){if(E===I)break;E=d[g+x[O]]}if($<E&&(D&N)!==j){for(z===0&&(z=$),C+=b,_=1<<(U=E-z);U+z<I&&!((_-=Y[U+z])<=0);)U++,_<<=1;if(W+=1<<U,f===1&&852<W||f===2&&592<W)return 1;w[j=D&N]=$<<24|U<<16|C-p|0}}return D!==0&&(w[C+D]=E-z<<24|64<<16|0),h.bits=$,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var o=n("../utils/common"),a=0,l=1;function c(L){for(var V=L.length;0<=--V;)L[V]=0}var u=0,f=29,d=256,g=d+1+f,v=30,w=19,p=2*g+1,x=15,h=16,y=7,S=256,j=16,N=17,C=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],R=new Array(2*(g+2));c(R);var E=new Array(2*v);c(E);var O=new Array(512);c(O);var b=new Array(256);c(b);var I=new Array(f);c(I);var $,U,z,_=new Array(v);function W(L,V,q,te,G){this.static_tree=L,this.extra_bits=V,this.extra_base=q,this.elems=te,this.max_length=G,this.has_stree=L&&L.length}function D(L,V){this.dyn_tree=L,this.max_code=0,this.stat_desc=V}function B(L){return L<256?O[L]:O[256+(L>>>7)]}function X(L,V){L.pending_buf[L.pending++]=255&V,L.pending_buf[L.pending++]=V>>>8&255}function Y(L,V,q){L.bi_valid>h-q?(L.bi_buf|=V<<L.bi_valid&65535,X(L,L.bi_buf),L.bi_buf=V>>h-L.bi_valid,L.bi_valid+=q-h):(L.bi_buf|=V<<L.bi_valid&65535,L.bi_valid+=q)}function Z(L,V,q){Y(L,q[2*V],q[2*V+1])}function le(L,V){for(var q=0;q|=1&L,L>>>=1,q<<=1,0<--V;);return q>>>1}function ve(L,V,q){var te,G,ne=new Array(x+1),ie=0;for(te=1;te<=x;te++)ne[te]=ie=ie+q[te-1]<<1;for(G=0;G<=V;G++){var re=L[2*G+1];re!==0&&(L[2*G]=le(ne[re]++,re))}}function ge(L){var V;for(V=0;V<g;V++)L.dyn_ltree[2*V]=0;for(V=0;V<v;V++)L.dyn_dtree[2*V]=0;for(V=0;V<w;V++)L.bl_tree[2*V]=0;L.dyn_ltree[2*S]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function Q(L){8<L.bi_valid?X(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function ue(L,V,q,te){var G=2*V,ne=2*q;return L[G]<L[ne]||L[G]===L[ne]&&te[V]<=te[q]}function xe(L,V,q){for(var te=L.heap[q],G=q<<1;G<=L.heap_len&&(G<L.heap_len&&ue(V,L.heap[G+1],L.heap[G],L.depth)&&G++,!ue(V,te,L.heap[G],L.depth));)L.heap[q]=L.heap[G],q=G,G<<=1;L.heap[q]=te}function Me(L,V,q){var te,G,ne,ie,re=0;if(L.last_lit!==0)for(;te=L.pending_buf[L.d_buf+2*re]<<8|L.pending_buf[L.d_buf+2*re+1],G=L.pending_buf[L.l_buf+re],re++,te===0?Z(L,G,V):(Z(L,(ne=b[G])+d+1,V),(ie=P[ne])!==0&&Y(L,G-=I[ne],ie),Z(L,ne=B(--te),q),(ie=T[ne])!==0&&Y(L,te-=_[ne],ie)),re<L.last_lit;);Z(L,S,V)}function ke(L,V){var q,te,G,ne=V.dyn_tree,ie=V.stat_desc.static_tree,re=V.stat_desc.has_stree,ae=V.stat_desc.elems,fe=-1;for(L.heap_len=0,L.heap_max=p,q=0;q<ae;q++)ne[2*q]!==0?(L.heap[++L.heap_len]=fe=q,L.depth[q]=0):ne[2*q+1]=0;for(;L.heap_len<2;)ne[2*(G=L.heap[++L.heap_len]=fe<2?++fe:0)]=1,L.depth[G]=0,L.opt_len--,re&&(L.static_len-=ie[2*G+1]);for(V.max_code=fe,q=L.heap_len>>1;1<=q;q--)xe(L,ne,q);for(G=ae;q=L.heap[1],L.heap[1]=L.heap[L.heap_len--],xe(L,ne,1),te=L.heap[1],L.heap[--L.heap_max]=q,L.heap[--L.heap_max]=te,ne[2*G]=ne[2*q]+ne[2*te],L.depth[G]=(L.depth[q]>=L.depth[te]?L.depth[q]:L.depth[te])+1,ne[2*q+1]=ne[2*te+1]=G,L.heap[1]=G++,xe(L,ne,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(ye,ce){var Ge,be,xt,Be,pn,Tn,Se=ce.dyn_tree,Qr=ce.max_code,Lo=ce.stat_desc.static_tree,Ec=ce.stat_desc.has_stree,_c=ce.stat_desc.extra_bits,ea=ce.stat_desc.extra_base,Zr=ce.stat_desc.max_length,Es=0;for(Be=0;Be<=x;Be++)ye.bl_count[Be]=0;for(Se[2*ye.heap[ye.heap_max]+1]=0,Ge=ye.heap_max+1;Ge<p;Ge++)Zr<(Be=Se[2*Se[2*(be=ye.heap[Ge])+1]+1]+1)&&(Be=Zr,Es++),Se[2*be+1]=Be,Qr<be||(ye.bl_count[Be]++,pn=0,ea<=be&&(pn=_c[be-ea]),Tn=Se[2*be],ye.opt_len+=Tn*(Be+pn),Ec&&(ye.static_len+=Tn*(Lo[2*be+1]+pn)));if(Es!==0){do{for(Be=Zr-1;ye.bl_count[Be]===0;)Be--;ye.bl_count[Be]--,ye.bl_count[Be+1]+=2,ye.bl_count[Zr]--,Es-=2}while(0<Es);for(Be=Zr;Be!==0;Be--)for(be=ye.bl_count[Be];be!==0;)Qr<(xt=ye.heap[--Ge])||(Se[2*xt+1]!==Be&&(ye.opt_len+=(Be-Se[2*xt+1])*Se[2*xt],Se[2*xt+1]=Be),be--)}}(L,V),ve(ne,fe,L.bl_count)}function k(L,V,q){var te,G,ne=-1,ie=V[1],re=0,ae=7,fe=4;for(ie===0&&(ae=138,fe=3),V[2*(q+1)+1]=65535,te=0;te<=q;te++)G=ie,ie=V[2*(te+1)+1],++re<ae&&G===ie||(re<fe?L.bl_tree[2*G]+=re:G!==0?(G!==ne&&L.bl_tree[2*G]++,L.bl_tree[2*j]++):re<=10?L.bl_tree[2*N]++:L.bl_tree[2*C]++,ne=G,fe=(re=0)===ie?(ae=138,3):G===ie?(ae=6,3):(ae=7,4))}function H(L,V,q){var te,G,ne=-1,ie=V[1],re=0,ae=7,fe=4;for(ie===0&&(ae=138,fe=3),te=0;te<=q;te++)if(G=ie,ie=V[2*(te+1)+1],!(++re<ae&&G===ie)){if(re<fe)for(;Z(L,G,L.bl_tree),--re!=0;);else G!==0?(G!==ne&&(Z(L,G,L.bl_tree),re--),Z(L,j,L.bl_tree),Y(L,re-3,2)):re<=10?(Z(L,N,L.bl_tree),Y(L,re-3,3)):(Z(L,C,L.bl_tree),Y(L,re-11,7));ne=G,fe=(re=0)===ie?(ae=138,3):G===ie?(ae=6,3):(ae=7,4)}}c(_);var K=!1;function F(L,V,q,te){Y(L,(u<<1)+(te?1:0),3),function(G,ne,ie,re){Q(G),X(G,ie),X(G,~ie),o.arraySet(G.pending_buf,G.window,ne,ie,G.pending),G.pending+=ie}(L,V,q)}s._tr_init=function(L){K||(function(){var V,q,te,G,ne,ie=new Array(x+1);for(G=te=0;G<f-1;G++)for(I[G]=te,V=0;V<1<<P[G];V++)b[te++]=G;for(b[te-1]=G,G=ne=0;G<16;G++)for(_[G]=ne,V=0;V<1<<T[G];V++)O[ne++]=G;for(ne>>=7;G<v;G++)for(_[G]=ne<<7,V=0;V<1<<T[G]-7;V++)O[256+ne++]=G;for(q=0;q<=x;q++)ie[q]=0;for(V=0;V<=143;)R[2*V+1]=8,V++,ie[8]++;for(;V<=255;)R[2*V+1]=9,V++,ie[9]++;for(;V<=279;)R[2*V+1]=7,V++,ie[7]++;for(;V<=287;)R[2*V+1]=8,V++,ie[8]++;for(ve(R,g+1,ie),V=0;V<v;V++)E[2*V+1]=5,E[2*V]=le(V,5);$=new W(R,P,d+1,g,x),U=new W(E,T,0,v,x),z=new W(new Array(0),M,0,w,y)}(),K=!0),L.l_desc=new D(L.dyn_ltree,$),L.d_desc=new D(L.dyn_dtree,U),L.bl_desc=new D(L.bl_tree,z),L.bi_buf=0,L.bi_valid=0,ge(L)},s._tr_stored_block=F,s._tr_flush_block=function(L,V,q,te){var G,ne,ie=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(re){var ae,fe=4093624447;for(ae=0;ae<=31;ae++,fe>>>=1)if(1&fe&&re.dyn_ltree[2*ae]!==0)return a;if(re.dyn_ltree[18]!==0||re.dyn_ltree[20]!==0||re.dyn_ltree[26]!==0)return l;for(ae=32;ae<d;ae++)if(re.dyn_ltree[2*ae]!==0)return l;return a}(L)),ke(L,L.l_desc),ke(L,L.d_desc),ie=function(re){var ae;for(k(re,re.dyn_ltree,re.l_desc.max_code),k(re,re.dyn_dtree,re.d_desc.max_code),ke(re,re.bl_desc),ae=w-1;3<=ae&&re.bl_tree[2*A[ae]+1]===0;ae--);return re.opt_len+=3*(ae+1)+5+5+4,ae}(L),G=L.opt_len+3+7>>>3,(ne=L.static_len+3+7>>>3)<=G&&(G=ne)):G=ne=q+5,q+4<=G&&V!==-1?F(L,V,q,te):L.strategy===4||ne===G?(Y(L,2+(te?1:0),3),Me(L,R,E)):(Y(L,4+(te?1:0),3),function(re,ae,fe,ye){var ce;for(Y(re,ae-257,5),Y(re,fe-1,5),Y(re,ye-4,4),ce=0;ce<ye;ce++)Y(re,re.bl_tree[2*A[ce]+1],3);H(re,re.dyn_ltree,ae-1),H(re,re.dyn_dtree,fe-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,ie+1),Me(L,L.dyn_ltree,L.dyn_dtree)),ge(L),te&&Q(L)},s._tr_tally=function(L,V,q){return L.pending_buf[L.d_buf+2*L.last_lit]=V>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&V,L.pending_buf[L.l_buf+L.last_lit]=255&q,L.last_lit++,V===0?L.dyn_ltree[2*q]++:(L.matches++,V--,L.dyn_ltree[2*(b[q]+d+1)]++,L.dyn_dtree[2*B(V)]++),L.last_lit===L.lit_bufsize-1},s._tr_align=function(L){Y(L,2,3),Z(L,S,R),function(V){V.bi_valid===16?(X(V,V.bi_buf),V.bi_buf=0,V.bi_valid=0):8<=V.bi_valid&&(V.pending_buf[V.pending++]=255&V.bi_buf,V.bi_buf>>=8,V.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(o){(function(a,l){if(!a.setImmediate){var c,u,f,d,g=1,v={},w=!1,p=a.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(a);x=x&&x.setTimeout?x:a,c={}.toString.call(a.process)==="[object process]"?function(j){process.nextTick(function(){y(j)})}:function(){if(a.postMessage&&!a.importScripts){var j=!0,N=a.onmessage;return a.onmessage=function(){j=!1},a.postMessage("","*"),a.onmessage=N,j}}()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",S,!1):a.attachEvent("onmessage",S),function(j){a.postMessage(d+j,"*")}):a.MessageChannel?((f=new MessageChannel).port1.onmessage=function(j){y(j.data)},function(j){f.port2.postMessage(j)}):p&&"onreadystatechange"in p.createElement("script")?(u=p.documentElement,function(j){var N=p.createElement("script");N.onreadystatechange=function(){y(j),N.onreadystatechange=null,u.removeChild(N),N=null},u.appendChild(N)}):function(j){setTimeout(y,0,j)},x.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var N=new Array(arguments.length-1),C=0;C<N.length;C++)N[C]=arguments[C+1];var P={callback:j,args:N};return v[g]=P,c(g),g++},x.clearImmediate=h}function h(j){delete v[j]}function y(j){if(w)setTimeout(y,0,j);else{var N=v[j];if(N){w=!0;try{(function(C){var P=C.callback,T=C.args;switch(T.length){case 0:P();break;case 1:P(T[0]);break;case 2:P(T[0],T[1]);break;case 3:P(T[0],T[1],T[2]);break;default:P.apply(l,T)}})(N)}finally{h(j),w=!1}}}}function S(j){j.source===a&&typeof j.data=="string"&&j.data.indexOf(d)===0&&y(+j.data.slice(d.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof oa<"u"?oa:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Db);var XA=Db.exports;const og=Ol(XA);class is{static getInstance(){return is.instance||(is.instance=new is),is.instance}async exportAllData(t,n,r){var x,h,y,S,j;if(console.log(`🎒 Starting complete backup export for user: ${t}`),n==null||n(0,"Initializing backup export..."),(x=r==null?void 0:r.signal)!=null&&x.aborted)throw new DOMException("Export cancelled","AbortError");const s=new og,o=cn.getInstance(),a=Fe.getAllSongs(t);if(console.log(`📋 Found ${a.length} songs to export`),n==null||n(5,`Found ${a.length} songs to export`),a.length===0)throw new Error("No songs found to export");let l=0;const c=[];a.forEach(N=>l+=N.tracks.length),console.log(`📊 Total tracks to process: ${l}`),n==null||n(10,`Processing ${a.length} songs with ${l} tracks...`);const u=s.folder("songs"),f=s.folder("audio"),d=s.folder("waveforms");let g=0,v=0;for(const N of a){if((h=r==null?void 0:r.signal)!=null&&h.aborted)throw new DOMException("Export cancelled","AbortError");v++,console.log(`🎵 Processing song: "${N.title}"`),n==null||n(15+v/a.length*60,`Processing song ${v}/${a.length}: "${N.title}"`);const C=crypto.randomUUID(),P=[],T={...N,id:C,tracks:[]};u.file(`${C}.json`,JSON.stringify(T,null,2),{compression:"DEFLATE",compressionOptions:{level:6}});for(const A of N.tracks){if((y=r==null?void 0:r.signal)!=null&&y.aborted)throw new DOMException("Export cancelled","AbortError");const R=crypto.randomUUID();g++;const E=15+g/l*60;n==null||n(E,`Processing track ${g}/${l}: "${A.name}"`);try{const O=await o.getAudioUrl(A.id);let b=".mp3";if(O){const $=await(await fetch(O)).blob();$.type.includes("mp3")||$.type.includes("mpeg")?b=".mp3":$.type.includes("wav")?b=".wav":$.type.includes("m4a")||$.type.includes("aac")?b=".m4a":$.type.includes("ogg")&&(b=".ogg");const U=`${R}${b}`;P.push({originalId:A.id,newId:R,name:A.name,fileName:U}),f.file(U,$,{compression:"DEFLATE",compressionOptions:{level:6}}),console.log(`✅ Exported audio for track: ${A.name} as ${U}`)}else console.warn(`⚠️ No audio data found for track: ${A.name}`),P.push({originalId:A.id,newId:R,name:A.name,fileName:`${R}${b}`})}catch(O){console.error(`❌ Failed to export audio for track ${A.name}:`,O)}}c.push({originalId:N.id,newId:C,title:N.title,artist:N.artist||"Unknown",tracks:P});const M=bs.getCachedWaveform(N.id);M&&M.length>0&&(d.file(`${C}.json`,JSON.stringify(M),{compression:"DEFLATE",compressionOptions:{level:6}}),console.log(`📈 Exported waveform for: ${N.title}`))}const w={version:"1.0.0",createdAt:new Date().toISOString(),appVersion:"StageTracker Pro v1.0",songCount:a.length,trackCount:l,userEmail:t,songs:c};if(s.file("manifest.json",JSON.stringify(w,null,2),{compression:"DEFLATE",compressionOptions:{level:6}}),(S=r==null?void 0:r.signal)!=null&&S.aborted)throw new DOMException("Export cancelled","AbortError");if(n==null||n(80,"Creating manifest and preparing zip file..."),console.log(`✅ Backup complete: ${a.length} songs, ${l} tracks`),n==null||n(90,"Generating zip file..."),(j=r==null?void 0:r.signal)!=null&&j.aborted)throw new DOMException("Export cancelled","AbortError");const p=await s.generateAsync({type:"blob",mimeType:"application/zip",compression:"DEFLATE",compressionOptions:{level:6},platform:"UNIX"});return n==null||n(100,"Export complete!"),p}async importAllData(t,n,r){console.log(`📥 Starting complete backup import for user: ${n}`),r==null||r(5,"Reading backup file...");const s=await og.loadAsync(t),o=cn.getInstance();r==null||r(10,"Parsing manifest...");const a=s.file("manifest.json");if(!a)throw new Error("Invalid backup file: missing manifest.json");const l=await a.async("text"),c=JSON.parse(l);if(c.userEmail!==n)throw new Error(`This backup was created by ${c.userEmail} and can only be imported by that user.`);console.log(`📋 Importing backup from ${c.createdAt}: ${c.songCount} songs, ${c.trackCount} tracks`);const u=Fe.getAllSongs(n),f=new Set(u.map(p=>p.title.toLowerCase()));let d=0,g=0,v=0;const w=c.songs.length;r==null||r(15,`Processing ${w} songs...`);for(let p=0;p<c.songs.length;p++){const x=c.songs[p];try{let h=x.title,y=1;for(;f.has(h.toLowerCase());)h=`${x.title} (Import ${y})`,y++;h!==x.title&&console.log(`📝 Renamed "${x.title}" to "${h}" to avoid duplicate`);const S=s.file(`songs/${x.newId}.json`);if(!S){console.error(`❌ Song file missing for: ${x.title}`);continue}const j=JSON.parse(await S.async("text")),N=crypto.randomUUID(),C=[];for(let P=0;P<x.tracks.length;P++){const T=x.tracks[P],M=crypto.randomUUID(),A=15+p/w*70,R=P/x.tracks.length*(70/w),E=Math.round(A+R);r==null||r(E,`Importing "${x.title}" - ${T.name}...`);const O=s.file(`audio/${T.fileName}`);if(O)try{const b=await O.async("blob"),I=new File([b],T.fileName,{type:"audio/*",lastModified:Date.now()});await o.addAudioFile(N,M,T.name,I),console.log(`✅ Imported audio for track: ${T.name}`),g++}catch(b){console.error(`❌ Failed to import audio for track ${T.name}:`,b);continue}else{console.warn(`⚠️ Audio file missing for track: ${T.name}`);continue}C.push({id:M,name:T.name,songId:N,trackNumber:C.length+1,audioUrl:"blob:stored",localFileName:T.fileName,audioData:null,mimeType:"audio/*",fileSize:null,volume:100,balance:0,isMuted:!1,isSolo:!1})}if(C.length>0){const P={...j,id:N,title:h,tracks:C,createdAt:new Date().toISOString()},T=Fe.getAllSongs(n);T.push(P),Fe.saveSongs(n,T),r==null||r(85+p/w*10,`Processing waveform for "${h}"...`);const M=s.file(`waveforms/${x.newId}.json`);if(M)try{const A=JSON.parse(await M.async("text"));bs.setCachedWaveform(N,A),console.log(`📈 Imported waveform for: ${x.title}`)}catch(A){console.warn(`⚠️ Failed to import waveform for ${x.title}:`,A)}console.log(`✅ Imported song: "${x.title}" with ${C.length} tracks`),d++}else console.warn(`⚠️ Skipping song "${x.title}" - no valid tracks`),v++}catch(h){console.error(`❌ Failed to import song "${x.title}":`,h),v++}}if(r==null||r(100,"Import complete!"),console.log(`✅ Import complete: ${d} songs, ${g} tracks imported. ${v} skipped.`),d===0)throw new Error("No songs were imported. Check for file format issues or duplicate titles.")}static generateBackupFilename(t){const n=new Date().toISOString().slice(0,19).replace(/[:.]/g,"-");return`stagetracker-backup-${t.split("@")[0].replace(/[^a-zA-Z0-9]/g,"")}-${n}.zip`}}class QA{constructor(){this.ws=null,this.isHost=!1,this.roomId=null,this.listeners=[],this.roomListeners=[]}onStateChange(t){return this.listeners.push(t),()=>{this.listeners=this.listeners.filter(n=>n!==t)}}onRoomChange(t){return this.roomListeners.push(t),()=>{this.roomListeners=this.roomListeners.filter(n=>n!==t)}}async startBroadcast(t,n,r){const s=r.trim();try{if(console.log("📡 Creating broadcast session in database..."),!(await fetch("/api/broadcast/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s,name:r,hostId:t,hostName:n})})).ok)throw new Error("Failed to create broadcast session in database");console.log("📡 Database session created successfully"),console.log(`🎵 Uploading songs for broadcast: ${r}`);const a=JSON.parse(localStorage.getItem("songs")||"[]");return a.length>0?(await fetch(`/api/broadcast/${s}/songs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({songs:a})})).ok?console.log(`✅ Uploaded ${a.length} songs to database for broadcast`):console.warn("⚠️ Failed to upload songs, continuing without them"):console.log("⚠️ No songs found in local library to upload"),new Promise((l,c)=>{try{const f=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/broadcast/${encodeURIComponent(s)}`;console.log(`📡 Attempting WebSocket connection to: ${f}`),this.ws=new WebSocket(f),this.ws.onopen=()=>{var d;console.log("📡 WebSocket connection established"),(d=this.ws)==null||d.send(JSON.stringify({type:"host_connect",userId:t,userName:n,broadcastName:r})),this.isHost=!0,this.roomId=s,console.log(`📡 Started broadcasting: "${s}"`),l(s)},this.ws.onmessage=d=>{const g=JSON.parse(d.data);console.log("📡 Received server message:",g),g.type==="room_info"&&this.roomListeners.forEach(v=>v(g.room))},this.ws.onclose=d=>{console.log(`📡 Host WebSocket closed - Code: ${d.code}, Reason: ${d.reason}`),d.code===1006?(console.log("📡 Browser blocked WebSocket (1006), using fallback broadcast indicator"),this.isHost=!0,this.roomId=s,localStorage.setItem("fallback_broadcast",JSON.stringify({userId:t,userName:n,broadcastName:r,roomId:s,timestamp:Date.now()})),l(s)):d.code!==1e3&&d.code!==1001&&c(new Error(`WebSocket closed unexpectedly: ${d.code} - ${d.reason}`))},this.ws.onerror=d=>{var g;console.error("📡 Broadcast WebSocket error:",d),console.error("📡 WebSocket URL:",f),console.error("📡 WebSocket state:",(g=this.ws)==null?void 0:g.readyState),console.log("📡 WebSocket failed, using fallback broadcast indicator"),this.isHost=!0,this.roomId=s,localStorage.setItem("fallback_broadcast",JSON.stringify({userId:t,userName:n,broadcastName:r,roomId:s,timestamp:Date.now()})),l(s)},setTimeout(()=>{var d,g;((d=this.ws)==null?void 0:d.readyState)===WebSocket.CONNECTING&&(console.error("📡 WebSocket connection timeout"),(g=this.ws)==null||g.close(),c(new Error("WebSocket connection timeout")))},1e4)}catch(u){console.warn("📡 Broadcast WebSocket setup failed:",u),c(u)}})}catch(o){throw console.error("📡 Failed to create broadcast session:",o),o}}async joinBroadcast(t,n,r){const s=t.trim();return new Promise((o,a)=>{try{const c=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/broadcast/${encodeURIComponent(s)}`;console.log(`📺 Attempting to join broadcast: ${c}`),this.ws=new WebSocket(c),this.ws.onopen=()=>{var u;console.log("📺 Viewer WebSocket connection established"),console.log("📺 Sending viewer_connect message:",{userId:n,userName:r,roomId:s}),(u=this.ws)==null||u.send(JSON.stringify({type:"viewer_connect",userId:n,userName:r})),this.isHost=!1,this.roomId=s,console.log(`📺 Joined broadcast: "${s}"`),o(!0)},this.ws.onmessage=u=>{const f=JSON.parse(u.data);console.log("📺 Viewer received message:",f),f.type==="state_update"?(console.log("📺 Processing broadcast state update:",f.state),this.listeners.forEach(d=>d(f.state))):f.type==="room_info"?(console.log("📺 Room info updated:",f.room),this.roomListeners.forEach(d=>d(f.room))):f.type==="error"&&(console.log("📺 Server error:",f.message),a(new Error(f.message||"Broadcast not found")))},this.ws.onclose=u=>{console.log(`📺 Viewer WebSocket closed - Code: ${u.code}, Reason: ${u.reason}`),u.code===1006?(console.log("📺 Browser blocked WebSocket (1006), using fallback viewer indicator"),this.isHost=!1,this.roomId=s,localStorage.setItem("fallback_viewer",JSON.stringify({userId:n,userName:r,broadcastName:t,roomId:s,timestamp:Date.now()})),o(!0)):u.code!==1e3&&u.code!==1001&&a(new Error(`Connection failed: ${u.code} - ${u.reason}`))},this.ws.onerror=u=>{var f;console.error("📺 Viewer WebSocket error:",u),console.error("📺 WebSocket URL:",c),console.error("📺 WebSocket state:",(f=this.ws)==null?void 0:f.readyState),console.log("📺 WebSocket failed, using fallback viewer indicator"),this.isHost=!1,this.roomId=s,localStorage.setItem("fallback_viewer",JSON.stringify({userId:n,userName:r,broadcastName:t,roomId:s,timestamp:Date.now()})),o(!0)},setTimeout(()=>{var u,f;((u=this.ws)==null?void 0:u.readyState)===WebSocket.CONNECTING&&(console.error("📺 Viewer WebSocket connection timeout"),(f=this.ws)==null||f.close(),a(new Error("Connection timeout")))},1e4)}catch(l){console.warn("📺 Viewer broadcast setup failed:",l),a(l)}})}sendState(t){var n;this.isHost&&this.ws&&this.ws.readyState===WebSocket.OPEN?(console.log("📡 Broadcasting state to viewers:",t),this.ws.send(JSON.stringify({type:"state_update",state:t}))):console.log("📡 Not broadcasting - host:",this.isHost,"ws ready:",((n=this.ws)==null?void 0:n.readyState)===WebSocket.OPEN)}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.isHost=!1,this.roomId=null,this.listeners=[],this.roomListeners=[],localStorage.removeItem("fallback_broadcast"),localStorage.removeItem("fallback_viewer")}getRoomId(){return this.roomId}getIsHost(){return this.isHost}getIsViewer(){return!this.isHost&&this.roomId!==null}getIsConnected(){var t;return((t=this.ws)==null?void 0:t.readyState)===WebSocket.OPEN}}const Ft=new QA;function Ph(){const[e,t]=m.useState(null),[n,r]=m.useState(null),[s,o]=m.useState(!1),[a,l]=m.useState(!1);m.useEffect(()=>{const g=Ft.onStateChange(h=>{console.log("📺 useBroadcast received state update:",h),t(h),l(!0),o(!1)}),v=Ft.onRoomChange(h=>{console.log("📺 Room changed, setting viewer state:",h),console.log("📺 Current state - isHost:",Ft.getIsHost(),"roomId:",Ft.getRoomId()),r(h)}),w=Ft.getIsHost();console.log("🔍 Initial service isHost check:",{serviceIsHost:w,serviceConnected:Ft.getIsConnected(),serviceRoomId:Ft.getRoomId()}),o(w);const p=localStorage.getItem("fallback_broadcast"),x=localStorage.getItem("fallback_viewer");if(p)try{const h=JSON.parse(p);Date.now()-h.timestamp<24*60*60*1e3&&(console.log("🎭 Restored fallback broadcast from localStorage:",h),console.log("🎭 Setting isHost to true via fallback broadcast restore"),o(!0),r({id:h.roomId,name:h.broadcastName,hostId:h.userId,hostName:h.userName,participantCount:1,isActive:!0}))}catch(h){console.warn("Failed to restore fallback broadcast:",h)}else if(x)try{const h=JSON.parse(x);Date.now()-h.timestamp<24*60*60*1e3&&(console.log("📺 Restored fallback viewer from localStorage:",h),l(!0),r({id:h.roomId,name:h.broadcastName,hostId:"unknown",hostName:"Unknown Host",participantCount:2,isActive:!0}))}catch(h){console.warn("Failed to restore fallback viewer:",h)}return()=>{g(),v()}},[]);const c=m.useCallback(async(g,v,w)=>{console.log("🎭 Starting broadcast:",{userId:g,userName:v,broadcastName:w});const p=await Ft.startBroadcast(g,v,w);return console.log("🎭 Broadcast started, roomId:",p),o(!0),l(!1),console.log("🎭 Set as host, isHost:",!0),p},[]),u=m.useCallback(async(g,v,w)=>{console.log("🎵 Joining broadcast:",{roomId:g,userId:v,userName:w});const p=await Ft.joinBroadcast(g,v,w);return console.log("🎵 Join result:",p),p&&(l(!0),o(!1),console.log("🎵 Set as viewer, isViewer:",!0),localStorage.setItem("broadcast_viewer_state",JSON.stringify({isViewer:!0,broadcastName:g,userId:v,userName:w,timestamp:Date.now()}))),p},[]),f=m.useCallback(g=>{const v=Ft.getIsHost(),w=Ft.getIsConnected();console.log("🎭 sendPerformanceState called:",{hookIsHost:s,serviceIsHost:v,serviceConnected:w,currentState:g}),v&&w?(console.log("🎭 About to call broadcastService.sendState with:",g),Ft.sendState(g),console.log("🎭 Finished calling broadcastService.sendState")):console.log("🎭 Not sending - service state check failed:",{hookIsHost:s,serviceIsHost:v,serviceConnected:w,reason:v?"Service not connected":"Service not host"})},[s]),d=m.useCallback(()=>{Ft.disconnect(),t(null),localStorage.removeItem("broadcast_viewer_state"),r(null),o(!1),l(!1)},[]);return{broadcastState:e,currentRoom:n,isHost:s,isViewer:a,isConnected:Ft.getIsConnected(),startBroadcast:c,joinBroadcast:u,sendPerformanceState:f,leaveBroadcast:d}}const ZA=ic("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Bt({className:e,variant:t,...n}){return i.jsx("div",{className:Ce(ZA({variant:t}),e),...n})}var JA="Separator",ig="horizontal",eR=["horizontal","vertical"],Ob=m.forwardRef((e,t)=>{const{decorative:n,orientation:r=ig,...s}=e,o=tR(r)?r:ig,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(we.div,{"data-orientation":o,...l,...s,ref:t})});Ob.displayName=JA;function tR(e){return eR.includes(e)}var Lb=Ob;const Fb=m.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>i.jsx(Lb,{ref:s,decorative:n,orientation:t,className:Ce("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Fb.displayName=Lb.displayName;function nR(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var Ah="ScrollArea",[$b,C4]=Ct(Ah),[rR,mn]=$b(Ah),zb=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...a}=e,[l,c]=m.useState(null),[u,f]=m.useState(null),[d,g]=m.useState(null),[v,w]=m.useState(null),[p,x]=m.useState(null),[h,y]=m.useState(0),[S,j]=m.useState(0),[N,C]=m.useState(!1),[P,T]=m.useState(!1),M=Re(t,R=>c(R)),A=Mo(s);return i.jsx(rR,{scope:n,type:r,dir:A,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:f,content:d,onContentChange:g,scrollbarX:v,onScrollbarXChange:w,scrollbarXEnabled:N,onScrollbarXEnabledChange:C,scrollbarY:p,onScrollbarYChange:x,scrollbarYEnabled:P,onScrollbarYEnabledChange:T,onCornerWidthChange:y,onCornerHeightChange:j,children:i.jsx(we.div,{dir:A,...a,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":h+"px","--radix-scroll-area-corner-height":S+"px",...e.style}})})});zb.displayName=Ah;var Bb="ScrollAreaViewport",Ub=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=e,a=mn(Bb,n),l=m.useRef(null),c=Re(t,l,a.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(we.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Ub.displayName=Bb;var Gn="ScrollAreaScrollbar",Rh=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=mn(Gn,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l=e.orientation==="horizontal";return m.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),s.type==="hover"?i.jsx(sR,{...r,ref:t,forceMount:n}):s.type==="scroll"?i.jsx(oR,{...r,ref:t,forceMount:n}):s.type==="auto"?i.jsx(Wb,{...r,ref:t,forceMount:n}):s.type==="always"?i.jsx(Ih,{...r,ref:t}):null});Rh.displayName=Gn;var sR=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=mn(Gn,e.__scopeScrollArea),[o,a]=m.useState(!1);return m.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},f=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(Dt,{present:n||o,children:i.jsx(Wb,{"data-state":o?"visible":"hidden",...r,ref:t})})}),oR=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=mn(Gn,e.__scopeScrollArea),o=e.orientation==="horizontal",a=kc(()=>c("SCROLL_END"),100),[l,c]=nR("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,f=o?"scrollLeft":"scrollTop";if(u){let d=u[f];const g=()=>{const v=u[f];d!==v&&(c("SCROLL"),a()),d=v};return u.addEventListener("scroll",g),()=>u.removeEventListener("scroll",g)}},[s.viewport,o,c,a]),i.jsx(Dt,{present:n||l!=="hidden",children:i.jsx(Ih,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:de(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:de(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Wb=m.forwardRef((e,t)=>{const n=mn(Gn,e.__scopeScrollArea),{forceMount:r,...s}=e,[o,a]=m.useState(!1),l=e.orientation==="horizontal",c=kc(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:f)}},10);return No(n.viewport,c),No(n.content,c),i.jsx(Dt,{present:r||o,children:i.jsx(Ih,{"data-state":o?"visible":"hidden",...s,ref:t})})}),Ih=m.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=mn(Gn,e.__scopeScrollArea),o=m.useRef(null),a=m.useRef(0),[l,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Yb(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:g=>o.current=g,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:g=>a.current=g};function d(g,v){return dR(g,a.current,l,v)}return n==="horizontal"?i.jsx(iR,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const g=s.viewport.scrollLeft,v=ag(g,l,s.dir);o.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollLeft=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollLeft=d(g,s.dir))}}):n==="vertical"?i.jsx(aR,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const g=s.viewport.scrollTop,v=ag(g,l);o.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollTop=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollTop=d(g))}}):null}),iR=m.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=mn(Gn,e.__scopeScrollArea),[a,l]=m.useState(),c=m.useRef(null),u=Re(t,c,o.onScrollbarXChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Hb,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sc(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const g=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(g),Xb(g,d)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Dl(a.paddingLeft),paddingEnd:Dl(a.paddingRight)}})}})}),aR=m.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,o=mn(Gn,e.__scopeScrollArea),[a,l]=m.useState(),c=m.useRef(null),u=Re(t,c,o.onScrollbarYChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(Hb,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sc(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const g=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(g),Xb(g,d)&&f.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Dl(a.paddingTop),paddingEnd:Dl(a.paddingBottom)}})}})}),[lR,Vb]=$b(Gn),Hb=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:d,...g}=e,v=mn(Gn,n),[w,p]=m.useState(null),x=Re(t,M=>p(M)),h=m.useRef(null),y=m.useRef(""),S=v.viewport,j=r.content-r.viewport,N=qe(f),C=qe(c),P=kc(d,10);function T(M){if(h.current){const A=M.clientX-h.current.left,R=M.clientY-h.current.top;u({x:A,y:R})}}return m.useEffect(()=>{const M=A=>{const R=A.target;(w==null?void 0:w.contains(R))&&N(A,j)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[S,w,j,N]),m.useEffect(C,[r,C]),No(w,P),No(v.content,P),i.jsx(lR,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:qe(o),onThumbPointerUp:qe(a),onThumbPositionChange:C,onThumbPointerDown:qe(l),children:i.jsx(we.div,{...g,ref:x,style:{position:"absolute",...g.style},onPointerDown:de(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),h.current=w.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),T(M))}),onPointerMove:de(e.onPointerMove,T),onPointerUp:de(e.onPointerUp,M=>{const A=M.target;A.hasPointerCapture(M.pointerId)&&A.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=y.current,v.viewport&&(v.viewport.style.scrollBehavior=""),h.current=null})})})}),Ml="ScrollAreaThumb",Kb=m.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Vb(Ml,e.__scopeScrollArea);return i.jsx(Dt,{present:n||s.hasThumb,children:i.jsx(cR,{ref:t,...r})})}),cR=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,o=mn(Ml,n),a=Vb(Ml,n),{onThumbPositionChange:l}=a,c=Re(t,d=>a.onThumbChange(d)),u=m.useRef(void 0),f=kc(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const d=o.viewport;if(d){const g=()=>{if(f(),!u.current){const v=fR(d,l);u.current=v,l()}};return l(),d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[o.viewport,f,l]),i.jsx(we.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:de(e.onPointerDownCapture,d=>{const v=d.target.getBoundingClientRect(),w=d.clientX-v.left,p=d.clientY-v.top;a.onThumbPointerDown({x:w,y:p})}),onPointerUp:de(e.onPointerUp,a.onThumbPointerUp)})});Kb.displayName=Ml;var Mh="ScrollAreaCorner",Gb=m.forwardRef((e,t)=>{const n=mn(Mh,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(uR,{...e,ref:t}):null});Gb.displayName=Mh;var uR=m.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=mn(Mh,n),[o,a]=m.useState(0),[l,c]=m.useState(0),u=!!(o&&l);return No(s.scrollbarX,()=>{var d;const f=((d=s.scrollbarX)==null?void 0:d.offsetHeight)||0;s.onCornerHeightChange(f),c(f)}),No(s.scrollbarY,()=>{var d;const f=((d=s.scrollbarY)==null?void 0:d.offsetWidth)||0;s.onCornerWidthChange(f),a(f)}),u?i.jsx(we.div,{...r,ref:t,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Dl(e){return e?parseInt(e,10):0}function Yb(e,t){const n=e/t;return isNaN(n)?0:n}function Sc(e){const t=Yb(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function dR(e,t,n,r="ltr"){const s=Sc(n),o=s/2,a=t||o,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,d=r==="ltr"?[0,f]:[f*-1,0];return qb([c,u],d)(e)}function ag(e,t,n="ltr"){const r=Sc(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-s,a=t.content-t.viewport,l=o-r,c=n==="ltr"?[0,a]:[a*-1,0],u=fh(e,c);return qb([0,a],[0,l])(u)}function qb(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Xb(e,t){return e>0&&e<t}var fR=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const o={left:e.scrollLeft,top:e.scrollTop},a=n.left!==o.left,l=n.top!==o.top;(a||l)&&t(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function kc(e,t){const n=qe(e),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function No(e,t){const n=qe(t);At(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var Qb=zb,hR=Ub,mR=Gb;const Zb=m.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Qb,{ref:r,className:Ce("relative overflow-hidden",e),...n,children:[i.jsx(hR,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(Jb,{}),i.jsx(mR,{})]}));Zb.displayName=Qb.displayName;const Jb=m.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(Rh,{ref:r,orientation:t,className:Ce("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(Kb,{className:"relative flex-1 rounded-full bg-border"})}));Jb.displayName=Rh.displayName;function pR({isOpen:e,onClose:t}){const{devices:n,connectedDevices:r,isSupported:s,isInitialized:o,error:a,connectDevice:l,disconnectDevice:c,sendMidiCommand:u,parseMidiCommand:f,refreshDevices:d}=lh(),[g,v]=m.useState(!1),[w,p]=m.useState("[[PC:1:1]]"),[x,h]=m.useState({});m.useEffect(()=>{e&&o&&y()},[e,o]);const y=async()=>{v(!0);try{await d()}finally{v(!1)}},S=async R=>{const E=[];R.inputDevice&&E.push(R.inputDevice.id),R.outputDevice&&E.push(R.outputDevice.id);const O={};E.forEach(b=>O[b]="connecting"),h(b=>({...b,...O}));try{(await Promise.all(E.map($=>l($)))).some($=>!$)&&console.error("Failed to connect to some devices:",E)}finally{const b={};E.forEach(I=>b[I]="idle"),h(I=>({...I,...b}))}},j=async R=>{const E=[];R.inputDevice&&E.push(R.inputDevice.id),R.outputDevice&&E.push(R.outputDevice.id);const O={};E.forEach(b=>O[b]="disconnecting"),h(b=>({...b,...O}));try{(await Promise.all(E.map($=>c($)))).some($=>!$)&&console.error("Failed to disconnect from some devices:",E)}finally{const b={};E.forEach(I=>b[I]="idle"),h(I=>({...I,...b}))}},N=R=>{const E=R.inputDevice?r.some(b=>b.id===R.inputDevice.id):!0,O=R.outputDevice?r.some(b=>b.id===R.outputDevice.id):!0;return E&&O},C=R=>{const E=[];return R.inputDevice&&E.push(x[R.inputDevice.id]||"idle"),R.outputDevice&&E.push(x[R.outputDevice.id]||"idle"),E.some(O=>O==="connecting")?"connecting":E.some(O=>O==="disconnecting")?"disconnecting":"idle"},P=()=>{const R=f(w);if(!R){alert("Invalid MIDI command format. Use: [[PC:value:channel]] or [[CC:controller:value:channel]]");return}if(r.filter(b=>b.type==="output").length===0){alert("No connected MIDI output devices found");return}u(R)?console.log(`✅ Sent test command: ${w}`):alert("Failed to send MIDI command")},T=R=>R.isBluetooth?i.jsx(fj,{className:"h-4 w-4"}):R.isUSB?i.jsx(Ij,{className:"h-4 w-4"}):i.jsx(Sj,{className:"h-4 w-4"}),M=R=>{const E=r.some(b=>b.id===R.id),O=x[R.id];return O==="connecting"||O==="disconnecting"?i.jsx(wp,{className:"h-4 w-4 animate-spin"}):R.state==="disconnected"?i.jsx(Sx,{className:"h-4 w-4 text-muted-foreground"}):E&&R.connection==="open"?i.jsx(mj,{className:"h-4 w-4 text-green-500"}):i.jsx(cu,{className:"h-4 w-4 text-yellow-500"})},A=Ne.useMemo(()=>{const R=new Map,E=O=>O.replace(/\s+(IN|OUT|Input|Output)$/i,"").replace(/A\s+(IN|OUT)$/i,"").trim();return n.forEach(O=>{const b=E(O.name),I=`${b}-${O.manufacturer}`;R.has(I)||R.set(I,{name:b,manufacturer:O.manufacturer,isUSB:O.isUSB,isBluetooth:O.isBluetooth,capabilities:[]});const $=R.get(I);O.type==="input"?($.inputDevice=O,$.capabilities.push("Input")):($.outputDevice=O,$.capabilities.push("Output"))}),Array.from(R.values())},[n]);return s?i.jsx(Jn,{open:e,onOpenChange:t,children:i.jsxs(Ln,{className:"sm:max-w-4xl max-h-[90vh]","data-testid":"dialog-midi-device-manager",children:[i.jsx(er,{children:i.jsxs(tr,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hs,{className:"h-5 w-5"}),"MIDI Device Manager",r.length>0&&i.jsxs(Bt,{variant:"secondary","data-testid":"badge-connected-count",children:[r.length," Connected"]})]}),i.jsxs(ee,{variant:"outline",size:"sm",onClick:y,disabled:g||!o,"data-testid":"button-refresh-devices",className:"mr-[83px]",children:[i.jsx(wp,{className:`h-4 w-4 mr-2 ${g?"animate-spin":""}`}),"Refresh"]})]})}),a&&i.jsxs("div",{className:"bg-destructive/10 border border-destructive rounded-lg p-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[i.jsx(cu,{className:"h-4 w-4"}),i.jsx("span",{className:"text-sm font-medium",children:"MIDI Error"})]}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a})]}),i.jsx(Zb,{className:"max-h-[60vh]",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(hs,{className:"h-4 w-4"}),i.jsx("h3",{className:"font-semibold",children:"MIDI Devices"}),i.jsx(Bt,{variant:"outline",children:A.length})]}),A.length===0?i.jsx(je,{children:i.jsx(Pe,{className:"pt-6",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(hs,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No MIDI devices found"}),i.jsx("p",{className:"text-xs",children:"Connect a MIDI device and click Refresh"})]})})}):i.jsx("div",{className:"grid gap-3",children:A.map((R,E)=>{const O=N(R),b=C(R),I=R.outputDevice||R.inputDevice;return i.jsx(je,{children:i.jsx(Pe,{className:"pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[I&&T(I),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-sm","data-testid":`device-name-unified-${E}`,children:R.name}),R.manufacturer&&i.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",R.manufacturer]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[I&&M(I),i.jsx("span",{className:"text-xs text-muted-foreground","data-testid":`device-status-unified-${E}`,children:O?"Connected":"Available"}),i.jsx("div",{className:"flex gap-1",children:R.capabilities.map($=>i.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-0.5 rounded",children:$},$))})]})]})]}),i.jsxs(ee,{variant:O?"destructive":"outline",size:"sm",onClick:()=>O?j(R):S(R),disabled:b!=="idle","data-testid":`button-${O?"disconnect":"connect"}-unified-${E}`,children:[b==="connecting"&&"Connecting...",b==="disconnecting"&&"Disconnecting...",b==="idle"&&(O?"Disconnect":"Connect")]})]})})},`${R.name}-${R.manufacturer}-${E}`)})})]}),r.filter(R=>R.type==="output").length>0&&i.jsxs(i.Fragment,{children:[i.jsx(Fb,{}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(Sp,{className:"h-4 w-4"}),i.jsx("h3",{className:"font-semibold",children:"Test MIDI Commands"})]}),i.jsxs(je,{children:[i.jsx(Oe,{children:i.jsx(Le,{className:"text-sm",children:"Send Test Command"})}),i.jsx(Pe,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(rt,{htmlFor:"test-command",className:"text-xs",children:"MIDI Command"}),i.jsx(zt,{id:"test-command",value:w,onChange:R=>p(R.target.value),placeholder:"[[PC:1:1]]",className:"mt-1","data-testid":"input-test-command"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Examples: [[PC:1:1]], [[CC:7:127:1]], [[NOTE:60:127:1]]"})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs(ee,{onClick:P,size:"sm","data-testid":"button-send-test-command",children:[i.jsx(Sp,{className:"h-4 w-4 mr-1"}),"Send"]})})]})})]})]})]})]})})]})}):i.jsx(Jn,{open:e,onOpenChange:t,children:i.jsxs(Ln,{className:"sm:max-w-md","data-testid":"dialog-midi-not-supported",children:[i.jsx(er,{children:i.jsxs(tr,{className:"flex items-center gap-2",children:[i.jsx(cu,{className:"h-5 w-5 text-yellow-500"}),"MIDI Not Supported"]})}),i.jsx("div",{className:"text-center py-4",children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Your browser doesn't support the Web MIDI API. Please use a modern browser like Chrome, Firefox, or Edge."})})]})})}function gR({userType:e}){const{user:t,logout:n}=hr(),r=(t==null?void 0:t.userType)||e||"free",[s,o]=m.useState(null),[,a]=yt(),[l,c]=m.useState(2.1),[u,f]=m.useState(!1),[d,g]=m.useState(!1),[v,w]=m.useState(""),[p,x]=m.useState(""),[h,y]=m.useState(!1),[S,j]=m.useState(""),[N,C]=m.useState(!1),[P,T]=m.useState("lyrics"),[M,A]=m.useState([]),[R,E]=m.useState(null),[O,b]=m.useState(!1),[I,$]=m.useState(!1),[U,z]=m.useState(!1),[_,W]=m.useState(null),[D,B]=m.useState(!1),[X,Y]=m.useState(0),[Z,le]=m.useState(""),[ve,ge]=m.useState(null),[Q,ue]=m.useState(!1),[xe,Me]=m.useState(0),[ke,k]=m.useState(""),[H,K]=m.useState(!1),[F,L]=m.useState(!1),[V,q]=m.useState(""),te=m.useRef(null),{sendMidiCommand:G,parseMidiCommand:ne,connectedDevices:ie,registerMessageListener:re,unregisterMessageListener:ae}=lh(),{isHost:fe,isViewer:ye,broadcastState:ce,sendPerformanceState:Ge,currentRoom:be}=Ph(),xt=ye&&ce&&ce.lyrics&&!R,[Be,pn]=m.useState("");m.useEffect(()=>{ce&&(console.log("📺 Performance page received broadcast state:",ce),pn(`📺 Received: ${ce.songTitle||"Unknown"} - Playing: ${ce.isPlaying?"Yes":"No"} - Position: ${Math.round(ce.position)}s`),setTimeout(()=>pn(""),3e3))},[ce]);const Tn=m.useRef(null),{toast:Se}=Mt();m.useEffect(()=>{const oe=()=>{b(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",oe),()=>{document.removeEventListener("fullscreenchange",oe)}},[]);const Qr=()=>{if(!(t!=null&&t.email)){Se({title:"Export Failed",description:"Please log in to export your data",variant:"destructive"});return}const oe=new Date().toISOString().slice(0,10),Ee=`stagetracker-backup-${t.email.split("@")[0].replace(/[^a-zA-Z0-9]/g,"")}-${oe}`;q(Ee),K(!0)},Lo=async()=>{if(!(!(t!=null&&t.email)||!V.trim()))try{B(!0),Y(0),le("Starting export..."),K(!1);const oe=new AbortController;ge(oe);const pe=is.getInstance(),Ee=(mS,pS)=>{Y(mS),le(pS)},_e=await pe.exportAllData(t.email,Ee,{signal:oe.signal}),Ue=new Blob([_e],{type:"application/zip"}),lt=URL.createObjectURL(Ue),Xe=document.createElement("a");Xe.href=lt;let nn=V.trim();nn.toLowerCase().endsWith(".zip")||(nn+=".zip"),Xe.download=nn,Xe.style.display="none",Xe.setAttribute("rel","noopener"),Xe.setAttribute("target","_blank"),document.body.appendChild(Xe),setTimeout(()=>{Xe.click(),setTimeout(()=>{document.body.removeChild(Xe),URL.revokeObjectURL(lt)},100)},10),Se({title:"Export Complete",description:`Your music library has been exported as "${nn}"`})}catch(oe){console.error("Export failed:",oe),oe instanceof DOMException&&oe.name==="AbortError"?Se({title:"Export Cancelled",description:"Library export was cancelled by user"}):Se({title:"Export Failed",description:oe instanceof Error?oe.message:"Failed to export data",variant:"destructive"})}finally{B(!1),Y(0),le(""),ge(null)}},Ec=()=>{if(F)L(!1),ae&&ae("lyrics-editor"),Se({title:"MIDI Listen Off",description:"Stopped listening for MIDI messages"});else{if(ie.filter(oe=>oe.type==="input").length===0){Se({title:"No MIDI Input Devices",description:"Connect a MIDI input device first",variant:"destructive"});return}L(!0),re&&re("lyrics-editor",oe=>{const pe=_c(oe);pe&&ea(pe)}),Se({title:"MIDI Listen On",description:"Listening for MIDI messages. Play something on your controller!"})}},_c=oe=>{if(!oe.data||oe.data.length<2)return null;const[pe,Ee,_e]=oe.data,Ue=(pe&15)+1;switch(pe&240){case 192:return`[[PC:${Ee}:${Ue}]]`;case 176:return`[[CC:${Ee}:${_e||0}:${Ue}]]`;case 144:if(_e>0)return`[[NOTE:${Ee}:${_e}:${Ue}]]`;break}return null},ea=oe=>{const pe=document.getElementById("lyrics");if(pe){const Ee=pe.selectionStart,_e=pe.selectionEnd,Ue=pe.value,lt=Ue.substring(0,Ee)+oe+Ue.substring(_e);pe.value=lt,j(lt);const Xe=Ee+oe.length;pe.setSelectionRange(Xe,Xe),pe.focus()}};m.useEffect(()=>{!h&&F&&(L(!1),ae&&ae("lyrics-editor"))},[h,F,ae]);const Zr=()=>{ve&&ve.abort()},Es=()=>{var oe;if(!(t!=null&&t.email)){Se({title:"Import Failed",description:"Please log in to import data",variant:"destructive"});return}(oe=Tn.current)==null||oe.click()},G1=async oe=>{var Ee;const pe=(Ee=oe.target.files)==null?void 0:Ee[0];if(!(!pe||!(t!=null&&t.email)))try{ue(!0),Me(0),k("Reading backup file...");const _e=is.getInstance(),Ue=(Xe,nn)=>{Me(Xe),k(nn)};await _e.importAllData(pe,t.email,Ue);const lt=Fe.getAllSongs(t.email);A(lt.sort((Xe,nn)=>Xe.title.localeCompare(nn.title))),Se({title:"Import Complete",description:"Your music library has been imported successfully"})}catch(_e){console.error("Import failed:",_e),Se({title:"Import Failed",description:_e instanceof Error?_e.message:"Failed to import data",variant:"destructive"})}finally{ue(!1),Me(0),k(""),Tn.current&&(Tn.current.value="")}},$h=Mw({song:R?{...R,userId:(t==null?void 0:t.email)||""}:void 0,onDurationUpdated:(oe,pe)=>{R&&R.id===oe&&(t!=null&&t.email)&&Fe.updateSong(t.email,oe,{duration:pe})}}),{isPlaying:st,currentTime:Lt,duration:mr,play:Yn,pause:Pn,stop:ta,seek:Fo,isLoadingTracks:Y1,masterVolume:f4,updateMasterVolume:h4,updateTrackVolume:q1,updateTrackBalance:X1,updateTrackMute:Tc,updateTrackSolo:zh,isAudioEngineOnline:Q1,masterStereoLevels:Bh,audioLevels:Uh}=$h,Z1=m.useCallback(oe=>{Tc(oe)},[Tc]),J1=m.useCallback(oe=>{zh(oe)},[zh]);bP({onPlay:Yn,onPause:Pn,onStop:ta,onTogglePlayback:st?Pn:Yn,onTrackMute:oe=>Tc(oe),isPlaying:st}),m.useEffect(()=>{(()=>{if(t!=null&&t.email)try{const Ee=Fe.getAllSongs(t.email).sort((_e,Ue)=>_e.title.localeCompare(Ue.title));A(Ee),console.log(`📋 Loaded ${Ee.length} songs from local storage (alphabetically sorted)`)}catch(pe){console.error("❌ Failed to load songs:",pe),Se({title:"Error Loading Songs",description:"Failed to load songs from local storage",variant:"destructive"})}})()},[t==null?void 0:t.email,Se]);const eS=m.useCallback(()=>{if(t!=null&&t.email)try{const pe=Fe.getAllSongs(t.email).sort((Ee,_e)=>Ee.title.localeCompare(_e.title));A(pe)}catch(oe){console.error("Failed to refresh songs:",oe)}},[t==null?void 0:t.email]),[na,ra]=m.useState(null);m.useEffect(()=>{if(!s||!(t!=null&&t.email))return;const pe=Fe.getAllSongs(t.email).find(Ee=>Ee.id===s);pe&&(console.log(`🎵 Loading song: ${pe.title}`),E(pe),fe&&(be!=null&&be.id)?(console.log(`📡 Host selected song - uploading to database for broadcast: ${pe.title}`),console.log(`📡 Upload function will be called with roomId: ${be.id}`),tS(pe,be.id)):console.log("📡 Not uploading to database:",{isHost:fe,hasCurrentRoom:!!(be!=null&&be.id),roomId:be==null?void 0:be.id}))},[s,t==null?void 0:t.email,fe,be==null?void 0:be.id]),m.useEffect(()=>{console.log("🔍 Debug values:",{selectedSongId:s,userEmail:t==null?void 0:t.email,isHost:fe,currentRoomId:be==null?void 0:be.id,hasSelectedSongId:!!s,hasUserEmail:!!(t!=null&&t.email),hasCurrentRoom:!!(be!=null&&be.id)})},[s,t==null?void 0:t.email,fe,be==null?void 0:be.id]);const tS=async(oe,pe)=>{var Ee,_e;console.log("🚀 uploadSongToDatabase function called!",{song:oe.title,broadcastId:pe});try{const Ue=await fetch(`/api/broadcast/${pe}/songs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({songs:[oe]})});if(Ue.ok){const lt=await Ue.json();console.log("🔍 Full API response:",lt),console.log("🔍 Songs array:",lt.songs),lt.songs&&lt.songs[0]&&console.log("🔍 First song object:",lt.songs[0]);const Xe=(_e=(Ee=lt.songs)==null?void 0:Ee[0])==null?void 0:_e.id;Xe?(ra(Xe),console.log(`✅ Song uploaded to database with entry ID: ${Xe}`)):console.log("⚠️ Song uploaded but no entry ID returned. Full result:",JSON.stringify(lt,null,2))}}catch(Ue){console.error("❌ Failed to upload song to database:",Ue)}};m.useEffect(()=>{!ye||!ce||(console.log("📺 Broadcast viewer mode: Syncing with broadcaster state",ce),ce.currentSong&&ce.currentSong!==s&&(t!=null&&t.email)&&(console.log(`📺 Broadcaster changed song to: ${ce.songTitle||ce.currentSong}`),o(ce.currentSong)),R&&Math.abs(ce.position-Lt)>1&&(console.log(`📺 Syncing playback position: ${ce.position}s`),Fo(ce.position)),R&&ce.isPlaying!==st&&(console.log(`📺 Syncing playback state: ${ce.isPlaying?"playing":"paused"}`),ce.isPlaying?Yn():Pn()))},[ye,ce,s,R,Lt,st,t==null?void 0:t.email,Fo,Yn,Pn]),m.useEffect(()=>{if(console.log("🎭 Broadcast host effect:",{isHost:fe,selectedSong:!!R,selectedSongId:s,songTitle:R==null?void 0:R.title,songEntryId:na,hasLyrics:!!(R!=null&&R.lyrics)}),!fe){console.log("🎭 Not broadcasting - not host");return}if(!R){console.log("🎭 Not broadcasting - no song selected");return}if(!na){console.log("🎭 Not broadcasting - waiting for songEntryId");return}const oe={currentSong:s,songEntryId:na,songTitle:R.title,position:Lt,isPlaying:st,currentLyricLine:"",waveformProgress:mr>0?Lt/mr:0,lyrics:R.lyrics,artist:R.artist,duration:mr};console.log("🎭 Broadcasting performance state:",oe),Ge(oe)},[fe,R,s,na,Lt,st,mr,Ge]),m.useCallback(oe=>{Fo(oe)},[Fo]);const nS=m.useCallback(()=>{R&&R.tracks&&R.tracks.length>0?Yn():Se({title:"No Tracks Available",description:"Please add tracks to this song first",variant:"destructive"})},[R,Yn,Se]),rS=m.useCallback(()=>{Pn()},[Pn]),sS=m.useCallback(()=>{ta()},[ta]),oS=m.useCallback(()=>{if(!(t!=null&&t.email)){Se({title:"Authentication Required",description:"Please log in to add songs",variant:"destructive"});return}try{const oe=Fe.addSong(t.email,{title:v,artist:p,duration:0,bpm:null,key:null,lyrics:"",waveformData:null});A(pe=>[...pe,oe].sort((Ee,_e)=>Ee.title.localeCompare(_e.title))),w(""),x(""),g(!1),Se({title:"Song Created",description:`${v} by ${p} has been created`})}catch(oe){console.error("Failed to create song:",oe),Se({title:"Error",description:"Failed to create song. Please try again.",variant:"destructive"})}},[t==null?void 0:t.email,v,p,Se]),iS=m.useCallback(()=>{if(!(!R||!(t!=null&&t.email)))try{const oe=Fe.updateSong(t.email,R.id,{lyrics:S});oe&&(E(oe),A(pe=>pe.map(Ee=>Ee.id===R.id?oe:Ee)),y(!1),Se({title:"Lyrics updated",description:"Song lyrics have been saved."}))}catch{Se({title:"Error",description:"Failed to update lyrics. Please try again.",variant:"destructive"})}},[R,S,t==null?void 0:t.email,Se]),aS=async()=>{if(!R){Se({title:"No Song Selected",description:"Please select a song to search for lyrics",variant:"destructive"});return}z(!0),W(null);try{const pe=await(await fetch("/api/lyrics/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:R.title,artist:R.artist})})).json();pe.success?(j(pe.lyrics),Se({title:"Lyrics Found",description:"Lyrics have been automatically loaded"})):pe.openBrowser&&pe.searchResult?(W(pe.searchResult),Se({title:"Lyrics Page Found",description:"Opening lyrics page for manual copy-paste"}),window.open(pe.searchResult.url,"_blank")):Se({title:"No Lyrics Found",description:pe.message||"Could not find lyrics for this song",variant:"destructive"})}catch(oe){console.error("Lyrics search error:",oe),Se({title:"Search Error",description:"Failed to search for lyrics. Please try again.",variant:"destructive"})}finally{z(!1)}},lS=()=>{if(!(!(t!=null&&t.email)||!R))try{if(Fe.deleteSong(t.email,R.id))eS(),s===R.id&&(o(null),ra(null)),C(!1),st&&s===R.id&&Pn(),Se({title:"Song deleted",description:`"${R.title}" by ${R.artist} removed successfully.`});else throw new Error("Song not found")}catch{Se({title:"Error",description:"Failed to delete song. Please try again.",variant:"destructive"})}},cS=()=>{if(!v.trim()||!p.trim()){Se({title:"Validation Error",description:"Please enter both song title and artist.",variant:"destructive"});return}const oe=2;if(M.length>=oe&&r==="free"){Se({title:"Upgrade Required",description:`Free users limited to ${oe} songs. Click the crown icon to upgrade for unlimited songs.`,variant:"destructive"});return}oS()},Pc=()=>{R&&(j(R.lyrics||""),T("lyrics"),y(!0))},uS=()=>{iS()},dS=()=>{lS()},fS=()=>{console.log(`Insert timestamp - currentTime: ${Lt}, duration: ${mr}, isPlaying: ${st}`);const oe=`[${Math.floor(Lt/60)}:${Math.floor(Lt%60).toString().padStart(2,"0")}]`,pe=document.getElementById("lyrics");if(pe){const Ee=pe.selectionStart,_e=pe.selectionEnd,Ue=pe.value,lt=Ue.substring(0,Ee)+oe+Ue.substring(_e);pe.value=lt,j(lt);const Xe=Ee+oe.length,nn=lt.indexOf(`
`,Xe);nn!==-1?pe.setSelectionRange(nn+1,nn+1):pe.setSelectionRange(Xe,Xe),pe.focus()}},hS=m.useCallback(async()=>{try{document.fullscreenElement?(await document.exitFullscreen(),b(!1)):(await document.documentElement.requestFullscreen(),b(!0))}catch(oe){console.error("Fullscreen toggle failed:",oe),Se({title:"Fullscreen Error",description:"Unable to toggle fullscreen mode",variant:"destructive"})}},[Se]);return i.jsxs("div",{className:`h-screen flex flex-col bg-background text-foreground overflow-hidden ${O?"fixed inset-0 z-50":""}`,children:[i.jsx("div",{className:"bg-surface border-b border-gray-700 p-2 md:p-4 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-2 md:gap-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"h-5 w-5 md:h-6 md:w-6 text-primary"}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-base md:text-lg font-semibold",children:"StageTracker Pro"}),(t==null?void 0:t.email)&&i.jsx("span",{className:"text-xs text-gray-400","data-testid":"text-username",children:t.email})]})]})}),i.jsx("div",{className:"flex-1 mx-4 max-h-12",children:i.jsx(yP,{song:R?{...R,userId:(t==null?void 0:t.email)||""}:null,currentTime:Lt,isPlaying:st,audioLevels:Uh,onSeek:Fo,"data-testid":"header-waveform-visualizer"})}),i.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[r==="professional"&&i.jsxs(ee,{variant:"outline",size:"sm",onClick:()=>$(!0),"data-testid":"button-device-manager",className:"h-8 px-2 md:px-3",children:[i.jsx(hs,{className:"h-3 w-3 md:h-4 md:w-4 mr-1 md:mr-2"}),i.jsx("span",{className:"hidden sm:inline text-xs md:text-sm",children:"Devices"})]}),i.jsxs(WA,{children:[i.jsx(VA,{asChild:!0,children:i.jsxs(ee,{variant:"outline",size:"sm","data-testid":"button-settings-menu",className:"h-8 px-2 md:px-3",children:[i.jsx(_j,{className:"h-3 w-3 md:h-4 md:w-4 mr-1 md:mr-2"}),i.jsx("span",{className:"hidden sm:inline text-xs md:text-sm",children:"Settings"})]})}),i.jsxs(Mb,{align:"end",children:[i.jsxs(ts,{onClick:()=>a("/dashboard"),"data-testid":"menuitem-dashboard",children:[i.jsx(kd,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),i.jsx(si,{}),i.jsxs(ts,{onClick:()=>window.open("https://www.youtube.com/channel/UCV6QdegSAG-YgxvXoFTsRVw","_blank"),"data-testid":"menuitem-youtube-tutorials",children:[i.jsx(gj,{className:"h-4 w-4 mr-2"}),"YouTube Tutorials"]}),i.jsx(si,{}),i.jsxs(ts,{onClick:Qr,disabled:D||M.length===0,"data-testid":"menuitem-export-data",children:[D?i.jsx(Go,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(pp,{className:"h-4 w-4 mr-2"}),D?`Exporting... ${X}%`:"Export Library"]}),i.jsxs(ts,{onClick:Es,disabled:Q,"data-testid":"menuitem-import-data",children:[Q?i.jsx(Go,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(Nx,{className:"h-4 w-4 mr-2"}),Q?"Importing...":"Import Library"]}),i.jsx(si,{}),i.jsx(ts,{onClick:hS,"data-testid":"menuitem-fullscreen",children:O?i.jsxs(i.Fragment,{children:[i.jsx(Cj,{className:"h-4 w-4 mr-2"}),"Exit Fullscreen"]}):i.jsxs(i.Fragment,{children:[i.jsx(Nj,{className:"h-4 w-4 mr-2"}),"Fullscreen"]})}),i.jsx(si,{}),i.jsxs(ts,{onClick:()=>{n(),a("/")},"data-testid":"menuitem-logout",children:[i.jsx(lc,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]}),r!=="professional"&&i.jsxs(ee,{variant:"default",size:"sm",onClick:()=>{console.log("🔄 Current user type before upgrade:",r,"User:",t),a("/subscribe")},"data-testid":"button-upgrade-subscription",className:"h-8 px-2 md:px-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white border-0",children:[i.jsx(ln,{className:"h-3 w-3 md:h-4 md:w-4 mr-1 md:mr-2"}),i.jsx("span",{className:"hidden sm:inline text-xs md:text-sm",children:r==="free"?"Upgrade":"Upgrade to Pro"}),i.jsx("span",{className:"sm:hidden text-xs",children:r==="free"?"Up":"Pro"})]})]})]})}),xt&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 border-b border-blue-200 dark:border-blue-800 p-4 flex-shrink-0",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[i.jsx("h2",{className:"text-lg font-bold text-blue-900 dark:text-blue-100 mb-2",children:"📺 Viewing Live Performance"}),i.jsx("h3",{className:"text-xl text-blue-800 dark:text-blue-200 mb-1",children:ce==null?void 0:ce.songTitle}),(ce==null?void 0:ce.artist)&&i.jsxs("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:["by ",ce.artist]}),i.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-4",children:["Position: ",Math.floor((ce==null?void 0:ce.position)||0),"s",(ce==null?void 0:ce.duration)&&` / ${Math.floor(ce.duration)}s`," • ","Status: ",ce!=null&&ce.isPlaying?"▶️ Playing":"⏸️ Paused"]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg text-left max-h-96 overflow-y-auto",children:i.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:ce==null?void 0:ce.lyrics})})]})}),i.jsxs("div",{className:"flex-1 flex min-h-0",children:[i.jsxs("div",{className:"w-72 md:w-80 border-r border-gray-700 bg-surface flex flex-col min-h-0",children:[i.jsx("div",{className:"p-2 md:p-4 border-b border-gray-700 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center justify-between mb-2 md:mb-4",children:[i.jsxs("h2",{className:"text-sm md:text-lg font-semibold",children:["Songs (",M.length,")"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Jn,{open:d,onOpenChange:g,children:[i.jsx(dP,{asChild:!0,children:i.jsxs(ee,{size:"sm",className:"h-7 md:h-8 px-2 md:px-3","data-testid":"button-add-song",children:[i.jsx(Nd,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),i.jsx("span",{className:"text-xs md:text-sm",children:"Add"})]})}),i.jsxs(Ln,{"data-testid":"dialog-add-song",children:[i.jsxs(er,{children:[i.jsx(tr,{children:"Add New Song"}),i.jsx(Al,{children:"Create a new song to add tracks and practice with."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(rt,{htmlFor:"song-title",children:"Title"}),i.jsx(zt,{id:"song-title",value:v,onChange:oe=>w(oe.target.value),placeholder:"Enter song title","data-testid":"input-song-title"})]}),i.jsxs("div",{children:[i.jsx(rt,{htmlFor:"song-artist",children:"Artist"}),i.jsx(zt,{id:"song-artist",value:p,onChange:oe=>x(oe.target.value),placeholder:"Enter artist name","data-testid":"input-song-artist"})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(ee,{variant:"outline",onClick:()=>g(!1),"data-testid":"button-cancel-add-song",children:"Cancel"}),i.jsx(ee,{onClick:cS,"data-testid":"button-save-song",children:"Create Song"})]})]})]})]}),i.jsxs(ee,{size:"sm",variant:"outline",className:"h-7 md:h-8 px-2 md:px-3",onClick:()=>{R?C(!0):Se({title:"No Song Selected",description:"Please select a song to delete",variant:"destructive"})},disabled:!R||st,"data-testid":"button-delete-song",children:[i.jsx(pi,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),i.jsx("span",{className:"text-xs md:text-sm",children:"Delete"})]})]}),i.jsx(Jn,{open:N,onOpenChange:C,children:i.jsxs(Ln,{"data-testid":"dialog-delete-song",children:[i.jsx(er,{children:i.jsx(tr,{children:"Delete Song"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{children:['Are you sure you want to delete "',R==null?void 0:R.title,'" by ',R==null?void 0:R.artist,"? This action cannot be undone."]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(ee,{variant:"outline",onClick:()=>C(!1),"data-testid":"button-cancel-delete",children:"Cancel"}),i.jsx(ee,{variant:"destructive",onClick:dS,"data-testid":"button-confirm-delete",children:"Delete Song"})]})]})]})})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto",children:[(()=>{const oe=M.reduce((Ee,_e)=>{const Ue=_e.title.charAt(0).toUpperCase();return Ee[Ue]||(Ee[Ue]=[]),Ee[Ue].push(_e),Ee},{});return Object.keys(oe).sort().map(Ee=>i.jsxs("div",{children:[i.jsx("div",{className:"px-2 md:px-4 py-1 bg-gray-800/50 border-b border-gray-600",children:i.jsx("div",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:Ee})}),oe[Ee].map(_e=>i.jsxs("div",{className:`p-2 md:p-4 border-b border-gray-700 transition-colors touch-target cursor-pointer hover:bg-gray-700 pt-[8px] pb-[8px] ${s===_e.id?"bg-primary/20 border-l-4 border-l-primary":"bg-transparent border-l-4 border-l-transparent hover:border-l-gray-600"}`,onClick:()=>{st||(o(_e.id),ra(null))},"data-testid":`song-item-${_e.id}`,children:[i.jsxs("div",{className:"flex items-center justify-between mt-[-8px] mb-[-8px]",children:[i.jsx("div",{className:"font-medium text-sm md:text-base truncate mr-2",children:_e.title}),i.jsx("div",{className:"flex gap-1",children:i.jsxs("button",{className:"text-xs px-2 py-1 rounded transition-colors touch-target flex-shrink-0 bg-gray-700 hover:bg-gray-600 mt-[4px] mb-[4px] ml-[1px] mr-[1px] pl-[14px] pr-[14px] pt-[4px] pb-[4px]",onClick:Ue=>{Ue.stopPropagation(),st||(o(_e.id),ra(null),f(!0))},disabled:st,"data-testid":`button-tracks-${_e.id}`,children:[_e.tracks?_e.tracks.length:0," tracks"]})})]}),i.jsx("div",{className:"text-xs md:text-sm text-gray-400 truncate mt-[-6px] mb-[-6px]",children:_e.artist}),i.jsxs("div",{className:"flex items-center justify-between pt-[0px] pb-[0px] mt-[-8px] mb-[-8px]",children:[i.jsx("div",{className:"text-xs text-gray-500 mt-[8px] mb-[8px] ml-[0px] mr-[0px] pl-[0px] pr-[0px] pt-[-2px] pb-[-2px]",children:_e.duration>0?`${Math.floor(_e.duration/60)}:${Math.floor(_e.duration%60).toString().padStart(2,"0")}`:"0:00"}),s===_e.id&&i.jsx(Y0,{leftLevel:Bh.left,rightLevel:Bh.right,isPlaying:st,size:"sm",horizontal:!0,className:"flex-shrink-0"})]})]},_e.id))]},Ee))})(),M.length===0&&i.jsxs("div",{className:"p-4 text-center text-gray-400",children:[i.jsx(Vn,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No songs found"}),i.jsx("p",{className:"text-xs mt-1",children:"Create a song to get started"})]})]}),i.jsx("div",{className:"p-2 md:p-4 border-t border-gray-700 flex-shrink-0 mobile-hidden",children:i.jsx(Up,{isPlaying:st,currentTime:Lt,duration:mr,onPlay:Yn,onPause:Pn,onStop:ta})})]}),i.jsx("div",{className:"flex-1 flex flex-col min-h-0 md:flex-row",children:i.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[i.jsxs("div",{className:"p-2 md:p-4 border-b border-gray-700 bg-surface flex items-center justify-between mobile-hidden",children:[i.jsx("h2",{className:"text-sm md:text-lg font-semibold truncate mr-2",children:R?`${R.title} - ${R.artist}`:"Select a song"}),R&&i.jsx(Wp,{onEditLyrics:Pc,song:R})]}),i.jsx("div",{className:"p-2 border-b border-gray-700 bg-surface md:hidden flex-shrink-0",children:i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h2",{className:"text-sm font-semibold truncate mr-2 flex-1",children:R?`${R.title} - ${R.artist}`:"Select a song"}),R&&i.jsx(Wp,{onEditLyrics:Pc,song:R})]})}),i.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",style:{contain:"layout style"},children:i.jsx(j0,{song:R,currentTime:Lt,duration:mr,onEditLyrics:R?Pc:void 0,isPlaying:st})}),i.jsx("div",{className:"p-3 border-t border-gray-700 bg-surface flex-shrink-0 md:hidden",children:i.jsx("div",{className:"w-full space-y-2",children:i.jsx(Up,{isPlaying:st,currentTime:Lt,duration:mr,onPlay:nS,onPause:rS,onStop:sS})})})]})})]}),i.jsx("div",{className:"bg-surface border-t border-gray-700 p-2 flex-shrink-0 mobile-hidden",children:i.jsx("div",{className:"flex items-center justify-between gap-4",children:i.jsx(A_,{isAudioEngineOnline:Q1,latency:l,isHost:fe,isViewer:ye,currentRoom:(be==null?void 0:be.name)||null,exportTask:D?{progress:X,status:Z,onCancel:Zr}:void 0})})}),i.jsx(Jn,{open:h,onOpenChange:y,children:i.jsxs(Ln,{className:"max-w-[95vw] max-h-[95vh] w-full h-full flex flex-col p-3",children:[i.jsxs("div",{className:"flex-shrink-0 border-b border-gray-700 pb-2 mb-2",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs(tr,{className:"text-lg font-bold truncate flex-1 mr-4",children:[R==null?void 0:R.title," - ",R==null?void 0:R.artist]}),i.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:[Math.floor(Lt/60),":",Math.floor(Lt%60).toString().padStart(2,"0")," / ",R!=null&&R.duration?`${Math.floor(R.duration/60)}:${Math.floor(R.duration%60).toString().padStart(2,"0")}`:"--:--"]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsxs(ee,{variant:"outline",size:"sm",onClick:st?Pn:Yn,disabled:!R||!R.tracks||R.tracks.length===0,"data-testid":"button-preview-playback",className:"h-8 px-3",children:[st?i.jsx(xo,{className:"w-3 h-3 mr-1"}):i.jsx(xs,{className:"w-3 h-3 mr-1"}),st?"Pause":"Play"]}),i.jsxs(ee,{variant:"outline",size:"sm",onClick:fS,"data-testid":"button-insert-timestamp",className:"h-8 px-3",children:[i.jsx(kx,{className:"w-3 h-3 mr-1"}),"Timestamp"]}),i.jsxs(ee,{variant:"outline",size:"sm",onClick:aS,disabled:!R||U,"data-testid":"button-search-lyrics",className:"h-8 px-3",children:[U?i.jsx(Go,{className:"w-3 h-3 mr-1 animate-spin"}):i.jsx(Ej,{className:"w-3 h-3 mr-1"}),U?"Searching...":"Search Online"]}),i.jsxs(ee,{variant:F?"default":"outline",size:"sm",onClick:Ec,"data-testid":"button-midi-listen",className:"h-8 px-3",children:[F?i.jsx(hs,{className:"w-3 h-3 mr-1 animate-pulse"}):i.jsx(ac,{className:"w-3 h-3 mr-1"}),F?"Listening...":"MIDI Listen"]})]})]}),i.jsx("div",{className:"flex-1 overflow-hidden",children:i.jsx(Th,{ref:te,id:"lyrics",value:S,onChange:oe=>j(oe.target.value),placeholder:`Enter song lyrics here...

Tip: Use timestamps like [01:30] for synchronized playback`,className:"w-full h-full resize-none font-mono text-sm border border-gray-600 bg-background","data-testid":"textarea-lyrics"})}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2 mt-2 border-t border-gray-700 flex-shrink-0",children:[i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{y(!1),j("")},"data-testid":"button-cancel-lyrics",children:"Cancel"}),i.jsx(ee,{size:"sm",onClick:uS,"data-testid":"button-save-lyrics",className:"bg-primary hover:bg-primary/90",children:"Save Lyrics"})]})]})}),i.jsx(Jn,{open:u,onOpenChange:f,children:i.jsxs(Ln,{className:"max-w-6xl max-h-[90vh]","data-testid":"dialog-track-manager",children:[i.jsx(er,{}),R&&i.jsxs("div",{className:"space-y-4",children:[i.jsx(oT,{song:R,isOpen:u,audioEngine:$h.audioEngine,onSongUpdate:oe=>{console.log("Performance: Received song update with",oe.tracks.length,"tracks"),E(oe),A(pe=>pe.map(Ee=>Ee.id===oe.id?oe:Ee))},onTrackVolumeChange:q1,onTrackMuteToggle:Z1,onTrackSoloToggle:J1,onTrackBalanceChange:X1,onPlay:Yn,onPause:Pn,isPlaying:st,isLoadingTracks:Y1,audioLevels:Uh,"data-testid":"track-manager"}),!1]})]})}),i.jsx(Jn,{open:H,onOpenChange:K,children:i.jsxs(Ln,{className:"sm:max-w-md",children:[i.jsxs(er,{children:[i.jsx(tr,{children:"Export Music Library"}),i.jsx(Al,{children:"Choose a name for your backup file"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(rt,{htmlFor:"export-filename",children:"Filename"}),i.jsx(zt,{id:"export-filename",value:V,onChange:oe=>q(oe.target.value),placeholder:"Enter filename...",className:"mt-1","data-testid":"input-export-filename"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:".zip extension will be added automatically"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(ee,{variant:"outline",onClick:()=>K(!1),"data-testid":"button-cancel-export",children:"Cancel"}),i.jsx(ee,{onClick:Lo,disabled:!V.trim()||D,"data-testid":"button-confirm-export",children:D?i.jsxs(i.Fragment,{children:[i.jsx(Go,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(pp,{className:"h-4 w-4 mr-2"}),"Export"]})})]})]})]})}),i.jsx(Jn,{open:Q,onOpenChange:()=>{},children:i.jsxs(Ln,{className:"sm:max-w-md","data-testid":"dialog-import-progress",children:[i.jsxs(er,{children:[i.jsx(tr,{children:"Importing Music Library"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Please wait while your backup is being imported"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Progress"}),i.jsxs("span",{children:[xe,"%"]})]}),i.jsx(dh,{value:xe,className:"w-full","data-testid":"progress-import"})]}),ke&&i.jsx("div",{className:"text-sm text-muted-foreground",children:i.jsx("p",{"data-testid":"text-import-status",children:ke})}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[i.jsx(Go,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Do not close this window"})]})})]})]})}),i.jsx(pR,{isOpen:I,onClose:()=>$(!1)}),i.jsx("input",{ref:Tn,type:"file",accept:".zip",style:{display:"none"},onChange:G1,"data-testid":"hidden-import-file-input"})]})}function vR(){const[e]=m.useState(()=>new Iw),[t,n]=m.useState(e.getState()),[r,s]=m.useState(!1),[o,a]=m.useState(!1),[l,c]=m.useState(null);m.useEffect(()=>{const N=e.subscribe(()=>{n(e.getState())});return()=>{N(),e.dispose()}},[e]);const u=m.useCallback(async N=>{if(!N||!N.tracks||N.tracks.length===0){console.warn("🚀 No tracks to load for streaming"),s(!1),a(!1);return}console.log(`🚀 Streaming loadSong called: "${N.title}" with ${N.tracks.length} tracks`),s(!0),a(!1),c(N);try{console.log(`🚀 Streaming load: "${N.title}" with ${N.tracks.length} tracks (instant setup)`);const C=new $n,P=N.tracks.map(async M=>{try{const A=await C.getAudioUrl(M.id);return A?(console.log(`🎵 Streaming track: ${M.name} -> ${A.substring(0,50)}...`),{id:M.id,name:M.name,url:A}):null}catch(A){return console.warn(`⚠️ Failed to get URL for track ${M.name}:`,A),null}}),T=(await Promise.all(P)).filter(Boolean);if(T.length===0)throw new Error("No valid audio URLs found for streaming");console.log(`🔧 Loading tracks with enhanced error handling for: "${N.title}"`);try{await e.loadTracks(T),setTimeout(()=>{e.autoGenerateWaveform(N).catch(M=>{console.warn("⚠️ Waveform generation failed (non-critical):",M)})},100),a(!0),console.log(`✅ Streaming ready for "${N.title}" - instant playback available`)}catch(M){throw console.error(`❌ Streaming engine failed for "${N.title}":`,M),a(!1),new Error(`Failed to set up audio engine for "${N.title}". The song may be corrupted.`)}}catch(C){console.error("❌ Streaming load failed:",C),a(!1),s(!1)}},[e]),f=m.useCallback(async()=>{if(!o){console.warn("Streaming not ready for playback");return}console.log("▶️ Starting streaming playback"),await e.play()},[e,o]),d=m.useCallback(()=>{console.log("⏸️ Pausing streaming playback"),e.pause()},[e]),g=m.useCallback(()=>{console.log("⏹️ Stopping streaming playback"),e.stop()},[e]),v=m.useCallback(N=>{console.log(`⏯️ Streaming seek to ${N.toFixed(1)}s`),e.seek(N)},[e]),w=m.useCallback((N,C)=>{e.setTrackVolume(N,C/100)},[e]),p=m.useCallback(N=>{e.toggleTrackMute(N)},[e]),x=m.useCallback(N=>{e.toggleTrackSolo(N)},[e]),h=m.useCallback((N,C)=>{e.setTrackBalance(N,C)},[e]),y=m.useCallback(N=>{e.setMasterVolume(N/100)},[e]),S=m.useCallback(N=>e.getTrackLevels(N),[e]),j=m.useCallback(()=>e.getMasterLevels(),[e]);return{isPlaying:t.isPlaying,currentTime:t.currentTime,duration:t.duration,isLoading:r,isReady:o,tracks:t.tracks,loadSong:u,play:f,pause:d,stop:g,seek:v,setTrackVolume:w,toggleTrackMute:p,toggleTrackSolo:x,setTrackBalance:h,setMasterVolume:y,getTrackLevels:S,getMasterLevels:j,currentSong:l}}function yR(){const{user:e}=hr(),[t,n]=m.useState([]),[r,s]=m.useState(null),[o,a]=m.useState(null),[l,c]=m.useState(null),[u,f]=m.useState(null),[d,g]=m.useState(null),v=Mw({song:r?{...r,userId:"demo-user",tracks:r.tracks||[]}:void 0,onDurationUpdated:()=>{}}),w=vR();m.useEffect(()=>{if(!(e!=null&&e.email))return;const N=Fe.getAllSongs(e.email);n(N),N.length>0&&s(N[0])},[e==null?void 0:e.email]),m.useEffect(()=>{if(o&&v.duration>0){const N=Date.now()-o;f(N),a(null)}},[v.duration,o]),m.useEffect(()=>{if(l&&w.isReady){const N=Date.now()-l;g(N),c(null)}},[w.isReady,l]);const p=async()=>{r&&(a(Date.now()),f(null),s(null),setTimeout(()=>s(t.find(N=>N.id===r.id)||null),100))},x=async()=>{r&&(c(Date.now()),g(null),await w.loadSong({...r,userId:"demo-user",tracks:r.tracks||[]}))},h=N=>N<1e3?`${N}ms`:`${(N/1e3).toFixed(1)}s`,y=(N,C=!0)=>N!==null?{text:`Loaded in ${h(N)}`,color:"green"}:C?{text:"Ready",color:"green"}:{text:"Not loaded",color:"gray"},S=y(u,v.duration>0),j=y(d,w.isReady);return i.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Audio Streaming vs Preload Demo"}),i.jsx("p",{className:"text-muted-foreground",children:"Compare loading times and performance between traditional preload and modern streaming approaches"})]}),i.jsxs(je,{className:"mb-6",children:[i.jsx(Oe,{children:i.jsx(Le,{children:"Select Song for Testing"})}),i.jsxs(Pe,{children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(N=>{var C;return i.jsx(ee,{variant:(r==null?void 0:r.id)===N.id?"default":"outline",onClick:()=>s(N),className:"justify-start h-auto p-4",children:i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium",children:N.title}),i.jsx("div",{className:"text-sm text-muted-foreground",children:N.artist}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[((C=N.tracks)==null?void 0:C.length)||0," tracks"]})]})},N.id)})}),t.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No songs found. Add some songs in the Track Manager first."})]})]}),r&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(je,{children:[i.jsxs(Oe,{children:[i.jsxs(Le,{className:"flex items-center gap-2",children:[i.jsx(vj,{className:"h-5 w-5 text-blue-500"}),"Preload Mode",i.jsx(Bt,{variant:"secondary",children:"Traditional"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Downloads and decodes entire audio files before playback can begin"})]}),i.jsxs(Pe,{className:"space-y-4",children:[i.jsx("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${S.color==="green"?"bg-green-500":S.color==="yellow"?"bg-yellow-500":"bg-gray-500"}`}),i.jsx("span",{className:"text-sm font-medium",children:S.text})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ee,{onClick:p,className:"w-full",variant:"outline",children:[i.jsx(bp,{className:"h-4 w-4 mr-2"}),"Test Preload Speed"]}),i.jsx(ee,{onClick:v.isPlaying?v.pause:v.play,disabled:!v.duration,className:"w-full",children:v.isPlaying?i.jsxs(i.Fragment,{children:[i.jsx(xo,{className:"h-4 w-4 mr-2"})," Pause"]}):i.jsxs(i.Fragment,{children:[i.jsx(xs,{className:"h-4 w-4 mr-2"})," Play"]})})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Duration:"}),i.jsx("span",{children:v.duration?`${Math.floor(v.duration/60)}:${Math.floor(v.duration%60).toString().padStart(2,"0")}`:"--:--"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Current Time:"}),i.jsx("span",{children:v.currentTime?`${Math.floor(v.currentTime/60)}:${Math.floor(v.currentTime%60).toString().padStart(2,"0")}`:"0:00"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Load Time:"}),i.jsx("span",{className:u!==null?"font-bold text-red-500":"",children:u!==null?h(u):"Not tested"})]})]})]})]}),i.jsxs(je,{children:[i.jsxs(Oe,{children:[i.jsxs(Le,{className:"flex items-center gap-2",children:[i.jsx(On,{className:"h-5 w-5 text-green-500"}),"Streaming Mode",i.jsx(Bt,{variant:"default",children:"Modern"})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Sets up audio streams instantly and begins playback immediately"})]}),i.jsxs(Pe,{className:"space-y-4",children:[i.jsx("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${j.color==="green"?"bg-green-500":j.color==="yellow"?"bg-yellow-500":"bg-gray-500"}`}),i.jsx("span",{className:"text-sm font-medium",children:j.text})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(ee,{onClick:x,className:"w-full",variant:"outline",children:[i.jsx(bp,{className:"h-4 w-4 mr-2"}),"Test Streaming Speed"]}),i.jsx(ee,{onClick:w.isPlaying?w.pause:w.play,disabled:!w.isReady,className:"w-full",children:w.isPlaying?i.jsxs(i.Fragment,{children:[i.jsx(xo,{className:"h-4 w-4 mr-2"})," Pause"]}):i.jsxs(i.Fragment,{children:[i.jsx(xs,{className:"h-4 w-4 mr-2"})," Play"]})})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Duration:"}),i.jsx("span",{children:w.duration?`${Math.floor(w.duration/60)}:${Math.floor(w.duration%60).toString().padStart(2,"0")}`:"--:--"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Current Time:"}),i.jsx("span",{children:w.currentTime?`${Math.floor(w.currentTime/60)}:${Math.floor(w.currentTime%60).toString().padStart(2,"0")}`:"0:00"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Load Time:"}),i.jsx("span",{className:d!==null?"font-bold text-green-500":"",children:d!==null?h(d):"Not tested"})]})]})]})]})]}),u!==null&&d!==null&&i.jsxs(je,{className:"mt-6",children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center gap-2",children:[i.jsx(kx,{className:"h-5 w-5"}),"Performance Comparison"]})}),i.jsxs(Pe,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:h(u)}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Preload Time"})]}),i.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-950/20 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:h(d)}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Streaming Time"})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-950/20 rounded-lg",children:[i.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(u/d*10)/10,"x"]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Speed Improvement"})]})]}),i.jsx("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:"Streaming mode eliminates load delays completely, making it perfect for live performance where instant response is critical."})]})]})]})}var Dh="Avatar",[xR,E4]=Ct(Dh),[wR,e1]=xR(Dh),t1=m.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,o]=m.useState("idle");return i.jsx(wR,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:i.jsx(we.span,{...r,ref:t})})});t1.displayName=Dh;var n1="AvatarImage",r1=m.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=e,a=e1(n1,n),l=bR(r,o),c=qe(u=>{s(u),a.onImageLoadingStatusChange(u)});return At(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(we.img,{...o,ref:t,src:r}):null});r1.displayName=n1;var s1="AvatarFallback",o1=m.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,o=e1(s1,n),[a,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&o.imageLoadingStatus!=="loaded"?i.jsx(we.span,{...s,ref:t}):null});o1.displayName=s1;function lg(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function bR(e,{referrerPolicy:t,crossOrigin:n}){const r=kR(),s=m.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=m.useState(()=>lg(o,e));return At(()=>{l(lg(o,e))},[o,e]),At(()=>{const c=d=>()=>{l(d)};if(!o)return;const u=c("loaded"),f=c("error");return o.addEventListener("load",u),o.addEventListener("error",f),t&&(o.referrerPolicy=t),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",u),o.removeEventListener("error",f)}},[o,n,t]),a}function SR(){return()=>{}}function kR(){return m.useSyncExternalStore(SR,()=>!0,()=>!1)}var i1=t1,a1=r1,l1=o1;const c1=m.forwardRef(({className:e,...t},n)=>i.jsx(i1,{ref:n,className:Ce("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));c1.displayName=i1.displayName;const u1=m.forwardRef(({className:e,...t},n)=>i.jsx(a1,{ref:n,className:Ce("aspect-square h-full w-full",e),...t}));u1.displayName=a1.displayName;const d1=m.forwardRef(({className:e,...t},n)=>i.jsx(l1,{ref:n,className:Ce("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));d1.displayName=l1.displayName;function NR(){const{user:e,logout:t}=hr(),{currentRoom:n,isHost:r,isViewer:s,isConnected:o,startBroadcast:a,joinBroadcast:l,leaveBroadcast:c}=Ph(),{toast:u}=Mt(),[,f]=yt(),[d,g]=m.useState(""),[v,w]=m.useState(""),[p,x]=m.useState(!1),[h,y]=m.useState(!1),[S,j]=m.useState(null),[N,C]=m.useState(!1),P=m.useRef(null),[T,M]=m.useState({firstName:"",lastName:"",phone:"",customBroadcastId:""}),[A,R]=m.useState(!1),[E,O]=m.useState(null),[b,I]=m.useState({firstName:"",lastName:"",phone:"",customBroadcastId:""}),U=T.customBroadcastId?T.customBroadcastId:(e==null?void 0:e.userType)==="professional"?`PRO-${e.email.split("@")[0].toUpperCase().substring(0,6)}-${e.email.length}${Date.now().toString().slice(-3)}`:null,z=(e==null?void 0:e.userType)==="professional",_=(e==null?void 0:e.userType)==="premium"||(e==null?void 0:e.userType)==="professional";m.useEffect(()=>{const Q=async()=>{if(e!=null&&e.email)try{const xe=await fetch(`/api/profile?email=${encodeURIComponent(e.email)}`,{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}});if(xe.ok){const Me=xe.headers.get("content-type");if(Me&&Me.includes("application/json")){const ke=await xe.json(),k={firstName:ke.firstName||"",lastName:ke.lastName||"",phone:ke.phone||"",customBroadcastId:ke.customBroadcastId||""};M(k),I(k),j(ke.profilePhoto),console.log("✅ User profile data loaded successfully")}else console.error("❌ Profile API returned non-JSON response"),await ue()}else console.error("❌ Profile API request failed:",xe.status),await ue()}catch(xe){console.error("Error loading user data:",xe),await ue()}},ue=async()=>{if(e!=null&&e.email)try{const xe=await fetch(`/api/profile-photo?email=${encodeURIComponent(e.email)}`,{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}});if(xe.ok){const Me=xe.headers.get("content-type");if(Me&&Me.includes("application/json")){const ke=await xe.json();j(ke.profilePhoto)}}}catch(xe){console.error("Error loading profile photo:",xe)}};Q()},[e==null?void 0:e.email]);const W=async()=>{if(!(!e||!d.trim())){if(!z){u({title:"Permission Denied",description:"Only Professional users can start broadcasts. Upgrade to Professional to broadcast.",variant:"destructive"});return}x(!0);try{const Q=await a(e.email,e.email,d);u({title:"🎭 Broadcast Started!",description:`"${d}" is now live!
Redirecting to performance page...`}),g(""),setTimeout(()=>{f("/")},1e3)}catch(Q){console.error("📡 Broadcast start error:",Q),u({title:"Failed to start broadcast",description:(Q==null?void 0:Q.message)||"Please check your network connection and try again",variant:"destructive"}),x(!1)}}},D=async()=>{if(!(!e||!v.trim())){if(!_){u({title:"Permission Denied",description:"Only Premium and Professional users can join broadcasts. Upgrade to Premium to join broadcasts.",variant:"destructive"});return}y(!0);try{const Q=await fetch(`/api/broadcast/check/${encodeURIComponent(v.trim())}`),{exists:ue,session:xe}=await Q.json();if(!ue){u({title:"Broadcast not found",description:`No active broadcast named "${v}" was found`,variant:"destructive"}),y(!1);return}console.log("📡 Broadcast exists in database:",xe),await l(v,e.email,e.email)?(u({title:"🎵 Joined Broadcast!",description:`Connected to "${xe.name}"! Redirecting to viewer...`}),w(""),setTimeout(()=>{f("/broadcast-viewer")},1e3)):(u({title:"Failed to join broadcast",description:"Unable to establish connection to the broadcast",variant:"destructive"}),y(!1))}catch(Q){console.error("Join broadcast error:",Q),u({title:"Connection failed",description:"Unable to connect to the broadcast",variant:"destructive"}),y(!1)}}},B=()=>{c(),u({title:r?"Broadcast ended":"Left broadcast",description:r?"Your broadcast has been stopped":"You've disconnected from the broadcast"})},X=async Q=>{var ke;const ue=(ke=Q.target.files)==null?void 0:ke[0];if(!ue||!ue.type.startsWith("image/")){u({title:"Invalid file",description:"Please select a valid image file.",variant:"destructive"});return}const xe=1.5*1024*1024;if(ue.size>xe){const k=(ue.size/1048576).toFixed(1);u({title:"File too large",description:`Image is ${k}MB. Please select an image smaller than 1.5MB (becomes ~2MB when processed).`,variant:"destructive"});return}C(!0);const Me=new FileReader;Me.onload=async k=>{var K;const H=(K=k.target)==null?void 0:K.result;try{if((await fetch("/api/profile-photo",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({photoData:H,userEmail:e==null?void 0:e.email})})).ok)j(H),localStorage.removeItem(`profile_photo_${e==null?void 0:e.email}`),C(!1),u({title:"Photo updated!",description:"Your profile photo has been saved successfully."});else throw new Error("Failed to upload photo")}catch(F){console.error("Error uploading photo:",F),C(!1),u({title:"Upload failed",description:"Failed to save your profile photo. Try a smaller image or check your connection.",variant:"destructive"})}},Me.readAsDataURL(ue)},Y=Q=>{O(Q),I({firstName:T.firstName,lastName:T.lastName,phone:T.phone,customBroadcastId:T.customBroadcastId})},Z=async Q=>{if(e!=null&&e.email){R(!0);try{const ue={[Q]:b[Q]};(await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...ue,userEmail:e.email})})).ok?(M(Me=>({...Me,[Q]:b[Q]})),O(null),u({title:`${Q==="firstName"?"First name":Q==="lastName"?"Last name":"Phone"} updated`,description:"Your profile has been updated successfully."})):u({title:"Update failed",description:"Failed to update profile. Please try again.",variant:"destructive"})}catch{u({title:"Update failed",description:"Failed to update profile. Please try again.",variant:"destructive"})}R(!1)}},le=()=>{O(null),I({firstName:T.firstName,lastName:T.lastName,phone:T.phone,customBroadcastId:T.customBroadcastId})},ve=Q=>{if(!Q)return"";const ue=Q.replace(/\D/g,"");return ue.length===10?`(${ue.slice(0,3)}) ${ue.slice(3,6)}-${ue.slice(6)}`:ue.length===11&&ue[0]==="1"?`+1 (${ue.slice(1,4)}) ${ue.slice(4,7)}-${ue.slice(7)}`:Q},ge=Q=>{const ue=Q.replace(/\D/g,"");ue.length>=6?`${ue.slice(0,3)}${ue.slice(3,6)}${ue.slice(6,10)}`:ue.length>=3&&`${ue.slice(0,3)}${ue.slice(3)}`,I(xe=>({...xe,phone:ue}))};return m.useEffect(()=>{if(e!=null&&e.profilePhoto)j(e.profilePhoto);else if(e!=null&&e.email){const Q=localStorage.getItem(`profile_photo_${e.email}`);Q&&(j(Q),fetch("/api/profile-photo",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({photoData:Q})}).then(()=>{localStorage.removeItem(`profile_photo_${e.email}`)}).catch(console.error))}},[e]),e?i.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[i.jsx("div",{className:"bg-surface border-b border-gray-700 shadow-sm",children:i.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Dashboard"}),i.jsxs("p",{className:"text-gray-400",children:["Welcome, ",e.email]})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsx(ee,{variant:"outline",onClick:()=>window.location.href="/",children:"← Back to Performance"})})]})})}),i.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(r||s)&&n&&i.jsxs(je,{className:"mb-6 border-blue-200 bg-blue-50 dark:bg-blue-900/20",children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center gap-2",children:[r?i.jsxs(i.Fragment,{children:[i.jsx(kd,{className:"h-5 w-5 text-blue-600"}),"You're Broadcasting"]}):i.jsxs(i.Fragment,{children:[i.jsx(xp,{className:"h-5 w-5 text-green-600"}),"Viewing Broadcast"]}),i.jsx(Bt,{variant:"secondary",className:"ml-2",children:o?"Connected":"Offline"})]})}),i.jsxs(Pe,{className:"p-6 pt-0 bg-[#000000]",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx(rt,{className:"text-sm font-medium",children:"Room ID"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("code",{className:"bg-white dark:bg-gray-800 px-2 py-1 rounded text-lg font-mono",children:n.id}),i.jsx(ee,{size:"sm",variant:"outline",onClick:()=>navigator.clipboard.writeText(n.id),children:i.jsx(kj,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{children:[i.jsx(rt,{className:"text-sm font-medium",children:"Broadcast Name"}),i.jsx("p",{className:"text-lg",children:n.name})]}),i.jsxs("div",{children:[i.jsx(rt,{className:"text-sm font-medium",children:"Participants"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Mj,{className:"h-4 w-4"}),i.jsx("span",{className:"text-lg",children:n.participantCount})]})]})]}),i.jsx(ee,{onClick:B,variant:"destructive",children:r?"End Broadcast":"Leave Broadcast"})]})]}),!r&&!s&&i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[i.jsxs(je,{className:z?"":"opacity-60",children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center gap-2",children:[i.jsx(kd,{className:"h-5 w-5"}),"Start Broadcasting",!z&&i.jsx(Bt,{variant:"outline",className:"text-xs",children:"Professional Only"})]})}),i.jsxs(Pe,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-400",children:z?"Share your performance screen with band members in real-time":"Upgrade to Professional to start broadcasts"}),z?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(rt,{htmlFor:"broadcast-name",children:"Broadcast Name"}),i.jsx(zt,{id:"broadcast-name",placeholder:U?`${U} Show`:"Tonight's Show",value:d,onChange:Q=>g(Q.target.value)})]}),i.jsx(ee,{onClick:W,disabled:!d.trim()||p,className:"w-full",children:p?"Starting...":"Start Broadcasting"})]}):i.jsxs(ee,{onClick:()=>window.location.href="/subscribe",className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[i.jsx(ln,{className:"h-4 w-4 mr-2"}),"Upgrade to Professional"]})]})]}),i.jsxs(je,{className:_?"":"opacity-60",children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center gap-2",children:[i.jsx(xp,{className:"h-5 w-5"}),"Join Broadcast",!_&&i.jsx(Bt,{variant:"outline",className:"text-xs",children:"Premium+"})]})}),i.jsxs(Pe,{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-400",children:_?"Enter the broadcast name to join someone's live performance":"Upgrade to Premium to join broadcasts"}),_?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(rt,{htmlFor:"room-id",children:"Broadcast Name"}),i.jsx(zt,{id:"room-id",placeholder:"Tonight's Show",value:v,onChange:Q=>w(Q.target.value)})]}),i.jsx(ee,{onClick:D,disabled:!v.trim()||h,className:"w-full",children:h?"Joining...":"Join Broadcast"})]}):i.jsxs(ee,{onClick:()=>window.location.href="/subscribe",className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[i.jsx(ln,{className:"h-4 w-4 mr-2"}),"Upgrade to Premium"]})]})]})]}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(je,{className:"h-fit",children:[i.jsx(Oe,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(Le,{className:"flex items-center gap-2",children:[i.jsx(uu,{className:"h-5 w-5"}),"User Profile"]}),i.jsx("div",{className:"flex items-center gap-2",children:e.userType==="professional"?i.jsxs(i.Fragment,{children:[i.jsx(ln,{className:"h-4 w-4 text-yellow-500"}),i.jsx(Bt,{variant:"secondary",children:"Professional"})]}):i.jsxs(i.Fragment,{children:[i.jsx(uu,{className:"h-4 w-4"}),i.jsx(Bt,{variant:"secondary",children:e.userType||"Free"})]})})]})}),i.jsxs(Pe,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs(c1,{className:"h-20 w-20",children:[i.jsx(u1,{src:S||void 0}),i.jsx(d1,{children:i.jsx(uu,{className:"h-8 w-8"})})]}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{children:i.jsx("h3",{className:"text-lg font-semibold",children:e.email})}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>{var Q;return(Q=P.current)==null?void 0:Q.click()},disabled:N,className:"w-fit",children:N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin mr-2"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Nx,{className:"h-4 w-4 mr-2"}),"Change Photo"]})}),i.jsx("input",{type:"file",ref:P,onChange:X,accept:"image/*",className:"hidden"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(rt,{className:"text-xs text-muted-foreground",children:"First Name"}),E==="firstName"?i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[i.jsx(zt,{value:b.firstName,onChange:Q=>I(ue=>({...ue,firstName:Q.target.value})),className:"h-8 text-sm flex-1",placeholder:"Enter first name",autoFocus:!0}),i.jsx(ee,{size:"sm",onClick:()=>Z("firstName"),disabled:A,className:"h-8 px-1.5",children:"✓"}),i.jsx(ee,{size:"sm",variant:"outline",onClick:le,className:"h-8 px-1.5",children:"✕"})]}):i.jsxs("div",{onClick:()=>Y("firstName"),className:"mt-1 p-2 rounded cursor-pointer hover:bg-muted/50 transition-colors",children:[i.jsx("span",{className:"text-[20px] font-semibold",children:T.firstName||"Click to add first name"}),!T.firstName&&i.jsx("span",{className:"text-muted-foreground text-sm ml-2",children:"✎"})]})]}),i.jsxs("div",{children:[i.jsx(rt,{className:"text-xs text-muted-foreground",children:"Last Name"}),E==="lastName"?i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[i.jsx(zt,{value:b.lastName,onChange:Q=>I(ue=>({...ue,lastName:Q.target.value})),className:"h-8 text-sm flex-1",placeholder:"Enter last name",autoFocus:!0}),i.jsx(ee,{size:"sm",onClick:()=>Z("lastName"),disabled:A,className:"h-8 px-1.5",children:"✓"}),i.jsx(ee,{size:"sm",variant:"outline",onClick:le,className:"h-8 px-1.5",children:"✕"})]}):i.jsxs("div",{onClick:()=>Y("lastName"),className:"mt-1 p-2 rounded cursor-pointer hover:bg-muted/50 transition-colors",children:[i.jsx("span",{className:"text-[20px] font-semibold",children:T.lastName||"Click to add last name"}),!T.lastName&&i.jsx("span",{className:"text-muted-foreground text-sm ml-2",children:"✎"})]})]})]}),i.jsxs("div",{children:[i.jsx(rt,{className:"text-xs text-muted-foreground",children:"Phone"}),E==="phone"?i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(zt,{value:ve(b.phone),onChange:Q=>ge(Q.target.value),className:"h-8 text-sm flex-1",placeholder:"(555) 123-4567",autoFocus:!0,maxLength:14}),i.jsx(ee,{size:"sm",onClick:()=>Z("phone"),disabled:A,className:"h-8 px-2",children:"✓"}),i.jsx(ee,{size:"sm",variant:"outline",onClick:le,className:"h-8 px-2",children:"✕"})]}):i.jsxs("div",{onClick:()=>Y("phone"),className:"mt-1 p-2 rounded cursor-pointer hover:bg-muted/50 transition-colors",children:[i.jsx("span",{className:"text-sm",children:ve(T.phone)||"Click to add phone number"}),!T.phone&&i.jsx("span",{className:"text-muted-foreground text-sm ml-2",children:"✎"})]})]})]}),i.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[i.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Account Management"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.userType!=="professional"&&i.jsxs(ee,{variant:"default",onClick:()=>window.location.href="/subscribe",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[i.jsx(ln,{className:"h-4 w-4 mr-2"}),e.userType==="free"?"Upgrade to Pro":"Upgrade to Professional"]}),e.userType!=="free"&&i.jsxs(ee,{variant:"outline",onClick:()=>window.location.href="/unsubscribe",children:[i.jsx(cc,{className:"h-4 w-4 mr-2"}),"Manage Subscription"]}),i.jsxs(ee,{variant:"outline",onClick:t,children:[i.jsx(lc,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]}),i.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[i.jsxs("h4",{className:"text-sm font-medium text-muted-foreground flex items-center",children:[i.jsx(pj,{className:"h-4 w-4 mr-2"}),"Need Help?"]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Send help requests to"," ",i.jsx("a",{href:"mailto:mazzu001@hotmail.com",className:"text-blue-600 hover:underline","data-testid":"link-help-email",children:"mazzu001@hotmail.com"})]})]})]})]})})]})]})]}):i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs(je,{className:"w-full max-w-md",children:[i.jsx(Oe,{children:i.jsx(Le,{children:"Please log in"})}),i.jsxs(Pe,{children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"You need to be logged in to access the dashboard."}),i.jsx(ee,{onClick:()=>window.location.href="/",children:"Go to Login"})]})]})})}function jR(){const[,e]=yt(),{isViewer:t,broadcastState:n,currentRoom:r,leaveBroadcast:s}=Ph(),[o,a]=m.useState(null),[l,c]=m.useState(!1);m.useEffect(()=>{const f=async d=>{try{c(!0),console.log(`🎵 Fetching song data for entry ID: ${d}`);const g=await fetch(`/api/broadcast/song/${d}`);if(!g.ok)throw new Error("Failed to fetch song data");const v=await g.json();a(v.song),console.log(`✅ Loaded song: ${v.song.songTitle} by ${v.song.artistName}`)}catch(g){console.error("❌ Failed to fetch song data:",g),a(null)}finally{c(!1)}};n!=null&&n.songEntryId?f(n.songEntryId):a(null)},[n==null?void 0:n.songEntryId]),m.useEffect(()=>{let f;return f=setTimeout(()=>{console.log("📺 Redirect check:",{isViewer:t,currentRoom:!!r}),!t&&!r&&(console.log("📺 No broadcast connection found, redirecting to dashboard"),e("/dashboard"))},5e3),()=>{f&&clearTimeout(f)}},[t,r,e]),m.useEffect(()=>{console.log("🖥️ BroadcastViewer state:",{isViewer:t,currentRoom:!!r,roomId:r==null?void 0:r.id,broadcastState:!!n,songEntryId:n==null?void 0:n.songEntryId,hasCurrentSongData:!!o,songTitle:o==null?void 0:o.songTitle,shouldShow:t||!!r})},[t,r,n,o]);const u=async()=>{await s(),e("/dashboard")};return!t&&!r?i.jsx("div",{className:"h-screen flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg",children:"Connecting to broadcast..."}),i.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mt-4"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"Establishing secure connection..."})]})}):i.jsxs("div",{className:"h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-slate-900 text-white flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center p-6 bg-black/20",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-400 animate-pulse"}),i.jsxs("span",{className:"text-lg font-medium",children:['📺 Viewing "',(r==null?void 0:r.name)||"Live Performance",'"']})]}),i.jsxs(ee,{onClick:u,variant:"outline",className:"bg-red-600/20 border-red-400 text-red-200 hover:bg-red-600/40",children:[i.jsx(lc,{className:"h-4 w-4 mr-2"}),"Leave Broadcast"]})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-white",children:(o==null?void 0:o.songTitle)||"No Song Selected"}),(o==null?void 0:o.artistName)&&i.jsxs("p",{className:"text-xl md:text-2xl text-blue-200 mb-6",children:["by ",o.artistName]}),l&&i.jsx("p",{className:"text-sm text-blue-300",children:"Loading song data..."}),i.jsxs("div",{className:"flex items-center justify-center space-x-6 text-lg text-blue-300",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${n!=null&&n.isPlaying?"bg-green-400":"bg-red-400"}`}),i.jsx("span",{children:n!=null&&n.isPlaying?"▶️ Playing":"⏸️ Paused"})]}),i.jsxs("div",{children:[Math.floor((n==null?void 0:n.position)||0),"s",(o==null?void 0:o.duration)&&` / ${Math.floor(o.duration)}s`]}),(o==null?void 0:o.duration)&&i.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${((n==null?void 0:n.position)||0)/o.duration*100}%`}})})]})]}),i.jsx("div",{className:"max-w-5xl w-full mb-8",children:i.jsxs("div",{className:"bg-black/30 backdrop-blur-sm rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-blue-200",children:"Audio Waveform"}),i.jsxs("div",{className:"text-sm text-blue-300",children:[Math.floor((n==null?void 0:n.position)||0),"s / ",Math.floor((o==null?void 0:o.duration)||0),"s"]})]}),i.jsxs("div",{className:"relative h-20 bg-gray-900/50 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 flex items-end justify-around px-1",children:Array.from({length:200},(f,d)=>{const g=Math.random()*60+10,v=o!=null&&o.duration&&(n!=null&&n.position)?d/200<=n.position/o.duration:!1;return i.jsx("div",{className:`w-0.5 transition-colors duration-300 ${v?"bg-blue-400":"bg-gray-600"}`,style:{height:`${g}%`}},d)})}),(o==null?void 0:o.duration)&&i.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white shadow-lg transition-all duration-300",style:{left:`${((n==null?void 0:n.position)||0)/o.duration*100}%`},children:i.jsx("div",{className:"absolute -top-1 -left-2 w-4 h-4 bg-white rounded-full shadow-lg"})})]})]})}),i.jsx("div",{className:"max-w-4xl w-full",children:o!=null&&o.lyrics||r?i.jsxs(i.Fragment,{children:[i.jsx("h2",{className:"text-2xl font-semibold mb-4 text-blue-200",children:"Lyrics"}),i.jsx("div",{className:"bg-black/30 backdrop-blur-sm rounded-2xl p-6 max-h-96 overflow-y-auto",children:i.jsx("pre",{className:"whitespace-pre-wrap text-lg leading-relaxed text-gray-100 font-mono",children:(o==null?void 0:o.lyrics)||"Waiting for lyrics from broadcaster..."})})]}):i.jsxs("div",{className:"bg-black/30 backdrop-blur-sm rounded-2xl p-12 text-center",children:[i.jsx("p",{className:"text-xl text-gray-300",children:o!=null&&o.songTitle?"No lyrics available for this song":"Waiting for broadcast data..."}),!n&&i.jsx("p",{className:"text-sm text-blue-400 mt-2",children:"Connecting to broadcast..."})]})})]}),i.jsx("div",{className:"p-4 text-center text-blue-300 text-sm bg-black/20",children:i.jsx("p",{children:"Real-time synchronized with broadcaster • StageTracker Pro"})})]})}function CR(){const[,e]=yt(),[t,n]=m.useState(!1),[r,s]=m.useState(null),[o,a]=m.useState(null),[l,c]=m.useState(null),[u,f]=m.useState(null),d=new URLSearchParams(window.location.search).get("id")||"Matt";m.useEffect(()=>{const w=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/broadcast/${d}`;console.log(`🎵 Simple viewer connecting to: ${w}`);const p=new WebSocket(w);return p.onopen=()=>{console.log("✅ Simple viewer connected"),n(!0),p.send(JSON.stringify({type:"viewer_connect",userId:"mnbtransport2024@gmail.com",userName:"Premium User"}))},p.onmessage=async x=>{const h=JSON.parse(x.data);if(console.log("📺 Simple viewer received:",h),console.log("📺 Message type:",h.type),h.state&&(console.log("📺 State details:",h.state),console.log("📺 songEntryId in state:",h.state.songEntryId)),h.type==="room_info")c(h.room),console.log("📺 Room info:",h.room);else if(h.type==="state_update"){const y=h.state;if(a(y),console.log("📺 State update:",y),y.songEntryId&&y.songEntryId!==(r==null?void 0:r.id)){console.log(`🎵 Fetching new song: ${y.songEntryId}`);try{const S=await fetch(`/api/broadcast/song/${y.songEntryId}`);if(S.ok){const j=await S.json();s(j.song),console.log(`✅ Loaded song: ${j.song.songTitle}`)}}catch(S){console.error("❌ Failed to fetch song:",S)}}}},p.onclose=()=>{console.log("❌ Simple viewer disconnected"),n(!1)},p.onerror=x=>{console.error("❌ Simple viewer WebSocket error:",x)},f(p),()=>{p.close()}},[d]);const g=()=>{u&&u.close(),e("/dashboard")};return!t||!l?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),i.jsx("p",{className:"text-white text-lg",children:"Connecting to broadcast..."}),i.jsx("p",{className:"text-gray-300 text-sm mt-2",children:"Establishing secure connection"})]})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 text-white",children:[i.jsxs("div",{className:"border-b border-white/20 p-4 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold",children:["Viewing: ",l.name]}),i.jsxs("p",{className:"text-gray-300",children:["Host: ",l.hostName," • ",l.participantCount," viewers"]})]}),i.jsxs(ee,{onClick:g,variant:"outline",className:"border-white/30 hover:bg-white/10",children:[i.jsx(lc,{className:"mr-2 h-4 w-4"}),"Leave Broadcast"]})]}),i.jsx("div",{className:"p-6",children:r?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-black/30 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[o!=null&&o.isPlaying?i.jsx(xs,{className:"h-8 w-8 text-green-400"}):i.jsx(xo,{className:"h-8 w-8 text-gray-400"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold",children:r.songTitle}),i.jsx("p",{className:"text-gray-300",children:r.artistName})]})]}),i.jsx("div",{className:"w-full bg-white/20 rounded-full h-2 mb-2",children:i.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${((o==null?void 0:o.waveformProgress)||0)*100}%`}})}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[i.jsxs("span",{children:[Math.floor((o==null?void 0:o.position)||0),"s"]}),i.jsx("span",{children:r.duration?Math.floor(r.duration)+"s":"--"})]})]}),r.lyrics&&i.jsxs("div",{className:"bg-black/20 rounded-lg p-6 flex-grow",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[i.jsx(jx,{className:"mr-2 h-5 w-5"}),"Lyrics"]}),i.jsx("div",{className:"h-96",children:i.jsx(j0,{song:{id:r.id,title:r.songTitle,lyrics:r.lyrics},currentTime:(o==null?void 0:o.position)||0,duration:r.duration||0,isPlaying:(o==null?void 0:o.isPlaying)||!1,allowMidi:!1})})]})]}):i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-xl text-gray-300",children:"Waiting for host to start playing..."})})})]})}var f1="basil",ER=function(t){return t===3?"v3":t},h1="https://js.stripe.com",_R="".concat(h1,"/").concat(f1,"/stripe.js"),TR=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,PR=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,cg="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",AR=function(t){return TR.test(t)||PR.test(t)},RR=function(){for(var t=document.querySelectorAll('script[src^="'.concat(h1,'"]')),n=0;n<t.length;n++){var r=t[n];if(AR(r.src))return r}return null},ug=function(t){var n="",r=document.createElement("script");r.src="".concat(_R).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},IR=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:n})},Qo=null,Ra=null,Ia=null,MR=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},DR=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},OR=function(t){return Qo!==null?Qo:(Qo=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&t&&console.warn(cg),window.Stripe){n(window.Stripe);return}try{var s=RR();if(s&&t)console.warn(cg);else if(!s)s=ug(t);else if(s&&Ia!==null&&Ra!==null){var o;s.removeEventListener("load",Ia),s.removeEventListener("error",Ra),(o=s.parentNode)===null||o===void 0||o.removeChild(s),s=ug(t)}Ia=DR(n,r),Ra=MR(r),s.addEventListener("load",Ia),s.addEventListener("error",Ra)}catch(a){r(a);return}}),Qo.catch(function(n){return Qo=null,Promise.reject(n)}))},LR=function(t,n,r){if(t===null)return null;var s=n[0],o=s.match(/^pk_test/),a=ER(t.version),l=f1;o&&a!==l&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=t.apply(void 0,n);return IR(c,r),c},Zo,m1=!1,p1=function(){return Zo||(Zo=OR(null).catch(function(t){return Zo=null,Promise.reject(t)}),Zo)};Promise.resolve().then(function(){return p1()}).catch(function(e){m1||console.warn(e)});var Zi=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];m1=!0;var s=Date.now();return p1().then(function(o){return LR(o,n,s)})};const dg=Object.freeze(Object.defineProperty({__proto__:null,loadStripe:Zi},Symbol.toStringTag,{value:"Module"}));var g1={exports:{}},FR="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$R=FR,zR=$R;function v1(){}function y1(){}y1.resetWarningCache=v1;var BR=function(){function e(r,s,o,a,l,c){if(c!==zR){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:y1,resetWarningCache:v1};return n.PropTypes=n,n};g1.exports=BR();var UR=g1.exports;const Qe=Ol(UR);function fg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function hg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fg(Object(n),!0).forEach(function(r){x1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fg(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ja(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ja=function(t){return typeof t}:Ja=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ja(e)}function x1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WR(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function VR(e,t){if(e==null)return{};var n=WR(e,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function w1(e,t){return HR(e)||KR(e,t)||GR(e,t)||YR()}function HR(e){if(Array.isArray(e))return e}function KR(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,o=!1,a,l;try{for(n=n.call(e);!(s=(a=n.next()).done)&&(r.push(a.value),!(t&&r.length===t));s=!0);}catch(c){o=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(o)throw l}}return r}}function GR(e,t){if(e){if(typeof e=="string")return mg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mg(e,t)}}function mg(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function YR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Kt=function(t,n,r){var s=!!r,o=Ne.useRef(r);Ne.useEffect(function(){o.current=r},[r]),Ne.useEffect(function(){if(!s||!t)return function(){};var a=function(){o.current&&o.current.apply(o,arguments)};return t.on(n,a),function(){t.off(n,a)}},[s,n,t,o])},$d=function(t){var n=Ne.useRef(t);return Ne.useEffect(function(){n.current=t},[t]),n.current},jo=function(t){return t!==null&&Ja(t)==="object"},qR=function(t){return jo(t)&&typeof t.then=="function"},XR=function(t){return jo(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},pg="[object Object]",QR=function e(t,n){if(!jo(t)||!jo(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var o=Object.prototype.toString.call(t)===pg,a=Object.prototype.toString.call(n)===pg;if(o!==a)return!1;if(!o&&!r)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},f=0;f<l.length;f+=1)u[l[f]]=!0;for(var d=0;d<c.length;d+=1)u[c[d]]=!0;var g=Object.keys(u);if(g.length!==l.length)return!1;var v=t,w=n,p=function(h){return e(v[h],w[h])};return g.every(p)},b1=function(t,n,r){return jo(t)?Object.keys(t).reduce(function(s,o){var a=!jo(n)||!QR(t[o],n[o]);return r.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),s):a?hg(hg({},s||{}),{},x1({},o,t[o])):s},null):null},S1="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",gg=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S1;if(t===null||XR(t))return t;throw new Error(n)},ZR=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S1;if(qR(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return gg(s,n)})};var r=gg(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},JR=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"3.9.2"}),t.registerAppInfo({name:"react-stripe-js",version:"3.9.2",url:"https://stripe.com/docs/stripe-js/react"}))},Nc=Ne.createContext(null);Nc.displayName="ElementsContext";var k1=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},Co=function(t){var n=t.stripe,r=t.options,s=t.children,o=Ne.useMemo(function(){return ZR(n)},[n]),a=Ne.useState(function(){return{stripe:o.tag==="sync"?o.stripe:null,elements:o.tag==="sync"?o.stripe.elements(r):null}}),l=w1(a,2),c=l[0],u=l[1];Ne.useEffect(function(){var g=!0,v=function(p){u(function(x){return x.stripe?x:{stripe:p,elements:p.elements(r)}})};return o.tag==="async"&&!c.stripe?o.stripePromise.then(function(w){w&&g&&v(w)}):o.tag==="sync"&&!c.stripe&&v(o.stripe),function(){g=!1}},[o,c,r]);var f=$d(n);Ne.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var d=$d(r);return Ne.useEffect(function(){if(c.elements){var g=b1(r,d,["clientSecret","fonts"]);g&&c.elements.update(g)}},[r,d,c.elements]),Ne.useEffect(function(){JR(c.stripe)},[c.stripe]),Ne.createElement(Nc.Provider,{value:c},s)};Co.propTypes={stripe:Qe.any,options:Qe.object};var eI=function(t){var n=Ne.useContext(Nc);return k1(n,t)},Oh=function(){var t=eI("calls useElements()"),n=t.elements;return n};Qe.func.isRequired;var N1=Ne.createContext(null);N1.displayName="CheckoutSdkContext";var tI=function(t,n){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return t},nI=Ne.createContext(null);nI.displayName="CheckoutContext";Qe.any,Qe.shape({fetchClientSecret:Qe.func.isRequired,elementsOptions:Qe.object}).isRequired;var zd=function(t){var n=Ne.useContext(N1),r=Ne.useContext(Nc);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n?tI(n,t):k1(r,t)},rI=["mode"],sI=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},it=function(t,n){var r="".concat(sI(t),"Element"),s=function(c){var u=c.id,f=c.className,d=c.options,g=d===void 0?{}:d,v=c.onBlur,w=c.onFocus,p=c.onReady,x=c.onChange,h=c.onEscape,y=c.onClick,S=c.onLoadError,j=c.onLoaderStart,N=c.onNetworksChange,C=c.onConfirm,P=c.onCancel,T=c.onShippingAddressChange,M=c.onShippingRateChange,A=zd("mounts <".concat(r,">")),R="elements"in A?A.elements:null,E="checkoutSdk"in A?A.checkoutSdk:null,O=Ne.useState(null),b=w1(O,2),I=b[0],$=b[1],U=Ne.useRef(null),z=Ne.useRef(null);Kt(I,"blur",v),Kt(I,"focus",w),Kt(I,"escape",h),Kt(I,"click",y),Kt(I,"loaderror",S),Kt(I,"loaderstart",j),Kt(I,"networkschange",N),Kt(I,"confirm",C),Kt(I,"cancel",P),Kt(I,"shippingaddresschange",T),Kt(I,"shippingratechange",M),Kt(I,"change",x);var _;p&&(t==="expressCheckout"?_=p:_=function(){p(I)}),Kt(I,"ready",_),Ne.useLayoutEffect(function(){if(U.current===null&&z.current!==null&&(R||E)){var D=null;if(E)switch(t){case"payment":D=E.createPaymentElement(g);break;case"address":if("mode"in g){var B=g.mode,X=VR(g,rI);if(B==="shipping")D=E.createShippingAddressElement(X);else if(B==="billing")D=E.createBillingAddressElement(X);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":D=E.createExpressCheckoutElement(g);break;case"currencySelector":D=E.createCurrencySelectorElement();break;case"taxId":D=E.createTaxIdElement(g);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else R&&(D=R.create(t,g));U.current=D,$(D),D&&D.mount(z.current)}},[R,E,g]);var W=$d(g);return Ne.useEffect(function(){if(U.current){var D=b1(g,W,["paymentRequest"]);D&&"update"in U.current&&U.current.update(D)}},[g,W]),Ne.useLayoutEffect(function(){return function(){if(U.current&&typeof U.current.destroy=="function")try{U.current.destroy(),U.current=null}catch{}}},[]),Ne.createElement("div",{id:u,className:f,ref:z})},o=function(c){zd("mounts <".concat(r,">"));var u=c.id,f=c.className;return Ne.createElement("div",{id:u,className:f})},a=n?o:s;return a.propTypes={id:Qe.string,className:Qe.string,onChange:Qe.func,onBlur:Qe.func,onFocus:Qe.func,onReady:Qe.func,onEscape:Qe.func,onClick:Qe.func,onLoadError:Qe.func,onLoaderStart:Qe.func,onNetworksChange:Qe.func,onConfirm:Qe.func,onCancel:Qe.func,onShippingAddressChange:Qe.func,onShippingRateChange:Qe.func,options:Qe.object},a.displayName=r,a.__elementType=t,a},at=typeof window>"u",oI=Ne.createContext(null);oI.displayName="EmbeddedCheckoutProviderContext";var Lh=function(){var t=zd("calls useStripe()"),n=t.stripe;return n};it("auBankAccount",at);it("card",at);it("cardNumber",at);it("cardExpiry",at);it("cardCvc",at);it("fpxBank",at);it("iban",at);it("idealBank",at);it("p24Bank",at);it("epsBank",at);var jc=it("payment",at);it("expressCheckout",at);it("currencySelector",at);it("paymentRequestButton",at);it("linkAuthentication",at);it("address",at);it("shippingAddress",at);it("paymentMethodMessaging",at);it("affirmMessage",at);it("afterpayClearpayMessage",at);it("taxId",at);const iI=async()=>{try{return await Zi("sk_live_Q2xRjTXdlvbiGPVngBL88HJT004LSEAWwY")}catch(e){return console.error("❌ Failed to initialize Stripe:",e),null}},aI=[{id:"premium",name:"Premium",price:"$4.99",priceId:"price_1RygaOK3Nj4A0Az4jtovDojK",features:["Unlimited songs","Advanced lyrics with timestamps","Waveform visualization","Fullscreen performance mode"],icon:ln,popular:!0},{id:"professional",name:"Professional",price:"$6.99",priceId:"price_1S6geUK3Nj4A0Az4kYc5HopM",features:["All Premium features","Advanced audio control (Coming Soon)","Wireless audio connectivity (Coming Soon)","Advanced performance tools (Coming Soon)","Professional stage features (Coming Soon)","Priority support"],icon:wo}],lI=({plan:e,clientSecret:t})=>{const n=Lh(),r=Oh(),{toast:s}=Mt(),[o,a]=m.useState(!1),[,l]=yt();console.log("🔧 CheckoutForm render - stripe available:",!!n,"elements available:",!!r);const c=async u=>{if(u.preventDefault(),!(!n||!r)){a(!0),console.log("🔄 Processing payment for plan:",e.name);try{const{error:f,paymentIntent:d}=await n.confirmPayment({elements:r,redirect:"if_required"});if(f)console.error("❌ Payment failed:",f.message),s({title:"Payment Failed",description:f.message,variant:"destructive"});else if((d==null?void 0:d.status)==="succeeded"){console.log("✅ Payment succeeded");const g=localStorage.getItem("lpp_local_user");if(g){const v=JSON.parse(g);v.userType=e.id==="premium"?"paid":"professional",v.hasActiveSubscription=!0,v.subscriptionTier=e.id,localStorage.setItem("lpp_local_user",JSON.stringify(v)),window.dispatchEvent(new Event("auth-change"))}s({title:`Welcome to ${e.name}!`,description:`Your ${e.name} subscription is now active!`}),setTimeout(()=>{l("/")},2e3)}}catch(f){console.error("❌ Payment error:",f),s({title:"Payment Error",description:"Something went wrong. Please try again.",variant:"destructive"})}a(!1)}};return i.jsxs("form",{onSubmit:c,className:"space-y-6",children:[i.jsx(jc,{}),i.jsx(ee,{type:"submit",disabled:!n||o,className:"w-full","data-testid":`button-pay-${e.id}`,children:o?"Processing...":`Pay ${e.price}/month`})]})},cI=({plan:e,onBack:t})=>{const[n,r]=m.useState(""),[s,o]=m.useState(!0),[a,l]=m.useState(null),{toast:c}=Mt();return m.useEffect(()=>{(async()=>{try{console.log("🔄 Initializing Stripe instance...");const f=await iI();if(f)console.log("✅ Stripe initialized successfully"),l(f);else throw new Error("Failed to initialize Stripe")}catch(f){console.error("❌ Stripe initialization error:",f),c({title:"Payment System Error",description:"Failed to initialize payment system",variant:"destructive"}),t()}})()},[c,t]),Ne.useEffect(()=>{(async()=>{try{console.log("🔄 PaymentPage useEffect - Creating subscription for plan:",e.id);const f=localStorage.getItem("lpp_local_user");if(!f){console.error("❌ No stored user found"),c({title:"Authentication Required",description:"Please sign in to subscribe.",variant:"destructive"}),t();return}const d=JSON.parse(f);console.log("🔄 Creating subscription for:",d.email);const g=await fetch("/api/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.email,planName:e.id,priceId:e.priceId})}),v=await g.json();if(console.log("📊 Subscription API response:",{ok:g.ok,status:g.status,data:v}),!g.ok)throw new Error(v.message||"Failed to create subscription");if(!v.clientSecret)throw console.error("❌ No clientSecret in response:",v),new Error("No client secret returned from server");console.log("✅ Subscription created successfully, setting clientSecret"),r(v.clientSecret)}catch(f){console.error("❌ Subscription creation failed:",f),console.error("Error stack:",f.stack),c({title:"Subscription Error",description:f.message||"Failed to start subscription process",variant:"destructive"}),t()}finally{o(!1)}})()},[e.id,e.priceId,c,t]),s?i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsx(je,{children:i.jsx(Pe,{className:"pt-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Setting up your subscription..."})]})})})}):n?(console.log("🔧 PaymentPage render - clientSecret available:",!!n),i.jsxs("div",{className:"max-w-md mx-auto p-6",children:[i.jsx("div",{className:"mb-6",children:i.jsxs(ee,{variant:"ghost",onClick:t,"data-testid":"button-back-to-plans",children:[i.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Plans"]})}),i.jsxs(je,{children:[i.jsxs(Oe,{className:"text-center",children:[i.jsx("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mb-4",children:i.jsx(e.icon,{className:"w-8 h-8 text-white"})}),i.jsxs(Le,{children:["Subscribe to ",e.name]}),i.jsxs("p",{className:"text-gray-600",children:[e.price,"/month"]})]}),i.jsx(Pe,{children:a?i.jsx(Co,{stripe:a,options:{clientSecret:n,appearance:{theme:"stripe"}},children:i.jsx(lI,{plan:e,clientSecret:n})}):i.jsxs("div",{className:"text-center p-4",children:[i.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Initializing payment system..."})]})})]})]})):i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsx(je,{children:i.jsx(Pe,{className:"pt-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-red-600 mb-4",children:"Failed to initialize payment"}),i.jsxs(ee,{onClick:t,variant:"outline",children:[i.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Plans"]})]})})})})};function uI(){const[e,t]=m.useState(null),[,n]=yt();return e?i.jsx(cI,{plan:e,onBack:()=>t(null)}):i.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Choose Your Plan"}),i.jsx("p",{className:"text-gray-600",children:"Upgrade to unlock unlimited songs and advanced features"})]}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:aI.map(r=>{const s=r.icon;return i.jsxs(je,{className:`relative cursor-pointer transition-all hover:shadow-lg ${r.popular?"ring-2 ring-yellow-400":""}`,onClick:()=>t(r),"data-testid":`card-plan-${r.id}`,children:[r.popular&&i.jsx(Bt,{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black",children:"Most Popular"}),i.jsxs(Oe,{className:"text-center pb-4",children:[i.jsx("div",{className:"mx-auto w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mb-3",children:i.jsx(s,{className:"w-6 h-6 text-white"})}),i.jsx(Le,{className:"text-xl",children:r.name}),i.jsxs("div",{className:"text-2xl font-bold text-primary",children:[r.price,i.jsx("span",{className:"text-sm text-gray-500",children:"/month"})]})]}),i.jsxs(Pe,{children:[i.jsx("ul",{className:"space-y-2 mb-6",children:r.features.map((o,a)=>i.jsxs("li",{className:"flex items-center text-sm",children:[i.jsx(Ar,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),o]},a))}),i.jsxs(ee,{className:"w-full",variant:r.popular?"default":"outline","data-testid":`button-select-${r.id}`,children:["Select ",r.name]})]})]},r.id)})}),i.jsx("div",{className:"text-center mt-8",children:i.jsx(ee,{variant:"ghost",onClick:()=>n("/"),"data-testid":"button-back-home",children:"Back to Home"})})]})}const dI=[{id:"premium",name:"Premium",price:"$4.99",features:["Unlimited songs","Advanced lyrics with timestamps","Waveform visualization","Fullscreen performance mode"],icon:ln},{id:"professional",name:"Professional",price:"$6.99",features:["All Premium features","Advanced MIDI device control","Multiple simultaneous MIDI device connections","Broadcast performance to unlimited users to share screens during performance","Embedded time stamped MIDI commands with to-the-second accuracy","Priority support"],icon:wo,popular:!0}];function fI(){const[,e]=yt(),{toast:t}=Mt(),[n,r]=m.useState(null),s=async o=>{r(o.id),console.log(`🔄 Starting subscription process for plan: ${o.id}`);try{const a=localStorage.getItem("lpp_local_user");if(!a){t({title:"Authentication Required",description:"Please sign in to subscribe.",variant:"destructive"}),e("/");return}const l=JSON.parse(a);console.log(`📧 Creating checkout for email: ${l.email}`);const c={email:l.email,tier:o.id,priceAmount:o.id==="premium"?499:699,successUrl:`${window.location.origin}/`,cancelUrl:`${window.location.origin}/subscribe`};console.log("📤 Sending checkout request:",c);const u=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});console.log("📥 Checkout response status:",u.status);const f=await u.json();if(console.log("📋 Checkout response data:",f),u.ok&&f.url)console.log("✅ Opening Stripe Checkout in new tab:",f.url),window.open(f.url,"_blank"),t({title:"Payment Window Opened",description:"Complete your payment in the new tab, then return here."});else throw new Error(f.message||"Failed to create checkout session")}catch(a){console.error("Subscription error:",a),t({title:"Subscription Error",description:a.message||"Failed to start subscription process",variant:"destructive"})}finally{r(null)}};return i.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Choose Your Plan"}),i.jsx("p",{className:"text-gray-600",children:"Upgrade to unlock unlimited songs and advanced features"})]}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:dI.map(o=>{const a=o.icon,l=n===o.id;return i.jsxs(je,{className:`relative transition-all hover:shadow-lg ${o.popular?"ring-2 ring-yellow-400":""} ${l?"opacity-75":""}`,children:[o.popular&&i.jsx(Bt,{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black",children:"Most Popular"}),i.jsxs(Oe,{className:"text-center pb-4",children:[i.jsx("div",{className:"mx-auto w-12 h-12 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mb-3",children:i.jsx(a,{className:"w-6 h-6 text-white"})}),i.jsx(Le,{className:"text-xl",children:o.name}),i.jsxs("div",{className:"text-2xl font-bold text-primary",children:[o.price,i.jsx("span",{className:"text-sm text-gray-500",children:"/month"})]})]}),i.jsxs(Pe,{children:[i.jsx("ul",{className:"space-y-2 mb-6",children:o.features.map((c,u)=>i.jsxs("li",{className:"flex items-center text-sm",children:[i.jsx(Ar,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),c]},u))}),i.jsx(ee,{onClick:()=>s(o),className:"w-full",variant:o.popular?"default":"outline",disabled:l,"data-testid":`button-subscribe-${o.id}`,children:l?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Processing..."]}):`Subscribe to ${o.name}`})]})]},o.id)})}),i.jsx("div",{className:"text-center mt-8",children:i.jsxs(ee,{variant:"ghost",onClick:()=>e("/"),"data-testid":"button-back-home",children:[i.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),i.jsxs("div",{className:"text-center mt-6 text-sm text-gray-500",children:[i.jsx("p",{children:"Secure payment powered by Stripe"}),i.jsx("p",{children:"Cancel anytime from your account settings"})]})]})}let Nu=null;const hI=()=>(Nu||(Nu=Zi("sk_live_Q2xRjTXdlvbiGPVngBL88HJT004LSEAWwY")),Nu);function mI(){const e=Lh(),t=Oh(),{toast:n}=Mt(),[,r]=yt(),[s,o]=m.useState(!1),a=async l=>{if(l.preventDefault(),!(!e||!t)){o(!0);try{const{error:c}=await e.confirmPayment({elements:t,redirect:"if_required"});if(c)n({title:"Payment Failed",description:c.message,variant:"destructive"});else{const u=localStorage.getItem("lpp_local_user");if(u){const f=JSON.parse(u);f.userType="paid",f.hasActiveSubscription=!0,f.subscriptionTier="premium",localStorage.setItem("lpp_local_user",JSON.stringify(f)),window.dispatchEvent(new Event("auth-change"))}n({title:"Success!",description:"Welcome to Premium!"}),setTimeout(()=>r("/"),1500)}}catch{n({title:"Error",description:"Payment failed",variant:"destructive"})}o(!1)}};return i.jsxs("form",{onSubmit:a,className:"space-y-4",children:[i.jsx(jc,{options:{layout:"tabs"}}),i.jsx(ee,{type:"submit",disabled:!e||s,className:"w-full",children:s?"Processing...":"Subscribe for $4.99/month"})]})}function pI(){const[e,t]=m.useState(""),[n,r]=m.useState(!0),{toast:s}=Mt(),[,o]=yt();if(m.useEffect(()=>{let l=!0;return(async()=>{try{const u=localStorage.getItem("lpp_local_user");if(!u){o("/");return}const f=JSON.parse(u),d=await fetch("/api/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f.email,tier:"premium",priceId:"price_premium_placeholder"})});if(!l)return;const g=await d.json();if(d.ok&&g.clientSecret)t(g.clientSecret);else throw new Error("Failed to create payment intent")}catch{if(!l)return;s({title:"Error",description:"Failed to initialize payment",variant:"destructive"}),o("/")}finally{l&&r(!1)}})(),()=>{l=!1}},[s,o]),n)return i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsx(je,{children:i.jsxs(Pe,{className:"pt-6 text-center",children:[i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),i.jsx("p",{children:"Setting up payment..."})]})})});if(!e)return i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsx(je,{children:i.jsxs(Pe,{className:"pt-6 text-center",children:[i.jsx("p",{children:"Unable to initialize payment"}),i.jsx(ee,{onClick:()=>o("/"),className:"mt-4",children:"Back to Home"})]})})});const a={clientSecret:e,appearance:{theme:"stripe"}};return i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsxs(je,{children:[i.jsxs(Oe,{className:"text-center",children:[i.jsx(Le,{children:"Subscribe to Premium"}),i.jsx("p",{className:"text-gray-600",children:"$4.99/month - Unlimited songs"})]}),i.jsx(Pe,{children:i.jsx(Co,{stripe:hI(),options:a,children:i.jsx(mI,{})})})]})})}const gI=Zi("sk_live_Q2xRjTXdlvbiGPVngBL88HJT004LSEAWwY");function vI(){const e=Lh(),t=Oh(),{toast:n}=Mt(),[,r]=yt(),[s,o]=m.useState(!1),a=async l=>{if(l.preventDefault(),!(!e||!t)){o(!0);try{const{error:c}=await e.confirmPayment({elements:t,redirect:"if_required"});c?n({title:"Payment Failed",description:c.message,variant:"destructive"}):(n({title:"Success!",description:"Payment completed successfully"}),r("/"))}catch{n({title:"Error",description:"Something went wrong",variant:"destructive"})}o(!1)}};return i.jsxs("form",{onSubmit:a,children:[i.jsx(jc,{}),i.jsx(ee,{type:"submit",disabled:!e||s,className:"w-full mt-4",children:s?"Processing...":"Pay $4.99/month"})]})}function yI(){const[e,t]=m.useState(""),[n,r]=m.useState(!0),{toast:s}=Mt(),[,o]=yt();return m.useEffect(()=>{async function a(){try{const l=localStorage.getItem("lpp_local_user");if(!l){o("/");return}const c=JSON.parse(l),u=await fetch("/api/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.email,tier:"premium",priceId:"price_premium_placeholder"})}),f=await u.json();if(u.ok&&f.clientSecret)t(f.clientSecret);else throw new Error("Failed to create payment intent")}catch{s({title:"Error",description:"Failed to initialize payment",variant:"destructive"}),o("/")}finally{r(!1)}}a()},[s,o]),n?i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsx(je,{children:i.jsxs(Pe,{className:"pt-6 text-center",children:[i.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),i.jsx("p",{children:"Loading..."})]})})}):e?i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsxs(je,{children:[i.jsxs(Oe,{children:[i.jsx(Le,{children:"Subscribe to Premium"}),i.jsx("p",{className:"text-gray-600",children:"$4.99/month"})]}),i.jsx(Pe,{children:i.jsx(Co,{stripe:gI,options:{clientSecret:e},children:i.jsx(vI,{})})})]})}):i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsx(je,{children:i.jsxs(Pe,{className:"pt-6 text-center",children:[i.jsx("p",{children:"Failed to initialize payment"}),i.jsx(ee,{onClick:()=>o("/"),className:"mt-4",children:"Back to Home"})]})})})}function xI(){const[,e]=yt(),{toast:t}=Mt(),[n,r]=m.useState({});m.useEffect(()=>{const a={stripePublicKey:"EXISTS",stripeKeyStart:"sk_live_Q2xRjTXdlvbiGPVngBL88HJT004LSEAWwY".substring(0,7)||"N/A",nodeEnv:"production",userAgent:navigator.userAgent,location:window.location.href};r(a),console.log("🔍 Debug Info:",a)},[]);const s=async()=>{try{console.log("🔄 Testing Stripe load without using it...");const a="sk_live_Q2xRjTXdlvbiGPVngBL88HJT004LSEAWwY";console.log("Key exists:",!!a),console.log("Key starts with pk_:",a==null?void 0:a.startsWith("pk_"));const{loadStripe:l}=await Od(async()=>{const{loadStripe:c}=await Promise.resolve().then(()=>dg);return{loadStripe:c}},void 0);console.log("loadStripe imported successfully"),t({title:"Test Success",description:"Stripe imports work correctly"})}catch(a){console.error("❌ Stripe load test error:",a),t({title:"Test Failed",description:a.message,variant:"destructive"})}},o=async()=>{try{console.log("🔄 Testing actual Stripe initialization...");const{loadStripe:a}=await Od(async()=>{const{loadStripe:c}=await Promise.resolve().then(()=>dg);return{loadStripe:c}},void 0),l=await a("sk_live_Q2xRjTXdlvbiGPVngBL88HJT004LSEAWwY");console.log("Stripe instance:",l),t({title:"Stripe Load Success",description:"Stripe loaded without error"})}catch(a){console.error("❌ Actual Stripe load error:",a),t({title:"Stripe Load Failed",description:a.message,variant:"destructive"})}};return i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsxs(je,{children:[i.jsxs(Oe,{children:[i.jsx(Le,{children:"Stripe Debug Page"}),i.jsx("p",{className:"text-gray-600",children:"Test Stripe loading step by step"})]}),i.jsxs(Pe,{className:"space-y-4",children:[i.jsx("div",{className:"text-xs bg-gray-100 p-3 rounded",children:i.jsx("pre",{children:JSON.stringify(n,null,2)})}),i.jsx(ee,{onClick:s,className:"w-full",children:"Test Stripe Import"}),i.jsx(ee,{onClick:o,className:"w-full",variant:"outline",children:"Test Stripe Load"}),i.jsx(ee,{onClick:()=>e("/"),variant:"ghost",className:"w-full",children:"Back to Home"})]})]})})}const vg=Zi("sk_live_Q2xRjTXdlvbiGPVngBL88HJT004LSEAWwY");function wI(){return i.jsx("div",{children:"Elements component loaded successfully!"})}function bI(){return console.log("🔄 PaymentElement about to render..."),i.jsxs("div",{children:[i.jsx("p",{children:"Testing PaymentElement:"}),i.jsx(jc,{})]})}function SI(){const[,e]=yt(),{toast:t}=Mt(),[n,r]=m.useState(""),[s,o]=m.useState(!1),[a,l]=m.useState(!1),c=async()=>{try{console.log("🔄 Creating client secret for Elements test...");const d=localStorage.getItem("lpp_local_user");if(!d){t({title:"Error",description:"No user found",variant:"destructive"});return}const g=JSON.parse(d),v=await fetch("/api/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:g.email,tier:"premium",priceId:"price_premium_placeholder"})}),w=await v.json();if(v.ok&&w.clientSecret)console.log("✅ Client secret created:",w.clientSecret.substring(0,20)+"..."),r(w.clientSecret),t({title:"Success",description:"Client secret created"});else throw new Error("Failed to create client secret")}catch(d){console.error("❌ Client secret creation error:",d),t({title:"Error",description:d.message,variant:"destructive"})}},u=()=>{if(console.log("🔄 Testing Elements component render..."),!n){t({title:"Error",description:"Need client secret first",variant:"destructive"});return}console.log("🔄 About to render Elements component..."),o(!0),console.log("✅ Elements component render triggered")},f=()=>{if(console.log("🔄 Testing PaymentElement component render..."),!s||!n){t({title:"Error",description:"Need Elements component first",variant:"destructive"});return}console.log("🔄 About to render PaymentElement..."),l(!0),console.log("✅ PaymentElement render triggered")};return i.jsx("div",{className:"max-w-md mx-auto p-6",children:i.jsxs(je,{children:[i.jsxs(Oe,{children:[i.jsx(Le,{children:"Elements Component Test"}),i.jsx("p",{className:"text-gray-600",children:"Test Stripe Elements step by step"})]}),i.jsxs(Pe,{className:"space-y-4",children:[i.jsx(ee,{onClick:c,className:"w-full",children:"Step 1: Create Client Secret"}),n&&i.jsxs("div",{className:"text-xs bg-green-100 p-2 rounded",children:["✅ Client Secret: ",n.substring(0,20),"..."]}),i.jsx(ee,{onClick:u,className:"w-full",disabled:!n,children:"Step 2: Render Elements Component"}),s&&n&&i.jsxs("div",{className:"border p-4 rounded",children:[i.jsx("p",{className:"mb-2",children:"✅ Elements component working:"}),i.jsx(Co,{stripe:vg,options:{clientSecret:n},children:i.jsx(wI,{})})]}),i.jsx(ee,{onClick:f,className:"w-full",disabled:!s,children:"Step 3: Render PaymentElement"}),a&&s&&n&&i.jsxs("div",{className:"border p-4 rounded border-red-200",children:[i.jsx("p",{className:"mb-2",children:"Testing PaymentElement (this might cause the error):"}),i.jsx(Co,{stripe:vg,options:{clientSecret:n},children:i.jsx(bI,{})})]}),i.jsx(ee,{onClick:()=>e("/"),variant:"ghost",className:"w-full",children:"Back to Home"})]})]})})}function kI(){const[,e]=yt(),{toast:t}=Mt(),n=async()=>{try{console.log("🔄 Testing subscription creation...");const r=localStorage.getItem("lpp_local_user");if(!r){console.error("❌ No stored user found");return}const s=JSON.parse(r);console.log("📧 User email:",s.email);const o=await fetch("/api/create-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,tier:"premium",priceId:"price_premium_placeholder"})}),a=await o.json();console.log("📊 API Response:",a),o.ok&&a.clientSecret?(console.log("✅ Client secret received successfully"),t({title:"Test Successful",description:"Subscription API is working correctly"})):(console.error("❌ API Error:",a),t({title:"Test Failed",description:a.message||"API call failed",variant:"destructive"}))}catch(r){console.error("❌ Test error:",r),t({title:"Test Error",description:r.message,variant:"destructive"})}};return i.jsxs("div",{className:"max-w-md mx-auto p-6",children:[i.jsx("div",{className:"mb-6",children:i.jsxs(ee,{variant:"ghost",onClick:()=>e("/"),"data-testid":"button-back-home",children:[i.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),i.jsxs(je,{children:[i.jsxs(Oe,{className:"text-center",children:[i.jsx(Le,{children:"Subscription Test Page"}),i.jsx("p",{className:"text-gray-600",children:"Test subscription API without Stripe Elements"})]}),i.jsxs(Pe,{className:"space-y-4",children:[i.jsx(ee,{onClick:n,className:"w-full","data-testid":"button-test-subscription",children:"Test Subscription API"}),i.jsx("div",{className:"text-sm text-gray-600",children:"This page tests the subscription creation without loading Stripe Elements to isolate any errors."})]})]})]})}function NI(){hr();const[,e]=yt(),t=n=>{e("/subscribe")};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-slate-900 to-gray-900 py-12 px-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("h1",{className:"text-5xl font-bold text-white mb-6",children:"Elevate Your Live Performance"}),i.jsx("p",{className:"text-xl text-gray-300 max-w-4xl mx-auto leading-relaxed",children:"Choose the perfect StageTracker Pro plan to transform your live shows with professional-grade audio management, real-time monitoring, and cutting-edge performance technology."}),i.jsx("div",{className:"mt-8 flex justify-center",children:i.jsx(Bt,{variant:"outline",className:"text-lg px-6 py-2 bg-slate-800/50 border-slate-600 text-gray-300",children:"Trusted by professional musicians worldwide"})})]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 mb-16",children:[i.jsxs(je,{className:"border border-slate-700 relative bg-slate-800/90 backdrop-blur-sm",children:[i.jsxs(Oe,{className:"text-center pb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-700 to-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(wo,{className:"w-8 h-8 text-gray-400"})}),i.jsx(Le,{className:"text-3xl font-bold text-white",children:"Free"}),i.jsx(Rr,{className:"text-lg text-gray-400",children:"Perfect for getting started"}),i.jsxs("div",{className:"text-5xl font-bold text-white mt-6",children:["$0",i.jsx("span",{className:"text-xl font-normal text-gray-400",children:"/month"})]}),i.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"No credit card required"})]}),i.jsx(Pe,{className:"space-y-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ar,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Up to 2 songs"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Test the waters with limited library"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ar,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Essential audio playback"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Core transport controls and timing"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ar,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Basic VU meters"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Audio level monitoring on songs list only"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ar,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Standard waveform"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Simple audio visualization"})]})]})]})}),i.jsx(Xa,{className:"pt-6",children:i.jsxs(ee,{className:"w-full h-12 text-lg",variant:"outline",disabled:!0,children:[i.jsx(wo,{className:"w-4 h-4 mr-2"}),"Current Plan"]})})]}),i.jsxs(je,{className:"border-2 border-blue-500 relative shadow-2xl scale-105 bg-slate-800/95",children:[i.jsx(Bt,{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-2 text-sm font-semibold",children:"⭐ Most Popular Choice"}),i.jsxs(Oe,{className:"text-center pb-8 bg-gradient-to-br from-blue-900/30 to-indigo-900/30 rounded-t-lg",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-800 to-blue-900 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ln,{className:"w-8 h-8 text-blue-400"})}),i.jsx(Le,{className:"text-3xl font-bold text-white",children:"Premium"}),i.jsx(Rr,{className:"text-lg text-gray-300",children:"For serious performers"}),i.jsxs("div",{className:"text-5xl font-bold text-white mt-6",children:["$4.99",i.jsx("span",{className:"text-xl font-normal text-gray-400",children:"/month"})]}),i.jsx("p",{className:"text-sm text-green-400 mt-2 font-medium",children:"Best value for professionals"})]}),i.jsxs(Pe,{className:"space-y-6",children:[i.jsx("div",{className:"bg-blue-900/30 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-sm font-semibold text-blue-200 mb-2",children:"🎯 Everything in Free, plus premium features:"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx(Vn,{className:"w-5 h-5 text-blue-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Unlimited songs"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Build your complete performance library"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(yp,{className:"w-5 h-5 text-blue-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Full VU meters everywhere"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Complete audio monitoring across all interfaces"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(hp,{className:"w-5 h-5 text-blue-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Advanced waveform visualization"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Professional-grade audio analysis and display"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(ac,{className:"w-5 h-5 text-blue-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Complete audio engine"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Full mixing capabilities and real-time processing"})]})]})]})]}),i.jsx(Xa,{className:"pt-6",children:i.jsxs(ee,{className:"w-full h-12 text-lg bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-lg",onClick:()=>t(),children:[i.jsx(ln,{className:"w-5 h-5 mr-2"}),"Upgrade to Premium"]})})]}),i.jsxs(je,{className:"border border-purple-500 relative bg-slate-800/90 backdrop-blur-sm",children:[i.jsxs(Oe,{className:"text-center pb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-800 to-purple-900 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(On,{className:"w-8 h-8 text-purple-400"})}),i.jsx(Le,{className:"text-3xl font-bold text-white",children:"Professional"}),i.jsx(Rr,{className:"text-lg text-gray-400",children:"For touring professionals"}),i.jsxs("div",{className:"text-5xl font-bold text-white mt-6",children:["$6.99",i.jsx("span",{className:"text-xl font-normal text-gray-400",children:"/month"})]}),i.jsx("p",{className:"text-sm text-purple-400 mt-2 font-medium",children:"Ultimate performance suite"})]}),i.jsxs(Pe,{className:"space-y-6",children:[i.jsx("div",{className:"bg-purple-900/30 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-sm font-semibold text-purple-200 mb-2",children:"🚀 Everything in Premium, plus professional tools:"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-purple-500 to-pink-500 rounded mr-3 flex-shrink-0 mt-0.5 flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs font-bold",children:"M"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Professional audio controls"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Enhanced audio mixing and control features"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(mp,{className:"w-5 h-5 text-purple-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Cloud backup & sync"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Automatic backup of all songs, settings, and data"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(jj,{className:"w-5 h-5 text-purple-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Priority support"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Direct access to our technical team"})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(hp,{className:"w-5 h-5 text-purple-500 mr-3 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium",children:"Performance analytics"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Advanced insights and performance metrics"})]})]})]})]}),i.jsx(Xa,{className:"pt-6",children:i.jsxs(ee,{className:"w-full h-12 text-lg bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 shadow-lg",onClick:()=>t(),children:[i.jsx(On,{className:"w-5 h-5 mr-2"}),"Go Professional"]})})]})]}),i.jsxs("div",{className:"bg-slate-800/90 rounded-2xl shadow-xl p-12 mb-16 border border-slate-700",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Why StageTracker Pro?"}),i.jsx("p",{className:"text-lg text-gray-300",children:"Built by musicians, for musicians - delivering professional results every performance"})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Vn,{className:"w-8 h-8 text-blue-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Stage-Ready Reliability"}),i.jsx("p",{className:"text-gray-300",children:"Built for live performance with zero-latency audio processing and rock-solid stability."})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(yp,{className:"w-8 h-8 text-green-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Real-Time Monitoring"}),i.jsx("p",{className:"text-gray-300",children:"Professional VU meters and audio analysis keep you in perfect control of your mix."})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-900 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(mp,{className:"w-8 h-8 text-purple-400"})}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Future-Proof Technology"}),i.jsx("p",{className:"text-gray-300",children:"Regular updates and new features ensure you're always ahead of the curve."})]})]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Ready to transform your live performances?"}),i.jsx("p",{className:"text-lg text-gray-300 mb-8 max-w-2xl mx-auto",children:"Join thousands of professional musicians who trust StageTracker Pro for their most important shows."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(ee,{size:"lg",className:"bg-blue-600 hover:bg-blue-700 text-lg px-8 py-4",onClick:()=>t(),children:[i.jsx(ln,{className:"w-5 h-5 mr-2"}),"Start Your Premium Journey"]}),i.jsx("div",{className:"flex justify-center",children:i.jsx(ee,{variant:"ghost",onClick:()=>e("/"),className:"text-gray-400 hover:text-white",children:"← Back to Performance"})})]})]})]})})}function or(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Bd(e){const t=jI(e),n=m.forwardRef((r,s)=>{const{children:o,...a}=r,l=m.Children.toArray(o),c=l.find(EI);if(c){const u=c.props.children,f=l.map(d=>d===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:d);return i.jsx(t,{...a,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,f):null})}return i.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}function jI(e){const t=m.forwardRef((n,r)=>{const{children:s,...o}=n;if(m.isValidElement(s)){const a=TI(s),l=_I(o,s.props);return s.type!==m.Fragment&&(l.ref=r?Gi(r,a):a),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var CI=Symbol("radix.slottable");function EI(e){return m.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===CI}function _I(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function TI(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function PI(e){const t=e+"CollectionProvider",[n,r]=Ct(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=p=>{const{scope:x,children:h}=p,y=Ne.useRef(null),S=Ne.useRef(new Map).current;return i.jsx(s,{scope:x,itemMap:S,collectionRef:y,children:h})};a.displayName=t;const l=e+"CollectionSlot",c=Bd(l),u=Ne.forwardRef((p,x)=>{const{scope:h,children:y}=p,S=o(l,h),j=Re(x,S.collectionRef);return i.jsx(c,{ref:j,children:y})});u.displayName=l;const f=e+"CollectionItemSlot",d="data-radix-collection-item",g=Bd(f),v=Ne.forwardRef((p,x)=>{const{scope:h,children:y,...S}=p,j=Ne.useRef(null),N=Re(x,j),C=o(f,h);return Ne.useEffect(()=>(C.itemMap.set(j,{ref:j,...S}),()=>void C.itemMap.delete(j))),i.jsx(g,{[d]:"",ref:N,children:y})});v.displayName=f;function w(p){const x=o(e+"CollectionConsumer",p);return Ne.useCallback(()=>{const y=x.collectionRef.current;if(!y)return[];const S=Array.from(y.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((C,P)=>S.indexOf(C.ref.current)-S.indexOf(P.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:u,ItemSlot:v},w,r]}var AI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Oo=AI.reduce((e,t)=>{const n=Bd(`Primitive.${t}`),r=m.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),RI=qd[" useInsertionEffect ".trim().toString()]||At;function j1({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,a]=II({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const f=m.useRef(e!==void 0);m.useEffect(()=>{const d=f.current;d!==l&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=m.useCallback(f=>{var d;if(l){const g=MI(f)?f(e):f;g!==e&&((d=a.current)==null||d.call(a,g))}else o(f)},[l,e,o,a]);return[c,u]}function II({defaultProp:e,onChange:t}){const[n,r]=m.useState(e),s=m.useRef(n),o=m.useRef(t);return RI(()=>{o.current=t},[t]),m.useEffect(()=>{var a;s.current!==n&&((a=o.current)==null||a.call(o,n),s.current=n)},[n,s]),[n,r,o]}function MI(e){return typeof e=="function"}var ju="rovingFocusGroup.onEntryFocus",DI={bubbles:!1,cancelable:!0},Ji="RovingFocusGroup",[Ud,C1,OI]=PI(Ji),[LI,E1]=Ct(Ji,[OI]),[FI,$I]=LI(Ji),_1=m.forwardRef((e,t)=>i.jsx(Ud.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Ud.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(zI,{...e,ref:t})})}));_1.displayName=Ji;var zI=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,g=m.useRef(null),v=Re(t,g),w=Mo(o),[p,x]=j1({prop:a,defaultProp:l??null,onChange:c,caller:Ji}),[h,y]=m.useState(!1),S=qe(u),j=C1(n),N=m.useRef(!1),[C,P]=m.useState(0);return m.useEffect(()=>{const T=g.current;if(T)return T.addEventListener(ju,S),()=>T.removeEventListener(ju,S)},[S]),i.jsx(FI,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:p,onItemFocus:m.useCallback(T=>x(T),[x]),onItemShiftTab:m.useCallback(()=>y(!0),[]),onFocusableItemAdd:m.useCallback(()=>P(T=>T+1),[]),onFocusableItemRemove:m.useCallback(()=>P(T=>T-1),[]),children:i.jsx(Oo.div,{tabIndex:h||C===0?-1:0,"data-orientation":r,...d,ref:v,style:{outline:"none",...e.style},onMouseDown:or(e.onMouseDown,()=>{N.current=!0}),onFocus:or(e.onFocus,T=>{const M=!N.current;if(T.target===T.currentTarget&&M&&!h){const A=new CustomEvent(ju,DI);if(T.currentTarget.dispatchEvent(A),!A.defaultPrevented){const R=j().filter($=>$.focusable),E=R.find($=>$.active),O=R.find($=>$.id===p),I=[E,O,...R].filter(Boolean).map($=>$.ref.current);A1(I,f)}}N.current=!1}),onBlur:or(e.onBlur,()=>y(!1))})})}),T1="RovingFocusGroupItem",P1=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:a,...l}=e,c=Br(),u=o||c,f=$I(T1,n),d=f.currentTabStopId===u,g=C1(n),{onFocusableItemAdd:v,onFocusableItemRemove:w,currentTabStopId:p}=f;return m.useEffect(()=>{if(r)return v(),()=>w()},[r,v,w]),i.jsx(Ud.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(Oo.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:or(e.onMouseDown,x=>{r?f.onItemFocus(u):x.preventDefault()}),onFocus:or(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:or(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const h=WI(x,f.orientation,f.dir);if(h!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let S=g().filter(j=>j.focusable).map(j=>j.ref.current);if(h==="last")S.reverse();else if(h==="prev"||h==="next"){h==="prev"&&S.reverse();const j=S.indexOf(x.currentTarget);S=f.loop?VI(S,j+1):S.slice(j+1)}setTimeout(()=>A1(S))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:p!=null}):a})})});P1.displayName=T1;var BI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function UI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function WI(e,t,n){const r=UI(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return BI[r]}function A1(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function VI(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var HI=_1,KI=P1;function GI(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var R1=e=>{const{present:t,children:n}=e,r=YI(t),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),o=Re(r.ref,qI(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:o}):null};R1.displayName="Presence";function YI(e){const[t,n]=m.useState(),r=m.useRef(null),s=m.useRef(e),o=m.useRef("none"),a=e?"mounted":"unmounted",[l,c]=GI(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Ma(r.current);o.current=l==="mounted"?u:"none"},[l]),At(()=>{const u=r.current,f=s.current;if(f!==e){const g=o.current,v=Ma(u);e?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&g!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),At(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=v=>{const p=Ma(r.current).includes(CSS.escape(v.animationName));if(v.target===t&&p&&(c("ANIMATION_END"),!s.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},g=v=>{v.target===t&&(o.current=Ma(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Ma(e){return(e==null?void 0:e.animationName)||"none"}function qI(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Cc="Tabs",[XI,_4]=Ct(Cc,[E1]),I1=E1(),[QI,Fh]=XI(Cc),M1=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=Mo(l),[d,g]=j1({prop:r,onChange:s,defaultProp:o??"",caller:Cc});return i.jsx(QI,{scope:n,baseId:Br(),value:d,onValueChange:g,orientation:a,dir:f,activationMode:c,children:i.jsx(Oo.div,{dir:f,"data-orientation":a,...u,ref:t})})});M1.displayName=Cc;var D1="TabsList",O1=m.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,o=Fh(D1,n),a=I1(n);return i.jsx(HI,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:i.jsx(Oo.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});O1.displayName=D1;var L1="TabsTrigger",F1=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=e,a=Fh(L1,n),l=I1(n),c=B1(a.baseId,r),u=U1(a.baseId,r),f=r===a.value;return i.jsx(KI,{asChild:!0,...l,focusable:!s,active:f,children:i.jsx(Oo.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:or(e.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?a.onValueChange(r):d.preventDefault()}),onKeyDown:or(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(r)}),onFocus:or(e.onFocus,()=>{const d=a.activationMode!=="manual";!f&&!s&&d&&a.onValueChange(r)})})})});F1.displayName=L1;var $1="TabsContent",z1=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...a}=e,l=Fh($1,n),c=B1(l.baseId,r),u=U1(l.baseId,r),f=r===l.value,d=m.useRef(f);return m.useEffect(()=>{const g=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(g)},[]),i.jsx(R1,{present:s||f,children:({present:g})=>i.jsx(Oo.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!g,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:g&&o})})});z1.displayName=$1;function B1(e,t){return`${e}-trigger-${t}`}function U1(e,t){return`${e}-content-${t}`}var ZI=M1,W1=O1,V1=F1,H1=z1;const JI=ZI,K1=m.forwardRef(({className:e,...t},n)=>i.jsx(W1,{ref:n,className:Ce("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));K1.displayName=W1.displayName;const Wd=m.forwardRef(({className:e,...t},n)=>i.jsx(V1,{ref:n,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));Wd.displayName=V1.displayName;const Vd=m.forwardRef(({className:e,...t},n)=>i.jsx(H1,{ref:n,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Vd.displayName=H1.displayName;const e4={"paid@demo.com":{password:"demo123",type:"paid"},"mazzu001@hotmail.com":{password:"demo123",type:"paid"}};function t4({isOpen:e,onClose:t,onLogin:n,defaultTab:r="signin"}){const[s,o]=m.useState(""),[a,l]=m.useState(""),[c,u]=m.useState(!1),[f,d]=m.useState(""),[g,v]=m.useState(!1),w=async x=>{x.preventDefault(),d(""),v(!0);try{const h=e4[s.toLowerCase()];if(h&&h.password===a){console.log("✅ Demo user login successful:",s),n(h.type,s),t(),o(""),l(""),v(!1);return}const y=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.toLowerCase(),password:a})}),S=await y.json();if(!y.ok){d(S.error||"Invalid email or password"),v(!1);return}console.log("✅ Cloud login successful:",S.user.email),n(S.user.userType,S.user.email),t(),o(""),l("")}catch(h){console.error("Login error:",h),d("Login failed. Please try again.")}finally{v(!1)}},p=async x=>{x.preventDefault(),d(""),v(!0);try{const h=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.toLowerCase(),password:a})}),y=await h.json();if(!h.ok){d(y.error||"Registration failed"),v(!1);return}console.log("✅ Registration successful:",y.user.email),n(y.user.userType,y.user.email),t(),o(""),l("")}catch(h){console.error("Registration error:",h),d("Registration failed. Please try again.")}finally{v(!1)}};return i.jsx(Jn,{open:e,onOpenChange:t,children:i.jsxs(Ln,{className:"sm:max-w-md",children:[i.jsxs(er,{children:[i.jsx(tr,{children:"Welcome to Live Performance Pro"}),i.jsx(Al,{children:"Sign in to your account or create a new one to get started"})]}),i.jsxs(JI,{defaultValue:r,className:"w-full",children:[i.jsxs(K1,{className:"grid w-full grid-cols-2",children:[i.jsx(Wd,{value:"signin",children:"Sign In"}),i.jsx(Wd,{value:"signup",children:"Sign Up"})]}),i.jsx(Vd,{value:"signin",className:"space-y-4",children:i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(rt,{htmlFor:"signin-email",children:"Email"}),i.jsx(zt,{id:"signin-email",type:"email",placeholder:"Enter your email",value:s,onChange:x=>o(x.target.value),required:!0,"data-testid":"input-email"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(rt,{htmlFor:"signin-password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(zt,{id:"signin-password",type:c?"text":"password",placeholder:"Enter your password",value:a,onChange:x=>l(x.target.value),required:!0,"data-testid":"input-password"}),i.jsx(ee,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>u(!c),"data-testid":"button-toggle-password",children:c?i.jsx(gp,{className:"h-4 w-4"}):i.jsx(vp,{className:"h-4 w-4"})})]})]}),f&&i.jsx("p",{className:"text-sm text-red-500","data-testid":"text-error",children:f}),i.jsx(ee,{type:"submit",className:"w-full",disabled:g,"data-testid":"button-signin",children:g?"Signing in...":"Sign In"})]})}),i.jsxs(Vd,{value:"signup",className:"space-y-4",children:[i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(rt,{htmlFor:"signup-email",children:"Email"}),i.jsx(zt,{id:"signup-email",type:"email",placeholder:"Enter your email",value:s,onChange:x=>o(x.target.value),required:!0,"data-testid":"input-signup-email"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(rt,{htmlFor:"signup-password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(zt,{id:"signup-password",type:c?"text":"password",placeholder:"Create a password",value:a,onChange:x=>l(x.target.value),required:!0,minLength:6,"data-testid":"input-signup-password"}),i.jsx(ee,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>u(!c),"data-testid":"button-toggle-signup-password",children:c?i.jsx(gp,{className:"h-4 w-4"}):i.jsx(vp,{className:"h-4 w-4"})})]})]}),f&&i.jsx("p",{className:"text-sm text-red-500","data-testid":"text-signup-error",children:f}),i.jsx(ee,{type:"submit",className:"w-full",disabled:g,"data-testid":"button-signup",children:g?"Creating account...":"Create Free Account"})]}),i.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Start with 2 free songs • Upgrade to Premium ($4.99/month) for unlimited songs"})]})]})]})})}function n4(){const[e,t]=m.useState(!1),[n,r]=m.useState("signin"),{login:s}=hr();return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:i.jsxs("div",{className:"container mx-auto px-4 py-16",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("div",{className:"flex justify-center items-center gap-3 mb-6",children:[i.jsx(Vn,{className:"w-12 h-12 text-purple-400"}),i.jsx("h1",{className:"text-4xl font-bold text-white",children:"StageTracker Pro"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto",children:"Professional live music performance application with multi-track audio for pre recorded backing tracks and synchronized lyrics display."})]}),i.jsxs("div",{className:"mb-16",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"See StageTracker Pro in Action"}),i.jsx("p",{className:"text-lg text-gray-300 max-w-3xl mx-auto",children:"Watch how professional musicians use StageTracker Pro for live performances with multi-track backing tracks."})]}),i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsx("div",{className:"relative w-full h-0 pb-[56.25%] rounded-lg overflow-hidden shadow-2xl",children:i.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:"https://www.youtube.com/embed/-dfiVXaDc4Q",title:"StageTracker Pro Demo",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,"data-testid":"video-demo"})})})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:[i.jsx(je,{className:"bg-slate-800/50 border-slate-700",children:i.jsxs(Oe,{children:[i.jsx(Vn,{className:"w-8 h-8 text-purple-400 mb-2"}),i.jsx(Le,{className:"text-white",children:"Multi-Track Audio"}),i.jsx(Rr,{className:"text-gray-400",children:"Mix up to 6 audio tracks with individual volume, mute, and solo controls for each song. Up to 2 songs for free accounts and unlimited songs for subscribers."})]})}),i.jsx(je,{className:"bg-slate-800/50 border-slate-700",children:i.jsxs(Oe,{children:[i.jsx(On,{className:"w-8 h-8 text-yellow-400 mb-2"}),i.jsx(Le,{className:"text-white",children:"Timestamped Lyrics"}),i.jsx(Rr,{className:"text-gray-400",children:"Precise timing embedded in lyrics for synchronized display. Time stamps help your lyrics scroll in perfect time with the music Karaoke style for professional live performances."})]})}),i.jsx(je,{className:"bg-slate-800/50 border-slate-700",children:i.jsxs(Oe,{children:[i.jsx(Tj,{className:"w-8 h-8 text-green-400 mb-2"}),i.jsx(Le,{className:"text-white",children:"Offline First"}),i.jsx(Rr,{className:"text-gray-400",children:"Complete local file storage for reliable live performance without internet. With local storage StageTracker Pro offers lightning fast load times because your stage performance depends on it."})]})})]}),i.jsxs(je,{className:"max-w-md mx-auto bg-slate-800/70 border-slate-600",children:[i.jsxs(Oe,{className:"text-center",children:[i.jsx(Le,{className:"text-2xl text-white",children:"Start Your FREE Trial"}),i.jsxs(Rr,{className:"text-gray-400",children:[i.jsx("span",{className:"text-green-400 font-semibold",children:"✓ No Credit Card Required"}),i.jsx("br",{}),i.jsx("span",{className:"text-green-400 font-semibold",children:"✓ 2 Free Songs Included"}),i.jsx("br",{}),i.jsx("span",{className:"text-green-400 font-semibold",children:"✓ Instant Access"})]})]}),i.jsxs(Pe,{className:"space-y-4",children:[i.jsx(ee,{onClick:()=>{r("signup"),t(!0)},className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold",size:"lg","data-testid":"button-signup",children:"🚀 Start FREE Trial - No Credit Card!"}),i.jsx(ee,{onClick:()=>{r("signin"),t(!0)},variant:"outline",className:"w-full border-purple-600 text-purple-400 hover:bg-purple-600 hover:text-white",size:"lg","data-testid":"button-login",children:"Already Have an Account? Sign In"})]})]}),i.jsx(t4,{isOpen:e,onClose:()=>t(!1),onLogin:s,defaultTab:n}),i.jsx("div",{className:"text-center mt-12",children:i.jsxs("div",{className:"bg-gradient-to-r from-green-600/20 to-blue-600/20 border border-green-500/30 rounded-lg p-6 max-w-2xl mx-auto",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"🎉 100% FREE to Get Started"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"text-green-400",children:[i.jsx("p",{className:"font-semibold",children:"✓ No Credit Card Required"}),i.jsx("p",{className:"font-semibold",children:"✓ No Hidden Fees"}),i.jsx("p",{className:"font-semibold",children:"✓ Cancel Anytime"})]}),i.jsxs("div",{className:"text-blue-400",children:[i.jsx("p",{className:"font-semibold",children:"✓ 2 Free Songs Forever"}),i.jsx("p",{className:"font-semibold",children:"✓ Professional Audio Features"}),i.jsx("p",{className:"font-semibold",children:"✓ Offline Performance"})]})]}),i.jsx("p",{className:"text-gray-300 mt-4 text-sm",children:"Upgrade to unlimited songs for just $4.99/month when you're ready"})]})})]})})}const r4=[{id:"pause",title:"Pause Your Subscription",description:"Take a break for up to 3 months and keep your data",icon:bj,action:"Pause Subscription",variant:"outline"},{id:"discount",title:"50% Off Next 3 Months",description:"Special offer just for you - continue at half price",icon:wo,action:"Apply Discount",variant:"default"},{id:"downgrade",title:"Switch to Premium",description:"Keep unlimited songs at a lower monthly price",icon:ln,action:"Downgrade to Premium",variant:"outline"}],s4=["Too expensive","Not using all features","Found a better alternative","Technical issues","No longer performing live","Temporary financial situation","Other"];function o4(){const[,e]=yt(),{user:t,isLoading:n}=hr(),{toast:r}=Mt(),[s,o]=m.useState("retention"),[a,l]=m.useState([]),[c,u]=m.useState(""),[f,d]=m.useState(!1);m.useEffect(()=>{n||(!t||t.userType==="free"||!t.userType?(console.log("🚫 Unsubscribe access denied - User type:",t==null?void 0:t.userType,"User exists:",!!t),e("/")):console.log("✅ Unsubscribe access granted - User type:",t.userType))},[t,n,e]);const g=async p=>{d(!0);try{switch(await new Promise(x=>setTimeout(x,1e3)),p){case"pause":r({title:"Subscription Paused",description:"Your subscription is paused for 3 months. You can reactivate anytime."});break;case"discount":r({title:"Discount Applied",description:"You'll receive 50% off your next 3 billing cycles!"});break;case"downgrade":r({title:"Plan Changed",description:"You've been switched to Premium. Your next bill will reflect the new rate."});break}setTimeout(()=>e("/"),2e3)}catch{r({title:"Error",description:"Unable to process your request. Please try again.",variant:"destructive"})}finally{d(!1)}},v=p=>{l(x=>x.includes(p)?x.filter(h=>h!==p):[...x,p])},w=async()=>{d(!0);try{if(!(await fetch("/api/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t==null?void 0:t.email,reasons:a,feedback:c})})).ok)throw new Error("Failed to cancel subscription");r({title:"Subscription Cancelled",description:"Your subscription has been cancelled. You'll retain access until your current billing period ends."});const x=localStorage.getItem("lpp_local_user");if(x){const h=JSON.parse(x);h.userType="free",h.hasActiveSubscription=!1,localStorage.setItem("lpp_local_user",JSON.stringify(h)),window.dispatchEvent(new Event("auth-change"))}setTimeout(()=>e("/"),3e3)}catch{r({title:"Error",description:"Unable to cancel subscription. Please contact support.",variant:"destructive"})}finally{d(!1)}};return n?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:"Checking access permissions..."})]})}):!t||t.userType==="free"||!t.userType?null:i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[i.jsxs(ee,{variant:"ghost",onClick:()=>e("/"),className:"flex items-center gap-2","data-testid":"button-back-home",children:[i.jsx(yo,{className:"w-4 h-4"}),"Back to App"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"We're Sorry to See You Go"}),i.jsx("p",{className:"text-muted-foreground",children:"Let's see if we can help before you cancel"})]})]}),s==="retention"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(je,{children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center gap-2",children:[i.jsx(Vn,{className:"w-5 h-5"}),"Your Current Plan"]})}),i.jsx(Pe,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center gap-3",children:t.userType==="professional"?i.jsxs(i.Fragment,{children:[i.jsx(wo,{className:"w-6 h-6 text-yellow-500"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"Professional Plan"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Full audio integration and advanced features"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx(ln,{className:"w-6 h-6 text-purple-500"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"Premium Plan"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Unlimited songs and advanced lyrics"})]})]})}),i.jsx(Bt,{variant:"secondary",children:"Active"})]})})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:r4.map(p=>{const x=p.icon;return i.jsxs(je,{className:"hover:shadow-lg transition-shadow",children:[i.jsxs(Oe,{className:"text-center",children:[i.jsx(x,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),i.jsx(Le,{className:"text-lg",children:p.title})]}),i.jsxs(Pe,{className:"text-center space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:p.description}),i.jsx(ee,{variant:p.variant,onClick:()=>g(p.id),disabled:f,className:"w-full","data-testid":`button-retention-${p.id}`,children:f?"Processing...":p.action})]})]},p.id)})}),i.jsxs(je,{children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center gap-2",children:[i.jsx(ac,{className:"w-5 h-5"}),"You'll Lose Access To"]})}),i.jsx(Pe,{children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(On,{className:"w-4 h-4 text-yellow-500"}),"Unlimited song storage"]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(On,{className:"w-4 h-4 text-yellow-500"}),"Advanced waveform visualization"]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(On,{className:"w-4 h-4 text-yellow-500"}),"Timestamped lyrics with automation"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(On,{className:"w-4 h-4 text-yellow-500"}),"Professional stage features"]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(On,{className:"w-4 h-4 text-yellow-500"}),"Audio device integration"]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(On,{className:"w-4 h-4 text-yellow-500"}),"Priority support"]})]})]})})]}),i.jsx("div",{className:"text-center",children:i.jsx(ee,{variant:"ghost",onClick:()=>o("feedback"),className:"text-muted-foreground hover:text-foreground","data-testid":"button-continue-cancel",children:"No thanks, continue with cancellation"})})]}),s==="feedback"&&i.jsxs(je,{children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center gap-2",children:[i.jsx(jd,{className:"w-5 h-5 text-orange-500"}),"Help Us Improve"]})}),i.jsxs(Pe,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(rt,{className:"text-base font-medium",children:"Why are you cancelling? (Select all that apply)"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-3 mt-3",children:s4.map(p=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Rw,{id:p,checked:a.includes(p),onCheckedChange:()=>v(p),"data-testid":`checkbox-reason-${p.toLowerCase().replace(/\s+/g,"-")}`}),i.jsx(rt,{htmlFor:p,className:"text-sm cursor-pointer",children:p})]},p))})]}),i.jsxs("div",{children:[i.jsx(rt,{htmlFor:"feedback",className:"text-base font-medium",children:"Additional feedback (optional)"}),i.jsx(Th,{id:"feedback",placeholder:"Tell us more about your experience or what could have been better...",value:c,onChange:p=>u(p.target.value),className:"mt-2","data-testid":"textarea-additional-feedback"})]}),i.jsxs("div",{className:"flex gap-4 pt-4",children:[i.jsx(ee,{variant:"outline",onClick:()=>o("retention"),className:"flex-1","data-testid":"button-back-retention",children:"Back to Offers"}),i.jsx(ee,{variant:"destructive",onClick:()=>o("confirm"),className:"flex-1","data-testid":"button-continue-feedback",children:"Continue Cancellation"})]})]})]}),s==="confirm"&&i.jsxs(je,{children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center gap-2 text-destructive",children:[i.jsx(jd,{className:"w-5 h-5"}),"Confirm Cancellation"]})}),i.jsxs(Pe,{className:"space-y-6",children:[i.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[i.jsx("h3",{className:"font-medium mb-2",children:"What happens next:"}),i.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"• Your subscription will be cancelled immediately"}),i.jsx("li",{children:"• You'll retain access until your current billing period ends"}),i.jsx("li",{children:"• Your account will automatically switch to the free plan (2 songs limit)"}),i.jsx("li",{children:"• All your local music files and data will be preserved"}),i.jsx("li",{children:"• You can resubscribe anytime to regain full access"})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{variant:"outline",onClick:()=>o("feedback"),className:"flex-1","data-testid":"button-back-feedback",children:"Go Back"}),i.jsx(ee,{variant:"destructive",onClick:w,disabled:f,className:"flex-1","data-testid":"button-final-cancel",children:f?"Cancelling...":"Yes, Cancel My Subscription"})]})]})]})]})})}function yg(){return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:i.jsxs("div",{className:"container mx-auto px-4 py-16 max-w-4xl",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"flex justify-center items-center gap-3 mb-6",children:[i.jsx(Vn,{className:"w-12 h-12 text-purple-400"}),i.jsx("h1",{className:"text-4xl font-bold text-white",children:"StageTracker Pro"})]}),i.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Privacy Policy"}),i.jsx("p",{className:"text-gray-300",children:"Last updated: January 16, 2025"})]}),i.jsx("div",{className:"mb-8",children:i.jsx(Bp,{href:"/",children:i.jsxs(ee,{variant:"outline",className:"border-purple-600 text-purple-400 hover:bg-purple-600 hover:text-white",children:[i.jsx(yo,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})}),i.jsx(je,{className:"bg-slate-800/70 border-slate-600",children:i.jsx(Pe,{className:"p-8",children:i.jsxs("div",{className:"prose prose-invert max-w-none space-y-6",children:[i.jsxs("section",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"1. Information We Collect"}),i.jsxs("div",{className:"text-gray-300 space-y-3",children:[i.jsx("p",{children:"We collect information you provide directly to us, such as when you create an account, make a purchase, or contact us for support."}),i.jsxs("p",{children:[i.jsx("strong",{children:"Personal Information:"})," Email address, payment information (processed securely through Stripe), and profile information you choose to provide."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Usage Information:"})," Information about how you use our application, including features accessed, songs uploaded, and performance data."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Device Information:"})," Information about your device, including browser type, operating system, and device identifiers."]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"2. How We Use Your Information"}),i.jsxs("div",{className:"text-gray-300 space-y-3",children:[i.jsx("p",{children:"We use the information we collect to:"}),i.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[i.jsx("li",{children:"Provide, maintain, and improve our services"}),i.jsx("li",{children:"Process transactions and send related information"}),i.jsx("li",{children:"Send technical notices, updates, and support messages"}),i.jsx("li",{children:"Respond to your comments and questions"}),i.jsx("li",{children:"Monitor and analyze trends and usage"})]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"3. Information Sharing and Disclosure"}),i.jsxs("div",{className:"text-gray-300 space-y-3",children:[i.jsx("p",{children:"We do not sell, trade, or otherwise transfer your personal information to third parties except as described in this policy."}),i.jsxs("p",{children:[i.jsx("strong",{children:"Service Providers:"})," We may share your information with third-party service providers who assist us in operating our application and conducting our business (such as Stripe for payment processing)."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Legal Requirements:"})," We may disclose your information if required by law or in response to valid requests by public authorities."]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"4. Data Storage and Security"}),i.jsxs("div",{className:"text-gray-300 space-y-3",children:[i.jsx("p",{children:"We take reasonable measures to protect your personal information from unauthorized access, use, or disclosure."}),i.jsxs("p",{children:[i.jsx("strong",{children:"Local Storage:"})," Audio files and performance data are stored locally on your device for optimal performance. We do not store your audio files on our servers."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Cloud Storage:"})," Account information and subscription data are stored securely in our cloud infrastructure with industry-standard security measures."]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"5. Your Rights and Choices"}),i.jsxs("div",{className:"text-gray-300 space-y-3",children:[i.jsx("p",{children:"You have certain rights regarding your personal information:"}),i.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Access:"})," You can request access to your personal information"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Correction:"})," You can request correction of inaccurate personal information"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Deletion:"})," You can request deletion of your personal information"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Account Closure:"})," You can delete your account at any time"]})]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"6. Cookies and Analytics"}),i.jsxs("div",{className:"text-gray-300 space-y-3",children:[i.jsx("p",{children:"We use cookies and similar tracking technologies to improve user experience and analyze usage patterns."}),i.jsxs("p",{children:[i.jsx("strong",{children:"Google Analytics:"})," We use Google Analytics to understand how users interact with our application. You can opt-out of Google Analytics by installing the Google Analytics opt-out browser add-on."]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"7. Children's Privacy"}),i.jsx("div",{className:"text-gray-300 space-y-3",children:i.jsx("p",{children:"Our service is not directed to children under 13. We do not knowingly collect personal information from children under 13. If we learn that we have collected personal information from a child under 13, we will take steps to delete such information."})})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"8. Changes to This Privacy Policy"}),i.jsx("div",{className:"text-gray-300 space-y-3",children:i.jsx("p",{children:'We may update this privacy policy from time to time. We will notify you of any changes by posting the new privacy policy on this page and updating the "Last updated" date.'})})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"9. Contact Us"}),i.jsxs("div",{className:"text-gray-300 space-y-3",children:[i.jsx("p",{children:"If you have any questions about this privacy policy, please contact us at:"}),i.jsx("p",{children:"Email: privacy@stagetrackerpro.com"})]})]})]})})}),i.jsx("div",{className:"text-center mt-8",children:i.jsx(Bp,{href:"/",children:i.jsx(ee,{className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Return to StageTracker Pro"})})})]})})}function i4({onInitialized:e}){const[t,n]=m.useState(!1),[r,s]=m.useState(null),[o,a]=m.useState(!0);m.useEffect(()=>{(()=>{const u="indexedDB"in window,f="File"in window;if(console.log("Browser support check:",{hasIndexedDB:u,hasFileAPI:f,userAgent:navigator.userAgent.toLowerCase().substring(0,100)}),!u||!f){console.warn("Browser storage APIs not available"),a(!1);return}a(!0)})()},[]);const l=async()=>{n(!0),s(null);try{await cn.getInstance().initialize()?(console.log("Browser file system initialized successfully"),e()):s("Failed to initialize browser storage. Please try again.")}catch(c){console.error("Initialization error:",c);let u="Unknown error during initialization";c.message.includes("not supported")?u="Your browser doesn't support the File System Access API. Please use Chrome, Edge, or another Chromium-based browser.":c.message.includes("secure context")?u="This feature requires HTTPS. Please make sure you're accessing the app over a secure connection.":c.message.includes("AbortError")||c.message.includes("cancelled")?u="Directory selection was cancelled. Click the button again to choose your project folder.":c.message.includes("picker")?u="Could not open the folder selection dialog. Please ensure you're using a supported browser and try again.":c.message.includes("Permission denied")||c.message.includes("NotAllowedError")?u="Permission denied. Please grant permission to access folders when prompted by your browser. You may need to check browser settings or enable file system access flags.":c.message.includes("SecurityError")?u="Security error: Your browser is blocking file system access. Please ensure you're on HTTPS and check browser security settings.":u=c.message||"Failed to set up local file storage.",s(u)}finally{n(!1)}};return o?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:i.jsxs(je,{className:"w-full max-w-lg bg-surface border-gray-700",children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center text-2xl",children:[i.jsx(wj,{className:"w-6 h-6 mr-2 text-primary"}),"Setup Browser Storage"]})}),i.jsx(Pe,{className:"space-y-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-300",children:"This music performance app stores all data locally in your browser for maximum performance and offline operation."}),i.jsxs("div",{className:"bg-blue-950/20 border border-blue-500 rounded-lg p-4",children:[i.jsx("h3",{className:"text-blue-300 font-medium mb-2",children:"What happens next:"}),i.jsxs("ul",{className:"text-blue-200 text-sm space-y-1",children:[i.jsx("li",{children:"• Browser storage (IndexedDB) will be initialized"}),i.jsx("li",{children:"• Audio files will be stored securely in your browser"}),i.jsx("li",{children:"• Song metadata and settings saved locally"}),i.jsx("li",{children:"• Everything stays 100% local - no cloud or internet required"}),i.jsx("li",{children:"• Works in all modern browsers including Edge, Chrome, Firefox"})]})]}),i.jsxs("div",{className:"bg-green-950/20 border border-green-500 rounded-lg p-4",children:[i.jsx("h3",{className:"text-green-300 font-medium mb-2",children:"Browser Storage Solution:"}),i.jsx("p",{className:"text-green-200 text-sm",children:"This approach works reliably in all environments, including Replit. Your audio files and project data will be stored securely in your browser's local storage."})]}),r&&i.jsxs("div",{className:"bg-red-950/20 border border-red-500 rounded-lg p-4",children:[i.jsx("h3",{className:"text-red-300 font-medium mb-2",children:"Setup Error:"}),i.jsx("p",{className:"text-red-200 text-sm",children:r})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(ee,{onClick:l,disabled:t,className:"w-full h-12 text-lg","data-testid":"button-initialize-local-storage",children:[i.jsx(xj,{className:"w-5 h-5 mr-2"}),t?"Setting up...":"Initialize Local Storage"]}),i.jsx("p",{className:"text-xs text-gray-500 text-center",children:"This will initialize secure browser storage for your music project"})]})]})})]})}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:i.jsxs(je,{className:"w-full max-w-md bg-red-950 border-red-800",children:[i.jsx(Oe,{children:i.jsxs(Le,{className:"flex items-center text-red-200",children:[i.jsx(jd,{className:"w-5 h-5 mr-2"}),"Browser Not Supported"]})}),i.jsxs(Pe,{children:[i.jsx("p",{className:"text-red-300 mb-4",children:"This application requires IndexedDB and File API support for local storage, which is not available in your current browser."}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"text-red-400",children:[i.jsx("strong",{children:"Required:"})," Modern browser with IndexedDB support"]}),i.jsxs("p",{className:"text-red-400",children:[i.jsx("strong",{children:"Supported:"})," Chrome, Firefox, Safari, Edge (recent versions)"]}),i.jsx("p",{className:"text-red-300 mt-3",children:"Please update your browser to use this application."})]})]})]})})}const a4=()=>{const e="G-TEX642NB8G",t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(t);const n=document.createElement("script");n.textContent=`
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '${e}');
  `,document.head.appendChild(n)},l4=e=>{if(typeof window>"u"||!window.gtag)return;window.gtag("config","G-TEX642NB8G",{page_path:e})},c4=()=>{const[e]=yt(),t=m.useRef(e);m.useEffect(()=>{e!==t.current&&(l4(e),t.current=e)},[e])};function xg({children:e}){return c4(),i.jsx(k0,{children:e})}function u4(){const[e,t]=m.useState(!1),[n,r]=m.useState(!0),{isAuthenticated:s,isLoading:o,isPaidUser:a}=hr();m.useEffect(()=>{console.log("🔍 Checking URL for payment success:",window.location.href);let c,u,f;const d=window.location.href;if(d.includes("redirect_status=succeeded")){const v=d.split("redirect_status=succeeded")[1];if(v){const w=new URLSearchParams(v);c="succeeded",u=w.get("email")||w.get("&email"),f=w.get("tier")||w.get("&tier")}}else{const v=new URLSearchParams(window.location.search);c=v.get("redirect_status"),u=v.get("email"),f=v.get("tier")}console.log("🔍 Parsed values:",{redirectStatus:c,email:u,tier:f}),c==="succeeded"&&u&&f?(window.history.replaceState({},document.title,window.location.pathname),console.log(`✅ Payment completed successfully - updating ${u} to ${f}`),(async()=>{try{const w=f==="professional"?3:f==="premium"?2:1;console.log(`🔄 Making API call to update subscription: ${u} -> ${w}`);const p=await fetch("/api/update-subscription-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,subscriptionStatus:w})});console.log(`📋 API response status: ${p.status}`);const x=await p.json();if(console.log("📋 API response data:",x),p.ok){const h=localStorage.getItem("lpp_local_user");if(h){const S=JSON.parse(h);S.userType=f,localStorage.setItem("lpp_local_user",JSON.stringify(S)),console.log(`📱 Updated localStorage: ${S.email} -> ${f}`)}console.log(`✅ Subscription updated to ${f==="professional"?"Professional":f==="premium"?"Premium":"Free"} - updating UI state`),setTimeout(()=>{window.dispatchEvent(new Event("auth-change")),window.dispatchEvent(new Event("force-subscription-refresh"))},100)}else console.error("❌ Failed to update subscription status:",x)}catch(w){console.error("❌ Error updating subscription:",w)}})()):console.log("🔍 No payment success detected in URL"),(async()=>{try{const v=cn.getInstance();await v.isAlreadyInitialized()?(console.log("Browser file system already initialized - auto-initializing"),await v.initialize()?t(!0):console.log("Auto-initialization failed - showing setup screen")):console.log("Browser file system needs initialization")}catch(v){console.error("Error checking browser file system:",v)}finally{r(!1)}})()},[]);const l=()=>{t(!0)};return n||o?i.jsxs(Dp,{children:[i.jsx("div",{className:"min-h-screen min-h-[100dvh] bg-background flex items-center justify-center mobile-vh-fix",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:o?"Checking authentication...":"Checking local storage..."})]})}),i.jsx(jp,{})]}):i.jsxs(Dp,{children:[s?e?i.jsxs(xg,{children:[i.jsx(mt,{path:"/",component:()=>i.jsx(gR,{userType:a?"premium":"free"})}),i.jsx(mt,{path:"/dashboard",component:NR}),i.jsx(mt,{path:"/broadcast-viewer",component:CR}),i.jsx(mt,{path:"/broadcast-viewer-old",component:jR}),i.jsx(mt,{path:"/streaming-demo",component:yR}),i.jsx(mt,{path:"/subscribe",component:fI}),i.jsx(mt,{path:"/subscribe-fixed",component:pI}),i.jsx(mt,{path:"/subscribe-test-elements",component:SI}),i.jsx(mt,{path:"/subscribe-debug",component:xI}),i.jsx(mt,{path:"/subscribe-simple",component:yI}),i.jsx(mt,{path:"/subscribe-old",component:uI}),i.jsx(mt,{path:"/subscribe-test",component:kI}),i.jsx(mt,{path:"/plans",component:NI}),i.jsx(mt,{path:"/unsubscribe",component:o4}),i.jsx(mt,{path:"/privacy-policy",component:yg})]}):i.jsx(i4,{onInitialized:l}):i.jsxs(xg,{children:[i.jsx(mt,{path:"/",component:n4}),i.jsx(mt,{path:"/privacy-policy",component:yg})]}),i.jsx(jp,{})]})}function d4(){return m.useEffect(()=>{a4()},[]),i.jsx(fN,{client:mN,children:i.jsx(k_,{children:i.jsx(u4,{})})})}zy(document.getElementById("root")).render(i.jsx(d4,{}));
